{"version":3,"file":"index.modern.js","sources":["../src/types/public-types.ts","../src/helpers/date-helper.ts","../src/components/task-list/task-list-header.tsx","../src/components/task-list/task-list-table.tsx","../src/components/other/tooltip.tsx","../src/components/other/vertical-scroll.tsx","../src/components/task-list/task-list.tsx","../src/components/grid/grid-body.tsx","../src/components/grid/grid.tsx","../src/components/calendar/top-part-of-calendar.tsx","../src/components/calendar/calendar.tsx","../src/components/other/arrow.tsx","../src/helpers/bar-helper.ts","../src/helpers/other-helper.ts","../src/components/task-item/bar/bar-display.tsx","../src/components/task-item/bar/bar-date-handle.tsx","../src/components/task-item/bar/bar-progress-handle.tsx","../src/components/task-item/bar/bar.tsx","../src/components/task-item/bar/bar-small.tsx","../src/components/task-item/milestone/milestone.tsx","../src/components/task-item/project/project.tsx","../src/components/task-item/task-item.tsx","../src/components/gantt/task-gantt-content.tsx","../src/components/gantt/task-gantt.tsx","../src/components/other/horizontal-scroll.tsx","../src/components/gantt/gantt.tsx"],"sourcesContent":["export enum ViewMode {\r\n  Hour = \"Hour\",\r\n  QuarterDay = \"Quarter Day\",\r\n  HalfDay = \"Half Day\",\r\n  Day = \"Day\",\r\n  /** ISO-8601 week */\r\n  Week = \"Week\",\r\n  Month = \"Month\",\r\n  QuarterYear = \"QuarterYear\",\r\n  Year = \"Year\",\r\n}\r\nexport type TaskType = \"task\" | \"milestone\" | \"project\";\r\nexport interface Task {\r\n  id: string;\r\n  type: TaskType;\r\n  name: string;\r\n  start: Date;\r\n  end: Date;\r\n  /**\r\n   * From 0 to 100\r\n   */\r\n  progress: number;\r\n  styles?: {\r\n    backgroundColor?: string;\r\n    backgroundSelectedColor?: string;\r\n    progressColor?: string;\r\n    progressSelectedColor?: string;\r\n  };\r\n  isDisabled?: boolean;\r\n  project?: string;\r\n  dependencies?: string[];\r\n  hideChildren?: boolean;\r\n  displayOrder?: number;\r\n}\r\n\r\nexport interface EventOption {\r\n  /**\r\n   * Time step value for date changes.\r\n   */\r\n  timeStep?: number;\r\n  /**\r\n   * Invokes on bar select on unselect.\r\n   */\r\n  onSelect?: (task: Task, isSelected: boolean) => void;\r\n  /**\r\n   * Invokes on bar double click.\r\n   */\r\n  onDoubleClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on bar click.\r\n   */\r\n  onClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\r\n   */\r\n  onDateChange?: (\r\n    task: Task,\r\n    children: Task[]\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on progress change. Chart undoes operation if method return false or error.\r\n   */\r\n  onProgressChange?: (\r\n    task: Task,\r\n    children: Task[]\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\r\n   */\r\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on expander on task list\r\n   */\r\n  onExpanderClick?: (task: Task) => void;\r\n}\r\n\r\nexport interface DisplayOption {\r\n  viewMode?: ViewMode;\r\n  viewDate?: Date;\r\n  preStepsCount?: number;\r\n  /**\r\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\r\n   */\r\n  locale?: string;\r\n  rtl?: boolean;\r\n}\r\n\r\nexport interface StylingOption {\r\n  headerHeight?: number;\r\n  columnWidth?: number;\r\n  listCellWidth?: string;\r\n  rowHeight?: number;\r\n  ganttHeight?: number;\r\n  barCornerRadius?: number;\r\n  handleWidth?: number;\r\n  fontFamily?: string;\r\n  fontSize?: string;\r\n  /**\r\n   * How many of row width can be taken by task.\r\n   * From 0 to 100\r\n   */\r\n  barFill?: number;\r\n  barProgressColor?: string;\r\n  barProgressSelectedColor?: string;\r\n  barBackgroundColor?: string;\r\n  barBackgroundSelectedColor?: string;\r\n  projectProgressColor?: string;\r\n  projectProgressSelectedColor?: string;\r\n  projectBackgroundColor?: string;\r\n  projectBackgroundSelectedColor?: string;\r\n  milestoneBackgroundColor?: string;\r\n  milestoneBackgroundSelectedColor?: string;\r\n  arrowColor?: string;\r\n  arrowIndent?: number;\r\n  todayColor?: string;\r\n  TooltipContent?: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n  TaskListHeader?: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable?: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    /**\r\n     * Sets selected task by id\r\n     */\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n}\r\n\r\nexport interface GanttProps extends EventOption, DisplayOption, StylingOption {\r\n  tasks: Task[];\r\n}\r\n","import { Task, ViewMode } from \"../types/public-types\";\r\nimport DateTimeFormatOptions = Intl.DateTimeFormatOptions;\r\nimport DateTimeFormat = Intl.DateTimeFormat;\r\n\r\ntype DateHelperScales =\r\n  | \"year\"\r\n  | \"month\"\r\n  | \"day\"\r\n  | \"hour\"\r\n  | \"minute\"\r\n  | \"second\"\r\n  | \"millisecond\";\r\n\r\nconst intlDTCache = {};\r\nexport const getCachedDateTimeFormat = (\r\n  locString: string | string[],\r\n  opts: DateTimeFormatOptions = {}\r\n): DateTimeFormat => {\r\n  const key = JSON.stringify([locString, opts]);\r\n  let dtf = intlDTCache[key];\r\n  if (!dtf) {\r\n    dtf = new Intl.DateTimeFormat(locString, opts);\r\n    intlDTCache[key] = dtf;\r\n  }\r\n  return dtf;\r\n};\r\n\r\nexport const addToDate = (\r\n  date: Date,\r\n  quantity: number,\r\n  scale: DateHelperScales\r\n) => {\r\n  const newDate = new Date(\r\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\r\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\r\n    date.getDate() + (scale === \"day\" ? quantity : 0),\r\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\r\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\r\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\r\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\r\n  const scores = [\r\n    \"millisecond\",\r\n    \"second\",\r\n    \"minute\",\r\n    \"hour\",\r\n    \"day\",\r\n    \"month\",\r\n    \"year\",\r\n  ];\r\n\r\n  const shouldReset = (_scale: DateHelperScales) => {\r\n    const maxScore = scores.indexOf(scale);\r\n    return scores.indexOf(_scale) <= maxScore;\r\n  };\r\n  const newDate = new Date(\r\n    date.getFullYear(),\r\n    shouldReset(\"year\") ? 0 : date.getMonth(),\r\n    shouldReset(\"month\") ? 1 : date.getDate(),\r\n    shouldReset(\"day\") ? 0 : date.getHours(),\r\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\r\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\r\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const ganttDateRange = (\r\n  tasks: Task[],\r\n  viewMode: ViewMode,\r\n  preStepsCount: number\r\n) => {\r\n  let newStartDate: Date = tasks[0].start;\r\n  let newEndDate: Date = tasks[0].start;\r\n  for (const task of tasks) {\r\n    if (task.start < newStartDate) {\r\n      newStartDate = task.start;\r\n    }\r\n    if (task.end > newEndDate) {\r\n      newEndDate = task.end;\r\n    }\r\n  }\r\n  switch (viewMode) {\r\n    case ViewMode.Year:\r\n      newStartDate = addToDate(newStartDate, -1, \"year\");\r\n      newStartDate = startOfDate(newStartDate, \"year\");\r\n      newEndDate = addToDate(newEndDate, 1, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.QuarterYear:\r\n      newStartDate = addToDate(newStartDate, -3, \"month\");\r\n      newStartDate = startOfDate(newStartDate, \"month\");\r\n      newEndDate = addToDate(newEndDate, 3, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.Month:\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"month\");\r\n      newStartDate = startOfDate(newStartDate, \"month\");\r\n      newEndDate = addToDate(newEndDate, 1, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.Week:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(\r\n        getMonday(newStartDate),\r\n        -7 * preStepsCount,\r\n        \"day\"\r\n      );\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\r\n      break;\r\n    case ViewMode.Day:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 19, \"day\");\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 66, \"hour\"); // 24(1 day)*3 - 6\r\n      break;\r\n    case ViewMode.HalfDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 108, \"hour\"); // 24(1 day)*5 - 12\r\n      break;\r\n    case ViewMode.Hour:\r\n      newStartDate = startOfDate(newStartDate, \"hour\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"hour\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 1, \"day\");\r\n      break;\r\n  }\r\n  return [newStartDate, newEndDate];\r\n};\r\n\r\nexport const seedDates = (\r\n  startDate: Date,\r\n  endDate: Date,\r\n  viewMode: ViewMode\r\n) => {\r\n  let currentDate: Date = new Date(startDate);\r\n  const dates: Date[] = [currentDate];\r\n  while (currentDate < endDate) {\r\n    switch (viewMode) {\r\n      case ViewMode.Year:\r\n        currentDate = addToDate(currentDate, 1, \"year\");\r\n        break;\r\n      case ViewMode.QuarterYear:\r\n        currentDate = addToDate(currentDate, 3, \"month\");\r\n        break;\r\n      case ViewMode.Month:\r\n        currentDate = addToDate(currentDate, 1, \"month\");\r\n        break;\r\n      case ViewMode.Week:\r\n        currentDate = addToDate(currentDate, 7, \"day\");\r\n        break;\r\n      case ViewMode.Day:\r\n        currentDate = addToDate(currentDate, 1, \"day\");\r\n        break;\r\n      case ViewMode.HalfDay:\r\n        currentDate = addToDate(currentDate, 12, \"hour\");\r\n        break;\r\n      case ViewMode.QuarterDay:\r\n        currentDate = addToDate(currentDate, 6, \"hour\");\r\n        break;\r\n      case ViewMode.Hour:\r\n        currentDate = addToDate(currentDate, 1, \"hour\");\r\n        break;\r\n    }\r\n    dates.push(currentDate);\r\n  }\r\n  return dates;\r\n};\r\n\r\nexport const getLocaleMonth = (date: Date, locale: string) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    month: \"long\",\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\nexport const getLocalDayOfWeek = (\r\n  date: Date,\r\n  locale: string,\r\n  format?: \"long\" | \"short\" | \"narrow\" | undefined\r\n) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    weekday: format,\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\n/**\r\n * Returns monday of current week\r\n * @param date date for modify\r\n */\r\nconst getMonday = (date: Date) => {\r\n  const day = date.getDay();\r\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n  return new Date(date.setDate(diff));\r\n};\r\n\r\nexport const getWeekNumberISO8601 = (date: Date) => {\r\n  const tmpDate = new Date(date.valueOf());\r\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\r\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\r\n  const firstThursday = tmpDate.valueOf();\r\n  tmpDate.setMonth(0, 1);\r\n  if (tmpDate.getDay() !== 4) {\r\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\r\n  }\r\n  const weekNumber = (\r\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\r\n  ).toString();\r\n\r\n  if (weekNumber.length === 1) {\r\n    return `0${weekNumber}`;\r\n  } else {\r\n    return weekNumber;\r\n  }\r\n};\r\n\r\nexport const getDaysInMonth = (month: number, year: number) => {\r\n  return new Date(year, month + 1, 0).getDate();\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./task-list-header.module.css\";\r\n\r\nexport const TaskListHeaderDefault: React.FC<{\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n}> = ({ headerHeight, fontFamily, fontSize, rowWidth }) => {\r\n  return (\r\n    <div\r\n      className={styles.ganttTable}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      <div\r\n        className={styles.ganttTable_Header}\r\n        style={{\r\n          height: headerHeight - 2,\r\n        }}\r\n      >\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;Name\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.2,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;From\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.25,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;To\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport styles from \"./task-list-table.module.css\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nconst localeDateStringCache = {};\r\nconst toLocaleDateStringFactory =\r\n  (locale: string) =>\r\n  (date: Date, dateTimeOptions: Intl.DateTimeFormatOptions) => {\r\n    const key = date.toString();\r\n    let lds = localeDateStringCache[key];\r\n    if (!lds) {\r\n      lds = date.toLocaleDateString(locale, dateTimeOptions);\r\n      localeDateStringCache[key] = lds;\r\n    }\r\n    return lds;\r\n  };\r\nconst dateTimeOptions: Intl.DateTimeFormatOptions = {\r\n  weekday: \"short\",\r\n  year: \"numeric\",\r\n  month: \"long\",\r\n  day: \"numeric\",\r\n};\r\n\r\nexport const TaskListTableDefault: React.FC<{\r\n  rowHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  locale: string;\r\n  tasks: Task[];\r\n  selectedTaskId: string;\r\n  setSelectedTask: (taskId: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n}> = ({\r\n  rowHeight,\r\n  rowWidth,\r\n  tasks,\r\n  fontFamily,\r\n  fontSize,\r\n  locale,\r\n  onExpanderClick,\r\n}) => {\r\n  const toLocaleDateString = useMemo(\r\n    () => toLocaleDateStringFactory(locale),\r\n    [locale]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={styles.taskListWrapper}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      {tasks.map(t => {\r\n        let expanderSymbol = \"\";\r\n        if (t.hideChildren === false) {\r\n          expanderSymbol = \"▼\";\r\n        } else if (t.hideChildren === true) {\r\n          expanderSymbol = \"▶\";\r\n        }\r\n\r\n        return (\r\n          <div\r\n            className={styles.taskListTableRow}\r\n            style={{ height: rowHeight }}\r\n            key={`${t.id}row`}\r\n          >\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n              title={t.name}\r\n            >\r\n              <div className={styles.taskListNameWrapper}>\r\n                <div\r\n                  className={\r\n                    expanderSymbol\r\n                      ? styles.taskListExpander\r\n                      : styles.taskListEmptyExpander\r\n                  }\r\n                  onClick={() => onExpanderClick(t)}\r\n                >\r\n                  {expanderSymbol}\r\n                </div>\r\n                <div>{t.name}</div>\r\n              </div>\r\n            </div>\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n            >\r\n              &nbsp;{toLocaleDateString(t.start, dateTimeOptions)}\r\n            </div>\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n            >\r\n              &nbsp;{toLocaleDateString(t.end, dateTimeOptions)}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport styles from \"./tooltip.module.css\";\r\n\r\nexport type TooltipProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n  svgContainerHeight: number;\r\n  svgContainerWidth: number;\r\n  svgWidth: number;\r\n  headerHeight: number;\r\n  taskListWidth: number;\r\n  scrollX: number;\r\n  scrollY: number;\r\n  rowHeight: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  TooltipContent: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n};\r\nexport const Tooltip: React.FC<TooltipProps> = ({\r\n  task,\r\n  rowHeight,\r\n  rtl,\r\n  svgContainerHeight,\r\n  svgContainerWidth,\r\n  scrollX,\r\n  scrollY,\r\n  arrowIndent,\r\n  fontSize,\r\n  fontFamily,\r\n  headerHeight,\r\n  taskListWidth,\r\n  TooltipContent,\r\n}) => {\r\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\r\n  const [relatedY, setRelatedY] = useState(0);\r\n  const [relatedX, setRelatedX] = useState(0);\r\n  useEffect(() => {\r\n    if (tooltipRef.current) {\r\n      const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\r\n      const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\r\n\r\n      let newRelatedY = task.index * rowHeight - scrollY + headerHeight;\r\n      let newRelatedX: number;\r\n      if (rtl) {\r\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\r\n        if (newRelatedX < 0) {\r\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\r\n        }\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        if (tooltipLeftmostPoint > svgContainerWidth) {\r\n          newRelatedX = svgContainerWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        }\r\n      } else {\r\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        const fullChartWidth = taskListWidth + svgContainerWidth;\r\n        if (tooltipLeftmostPoint > fullChartWidth) {\r\n          newRelatedX =\r\n            task.x1 +\r\n            taskListWidth -\r\n            arrowIndent * 1.5 -\r\n            scrollX -\r\n            tooltipWidth;\r\n        }\r\n        if (newRelatedX < taskListWidth) {\r\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        }\r\n      }\r\n\r\n      const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\r\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\r\n        newRelatedY = svgContainerHeight - tooltipHeight;\r\n      }\r\n      setRelatedY(newRelatedY);\r\n      setRelatedX(newRelatedX);\r\n    }\r\n  }, [\r\n    tooltipRef,\r\n    task,\r\n    arrowIndent,\r\n    scrollX,\r\n    scrollY,\r\n    headerHeight,\r\n    taskListWidth,\r\n    rowHeight,\r\n    svgContainerHeight,\r\n    svgContainerWidth,\r\n    rtl,\r\n  ]);\r\n\r\n  return (\r\n    <div\r\n      ref={tooltipRef}\r\n      className={\r\n        relatedX\r\n          ? styles.tooltipDetailsContainer\r\n          : styles.tooltipDetailsContainerHidden\r\n      }\r\n      style={{ left: relatedX, top: relatedY }}\r\n    >\r\n      <TooltipContent task={task} fontSize={fontSize} fontFamily={fontFamily} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const StandardTooltipContent: React.FC<{\r\n  task: Task;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n}> = ({ task, fontSize, fontFamily }) => {\r\n  const style = {\r\n    fontSize,\r\n    fontFamily,\r\n  };\r\n  return (\r\n    <div className={styles.tooltipDefaultContainer} style={style}>\r\n      <b style={{ fontSize: fontSize + 6 }}>{`${\r\n        task.name\r\n      }: ${task.start.getDate()}-${\r\n        task.start.getMonth() + 1\r\n      }-${task.start.getFullYear()} - ${task.end.getDate()}-${\r\n        task.end.getMonth() + 1\r\n      }-${task.end.getFullYear()}`}</b>\r\n      {task.end.getTime() - task.start.getTime() !== 0 && (\r\n        <p className={styles.tooltipDefaultContainerParagraph}>{`Duration: ${~~(\r\n          (task.end.getTime() - task.start.getTime()) /\r\n          (1000 * 60 * 60 * 24)\r\n        )} day(s)`}</p>\r\n      )}\r\n\r\n      <p className={styles.tooltipDefaultContainerParagraph}>\r\n        {!!task.progress && `Progress: ${task.progress} %`}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./vertical-scroll.module.css\";\r\n\r\nexport const VerticalScroll: React.FC<{\r\n  scroll: number;\r\n  ganttHeight: number;\r\n  ganttFullHeight: number;\r\n  headerHeight: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({\r\n  scroll,\r\n  ganttHeight,\r\n  ganttFullHeight,\r\n  headerHeight,\r\n  rtl,\r\n  onScroll,\r\n}) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: ganttHeight,\r\n        marginTop: headerHeight,\r\n        marginLeft: rtl ? \"\" : \"-1rem\",\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ height: ganttFullHeight, width: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nexport type TaskListProps = {\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  rowHeight: number;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  locale: string;\r\n  tasks: Task[];\r\n  taskListRef: React.RefObject<HTMLDivElement>;\r\n  horizontalContainerClass?: string;\r\n  selectedTask: BarTask | undefined;\r\n  setSelectedTask: (task: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n  TaskListHeader: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n};\r\n\r\nexport const TaskList: React.FC<TaskListProps> = ({\r\n  headerHeight,\r\n  fontFamily,\r\n  fontSize,\r\n  rowWidth,\r\n  rowHeight,\r\n  scrollY,\r\n  tasks,\r\n  selectedTask,\r\n  setSelectedTask,\r\n  onExpanderClick,\r\n  locale,\r\n  ganttHeight,\r\n  taskListRef,\r\n  horizontalContainerClass,\r\n  TaskListHeader,\r\n  TaskListTable,\r\n}) => {\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  const headerProps = {\r\n    headerHeight,\r\n    fontFamily,\r\n    fontSize,\r\n    rowWidth,\r\n  };\r\n  const selectedTaskId = selectedTask ? selectedTask.id : \"\";\r\n  const tableProps = {\r\n    rowHeight,\r\n    rowWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks,\r\n    locale,\r\n    selectedTaskId: selectedTaskId,\r\n    setSelectedTask,\r\n    onExpanderClick,\r\n  };\r\n\r\n  return (\r\n    <div ref={taskListRef}>\r\n      <TaskListHeader {...headerProps} />\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={horizontalContainerClass}\r\n        style={ganttHeight ? { height: ganttHeight } : {}}\r\n      >\r\n        <TaskListTable {...tableProps} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { addToDate } from \"../../helpers/date-helper\";\r\nimport styles from \"./grid.module.css\";\r\n\r\nexport type GridBodyProps = {\r\n  tasks: Task[];\r\n  dates: Date[];\r\n  svgWidth: number;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  todayColor: string;\r\n  rtl: boolean;\r\n};\r\nexport const GridBody: React.FC<GridBodyProps> = ({\r\n  tasks,\r\n  dates,\r\n  rowHeight,\r\n  svgWidth,\r\n  columnWidth,\r\n  todayColor,\r\n  rtl,\r\n}) => {\r\n  let y = 0;\r\n  const gridRows: ReactChild[] = [];\r\n  const rowLines: ReactChild[] = [\r\n    <line\r\n      key=\"RowLineFirst\"\r\n      x=\"0\"\r\n      y1={0}\r\n      x2={svgWidth}\r\n      y2={0}\r\n      className={styles.gridRowLine}\r\n    />,\r\n  ];\r\n  for (const task of tasks) {\r\n    gridRows.push(\r\n      <rect\r\n        key={\"Row\" + task.id}\r\n        x=\"0\"\r\n        y={y}\r\n        width={svgWidth}\r\n        height={rowHeight}\r\n        className={styles.gridRow}\r\n      />\r\n    );\r\n    rowLines.push(\r\n      <line\r\n        key={\"RowLine\" + task.id}\r\n        x=\"0\"\r\n        y1={y + rowHeight}\r\n        x2={svgWidth}\r\n        y2={y + rowHeight}\r\n        className={styles.gridRowLine}\r\n      />\r\n    );\r\n    y += rowHeight;\r\n  }\r\n\r\n  const now = new Date();\r\n  let tickX = 0;\r\n  const ticks: ReactChild[] = [];\r\n  let today: ReactChild = <rect />;\r\n  for (let i = 0; i < dates.length; i++) {\r\n    const date = dates[i];\r\n    ticks.push(\r\n      <line\r\n        key={date.getTime()}\r\n        x1={tickX}\r\n        y1={0}\r\n        x2={tickX}\r\n        y2={y}\r\n        className={styles.gridTick}\r\n      />\r\n    );\r\n    if (\r\n      (i + 1 !== dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        dates[i + 1].getTime() >= now.getTime()) ||\r\n      // if current date is last\r\n      (i !== 0 &&\r\n        i + 1 === dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        addToDate(\r\n          date,\r\n          date.getTime() - dates[i - 1].getTime(),\r\n          \"millisecond\"\r\n        ).getTime() >= now.getTime())\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX}\r\n          y={0}\r\n          width={columnWidth}\r\n          height={y}\r\n          fill={todayColor}\r\n        />\r\n      );\r\n    }\r\n    // rtl for today\r\n    if (\r\n      rtl &&\r\n      i + 1 !== dates.length &&\r\n      date.getTime() >= now.getTime() &&\r\n      dates[i + 1].getTime() < now.getTime()\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX + columnWidth}\r\n          y={0}\r\n          width={columnWidth}\r\n          height={y}\r\n          fill={todayColor}\r\n        />\r\n      );\r\n    }\r\n    tickX += columnWidth;\r\n  }\r\n  return (\r\n    <g className=\"gridBody\">\r\n      <g className=\"rows\">{gridRows}</g>\r\n      <g className=\"rowLines\">{rowLines}</g>\r\n      <g className=\"ticks\">{ticks}</g>\r\n      <g className=\"today\">{today}</g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { GridBody, GridBodyProps } from \"./grid-body\";\r\n\r\nexport type GridProps = GridBodyProps;\r\nexport const Grid: React.FC<GridProps> = props => {\r\n  return (\r\n    <g className=\"grid\">\r\n      <GridBody {...props} />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\ntype TopPartOfCalendarProps = {\r\n  value: string;\r\n  x1Line: number;\r\n  y1Line: number;\r\n  y2Line: number;\r\n  xText: number;\r\n  yText: number;\r\n};\r\n\r\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\r\n  value,\r\n  x1Line,\r\n  y1Line,\r\n  y2Line,\r\n  xText,\r\n  yText,\r\n}) => {\r\n  return (\r\n    <g className=\"calendarTop\">\r\n      <line\r\n        x1={x1Line}\r\n        y1={y1Line}\r\n        x2={x1Line}\r\n        y2={y2Line}\r\n        className={styles.calendarTopTick}\r\n        key={value + \"line\"}\r\n      />\r\n      <text\r\n        key={value + \"text\"}\r\n        y={yText}\r\n        x={xText}\r\n        className={styles.calendarTopText}\r\n      >\r\n        {value}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { ViewMode } from \"../../types/public-types\";\r\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\r\nimport {\r\n  getCachedDateTimeFormat,\r\n  getDaysInMonth,\r\n  getLocalDayOfWeek,\r\n  getLocaleMonth,\r\n  getWeekNumberISO8601,\r\n} from \"../../helpers/date-helper\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\nexport type CalendarProps = {\r\n  dateSetup: DateSetup;\r\n  locale: string;\r\n  viewMode: ViewMode;\r\n  rtl: boolean;\r\n  headerHeight: number;\r\n  columnWidth: number;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n};\r\n\r\nexport const Calendar: React.FC<CalendarProps> = ({\r\n  dateSetup,\r\n  locale,\r\n  viewMode,\r\n  rtl,\r\n  headerHeight,\r\n  columnWidth,\r\n  fontFamily,\r\n  fontSize,\r\n}) => {\r\n  const getCalendarValuesForYear = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      const bottomValue = date.getFullYear();\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getFullYear() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getFullYear()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={headerHeight}\r\n            xText={xText}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForQuarterYear = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      // const bottomValue = getLocaleMonth(date, locale);\r\n      const quarter = \"Q\" + Math.floor((date.getMonth() + 3) / 3);\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {quarter}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getMonth()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={Math.abs(xText)}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForMonth = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      const bottomValue = getLocaleMonth(date, locale);\r\n      bottomValues.push(\r\n        <text\r\n          key={bottomValue + date.getFullYear()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getMonth()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={xText}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForWeek = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    let weeksCount: number = 1;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = dates.length - 1; i >= 0; i--) {\r\n      const date = dates[i];\r\n      let topValue = \"\";\r\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\r\n        // top\r\n        topValue = `${getLocaleMonth(date, locale)}, ${date.getFullYear()}`;\r\n      }\r\n      // bottom\r\n      const bottomValue = `W${getWeekNumberISO8601(date)}`;\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n\r\n      if (topValue) {\r\n        // if last day is new month\r\n        if (i !== dates.length - 1) {\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue}\r\n              value={topValue}\r\n              x1Line={columnWidth * i + weeksCount * columnWidth}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={columnWidth * i + columnWidth * weeksCount * 0.5}\r\n              yText={topDefaultHeight * 0.9}\r\n            />\r\n          );\r\n        }\r\n        weeksCount = 0;\r\n      }\r\n      weeksCount++;\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForDay = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = `${getLocalDayOfWeek(date, locale, \"short\")}, ${date\r\n        .getDate()\r\n        .toString()}`;\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i + 1 !== dates.length &&\r\n        date.getMonth() !== dates[i + 1].getMonth()\r\n      ) {\r\n        const topValue = getLocaleMonth(date, locale);\r\n\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * (i + 1)}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={\r\n              columnWidth * (i + 1) -\r\n              getDaysInMonth(date.getMonth(), date.getFullYear()) *\r\n                columnWidth *\r\n                0.5\r\n            }\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForPartOfDay = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = getCachedDateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\r\n        const topValue = `${getLocalDayOfWeek(\r\n          date,\r\n          locale,\r\n          \"short\"\r\n        )}, ${date.getDate()} ${getLocaleMonth(date, locale)}`;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i + ticks * columnWidth}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * i + ticks * columnWidth * 0.5}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForHour = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = getCachedDateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i !== 0 && date.getDate() !== dates[i - 1].getDate()) {\r\n        const displayDate = dates[i - 1];\r\n        const topValue = `${getLocalDayOfWeek(\r\n          displayDate,\r\n          locale,\r\n          \"long\"\r\n        )}, ${displayDate.getDate()} ${getLocaleMonth(displayDate, locale)}`;\r\n        const topPosition = (date.getHours() - 24) / 2;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + displayDate.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * (i + topPosition)}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  let topValues: ReactChild[] = [];\r\n  let bottomValues: ReactChild[] = [];\r\n  switch (dateSetup.viewMode) {\r\n    case ViewMode.Year:\r\n      [topValues, bottomValues] = getCalendarValuesForYear();\r\n      break;\r\n    case ViewMode.QuarterYear:\r\n      [topValues, bottomValues] = getCalendarValuesForQuarterYear();\r\n      break;\r\n    case ViewMode.Month:\r\n      [topValues, bottomValues] = getCalendarValuesForMonth();\r\n      break;\r\n    case ViewMode.Week:\r\n      [topValues, bottomValues] = getCalendarValuesForWeek();\r\n      break;\r\n    case ViewMode.Day:\r\n      [topValues, bottomValues] = getCalendarValuesForDay();\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n    case ViewMode.HalfDay:\r\n      [topValues, bottomValues] = getCalendarValuesForPartOfDay();\r\n      break;\r\n    case ViewMode.Hour:\r\n      [topValues, bottomValues] = getCalendarValuesForHour();\r\n  }\r\n  return (\r\n    <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\r\n      <rect\r\n        x={0}\r\n        y={0}\r\n        width={columnWidth * dateSetup.dates.length}\r\n        height={headerHeight}\r\n        className={styles.calendarHeader}\r\n      />\r\n      {bottomValues} {topValues}\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\n\r\ntype ArrowProps = {\r\n  taskFrom: BarTask;\r\n  taskTo: BarTask;\r\n  rowHeight: number;\r\n  taskHeight: number;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n};\r\nexport const Arrow: React.FC<ArrowProps> = ({\r\n  taskFrom,\r\n  taskTo,\r\n  rowHeight,\r\n  taskHeight,\r\n  arrowIndent,\r\n  rtl,\r\n}) => {\r\n  let path: string;\r\n  let trianglePoints: string;\r\n  if (rtl) {\r\n    [path, trianglePoints] = drownPathAndTriangleRTL(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  } else {\r\n    [path, trianglePoints] = drownPathAndTriangle(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  }\r\n\r\n  return (\r\n    <g className=\"arrow\">\r\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\r\n      <polygon points={trianglePoints} />\r\n    </g>\r\n  );\r\n};\r\n\r\nconst drownPathAndTriangle = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x1 ? \"\" : `H ${taskTo.x1 - arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x1\r\n      ? arrowIndent\r\n      : taskTo.x1 - taskFrom.x2 - arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \r\n  h ${arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \r\n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \r\n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n\r\nconst drownPathAndTriangleRTL = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x2 ? \"\" : `H ${taskTo.x2 + arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x2\r\n      ? -arrowIndent\r\n      : taskTo.x2 - taskFrom.x1 + arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x1} ${taskFrom.y + taskHeight / 2} \r\n  h ${-arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x2},${taskToEndPosition} \r\n  ${taskTo.x2 + 5},${taskToEndPosition + 5} \r\n  ${taskTo.x2 + 5},${taskToEndPosition - 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n","import { Task } from \"../types/public-types\";\r\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\r\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\r\n\r\nexport const convertToBarTasks = (\r\n  tasks: Task[],\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n) => {\r\n  let barTasks = tasks.map((t, i) => {\r\n    return convertToBarTask(\r\n      t,\r\n      i,\r\n      dates,\r\n      columnWidth,\r\n      rowHeight,\r\n      taskHeight,\r\n      barCornerRadius,\r\n      handleWidth,\r\n      rtl,\r\n      barProgressColor,\r\n      barProgressSelectedColor,\r\n      barBackgroundColor,\r\n      barBackgroundSelectedColor,\r\n      projectProgressColor,\r\n      projectProgressSelectedColor,\r\n      projectBackgroundColor,\r\n      projectBackgroundSelectedColor,\r\n      milestoneBackgroundColor,\r\n      milestoneBackgroundSelectedColor\r\n    );\r\n  });\r\n\r\n  // set dependencies\r\n  barTasks = barTasks.map(task => {\r\n    const dependencies = task.dependencies || [];\r\n    for (let j = 0; j < dependencies.length; j++) {\r\n      const dependence = barTasks.findIndex(\r\n        value => value.id === dependencies[j]\r\n      );\r\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\r\n    }\r\n    return task;\r\n  });\r\n\r\n  return barTasks;\r\n};\r\n\r\nconst convertToBarTask = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let barTask: BarTask;\r\n  switch (task.type) {\r\n    case \"milestone\":\r\n      barTask = convertToMilestone(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      );\r\n      break;\r\n    case \"project\":\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor\r\n      );\r\n      break;\r\n    default:\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor\r\n      );\r\n      break;\r\n  }\r\n  return barTask;\r\n};\r\n\r\nconst convertToBar = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let x1: number;\r\n  let x2: number;\r\n  if (rtl) {\r\n    x2 = taskXCoordinateRTL(task.start, dates, columnWidth);\r\n    x1 = taskXCoordinateRTL(task.end, dates, columnWidth);\r\n  } else {\r\n    x1 = taskXCoordinate(task.start, dates, columnWidth);\r\n    x2 = taskXCoordinate(task.end, dates, columnWidth);\r\n  }\r\n  let typeInternal: TaskTypeInternal = task.type;\r\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\r\n    typeInternal = \"smalltask\";\r\n    x2 = x1 + handleWidth * 2;\r\n  }\r\n\r\n  const [progressWidth, progressX] = progressWithByParams(\r\n    x1,\r\n    x2,\r\n    task.progress,\r\n    rtl\r\n  );\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n  const hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\r\n\r\n  const styles = {\r\n    backgroundColor: barBackgroundColor,\r\n    backgroundSelectedColor: barBackgroundSelectedColor,\r\n    progressColor: barProgressColor,\r\n    progressSelectedColor: barProgressSelectedColor,\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    typeInternal,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX,\r\n    progressWidth,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    hideChildren,\r\n    height: taskHeight,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst convertToMilestone = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  const x = taskXCoordinate(task.start, dates, columnWidth);\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n\r\n  const x1 = x - taskHeight * 0.5;\r\n  const x2 = x + taskHeight * 0.5;\r\n\r\n  const rotatedHeight = taskHeight / 1.414;\r\n  const styles = {\r\n    backgroundColor: milestoneBackgroundColor,\r\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\r\n    progressColor: \"\",\r\n    progressSelectedColor: \"\",\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    end: task.start,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX: 0,\r\n    progressWidth: 0,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    typeInternal: task.type,\r\n    progress: 0,\r\n    height: rotatedHeight,\r\n    hideChildren: undefined,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst taskXCoordinate = (xDate: Date, dates: Date[], columnWidth: number) => {\r\n  const index = dates.findIndex(d => d.getTime() >= xDate.getTime()) - 1;\r\n\r\n  const remainderMillis = xDate.getTime() - dates[index].getTime();\r\n  const percentOfInterval =\r\n    remainderMillis / (dates[index + 1].getTime() - dates[index].getTime());\r\n  const x = index * columnWidth + percentOfInterval * columnWidth;\r\n  return x;\r\n};\r\nconst taskXCoordinateRTL = (\r\n  xDate: Date,\r\n  dates: Date[],\r\n  columnWidth: number\r\n) => {\r\n  let x = taskXCoordinate(xDate, dates, columnWidth);\r\n  x += columnWidth;\r\n  return x;\r\n};\r\nconst taskYCoordinate = (\r\n  index: number,\r\n  rowHeight: number,\r\n  taskHeight: number\r\n) => {\r\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\r\n  return y;\r\n};\r\n\r\nexport const progressWithByParams = (\r\n  taskX1: number,\r\n  taskX2: number,\r\n  progress: number,\r\n  rtl: boolean\r\n) => {\r\n  const progressWidth = (taskX2 - taskX1) * progress * 0.01;\r\n  let progressX: number;\r\n  if (rtl) {\r\n    progressX = taskX2 - progressWidth;\r\n  } else {\r\n    progressX = taskX1;\r\n  }\r\n  return [progressWidth, progressX];\r\n};\r\n\r\nexport const progressByProgressWidth = (\r\n  progressWidth: number,\r\n  barTask: BarTask\r\n) => {\r\n  const barWidth = barTask.x2 - barTask.x1;\r\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\r\n  if (progressPercent >= 100) return 100;\r\n  else if (progressPercent <= 0) return 0;\r\n  else return progressPercent;\r\n};\r\n\r\nconst progressByX = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 100;\r\n  else if (x <= task.x1) return 0;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\nconst progressByXRTL = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 0;\r\n  else if (x <= task.x1) return 100;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((task.x2 - x) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\n\r\nexport const getProgressPoint = (\r\n  progressX: number,\r\n  taskY: number,\r\n  taskHeight: number\r\n) => {\r\n  const point = [\r\n    progressX - 5,\r\n    taskY + taskHeight,\r\n    progressX + 5,\r\n    taskY + taskHeight,\r\n    progressX,\r\n    taskY + taskHeight - 8.66,\r\n  ];\r\n  return point.join(\",\");\r\n};\r\n\r\nconst startByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x >= task.x2 - task.handleWidth * 2) {\r\n    x = task.x2 - task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x1 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst endByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x <= task.x1 + task.handleWidth * 2) {\r\n    x = task.x1 + task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x2) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x2 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst moveByX = (x: number, xStep: number, task: BarTask) => {\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX1 = task.x1 + additionalXValue;\r\n  const newX2 = newX1 + task.x2 - task.x1;\r\n  return [newX1, newX2];\r\n};\r\n\r\nconst dateByX = (\r\n  x: number,\r\n  taskX: number,\r\n  taskDate: Date,\r\n  xStep: number,\r\n  timeStep: number\r\n) => {\r\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\r\n  newDate = new Date(\r\n    newDate.getTime() +\r\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\r\n  );\r\n  return newDate;\r\n};\r\n\r\n/**\r\n * Method handles event in real time(mousemove) and on finish(mouseup)\r\n */\r\nexport const handleTaskBySVGMouseEvent = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  let result: { isChanged: boolean; changedTask: BarTask };\r\n  switch (selectedTask.type) {\r\n    case \"milestone\":\r\n      result = handleTaskBySVGMouseEventForMilestone(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta\r\n      );\r\n      break;\r\n    default:\r\n      result = handleTaskBySVGMouseEventForBar(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n      break;\r\n  }\r\n  return result;\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForBar = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"progress\":\r\n      if (rtl) {\r\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\r\n      } else {\r\n        changedTask.progress = progressByX(svgX, selectedTask);\r\n      }\r\n      isChanged = changedTask.progress !== selectedTask.progress;\r\n      if (isChanged) {\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    case \"start\": {\r\n      const newX1 = startByX(svgX, xStep, selectedTask);\r\n      changedTask.x1 = newX1;\r\n      isChanged = changedTask.x1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.end = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.start = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"end\": {\r\n      const newX2 = endByX(svgX, xStep, selectedTask);\r\n      changedTask.x2 = newX2;\r\n      isChanged = changedTask.x2 !== selectedTask.x2;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.start = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.end = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = dateByX(\r\n          newMoveX2,\r\n          selectedTask.x2,\r\n          selectedTask.end,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForMilestone = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = changedTask.start;\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n","import { BarTask } from \"../types/bar-task\";\r\nimport { Task } from \"../types/public-types\";\r\n\r\nexport function isKeyboardEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.KeyboardEvent {\r\n  return (event as React.KeyboardEvent).key !== undefined;\r\n}\r\n\r\nexport function isMouseEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.MouseEvent {\r\n  return (event as React.MouseEvent).clientX !== undefined;\r\n}\r\n\r\nexport function isBarTask(task: Task | BarTask): task is BarTask {\r\n  return (task as BarTask).x1 !== undefined;\r\n}\r\n\r\nexport function removeHiddenTasks(tasks: Task[]) {\r\n  const groupedTasks = tasks.filter(\r\n    t => t.hideChildren && t.type === \"project\"\r\n  );\r\n  if (groupedTasks.length > 0) {\r\n    for (let i = 0; groupedTasks.length > i; i++) {\r\n      const groupedTask = groupedTasks[i];\r\n      const children = getChildren(tasks, groupedTask);\r\n      tasks = tasks.filter(t => children.indexOf(t) === -1);\r\n    }\r\n  }\r\n  return tasks;\r\n}\r\n\r\nfunction getChildren(taskList: Task[], task: Task) {\r\n  let tasks: Task[] = [];\r\n  if (task.type !== \"project\") {\r\n    tasks = taskList.filter(\r\n      t => t.dependencies && t.dependencies.indexOf(task.id) !== -1\r\n    );\r\n  } else {\r\n    tasks = taskList.filter(t => t.project && t.project === task.id);\r\n  }\r\n  var taskChildren: Task[] = [];\r\n  tasks.forEach(t => {\r\n    taskChildren.push(...getChildren(taskList, t));\r\n  })\r\n  tasks = tasks.concat(tasks, taskChildren);\r\n  return tasks;\r\n}\r\n\r\nexport const sortTasks = (taskA: Task, taskB: Task) => {\r\n  const orderA = taskA.displayOrder || Number.MAX_VALUE;\r\n  const orderB = taskB.displayOrder || Number.MAX_VALUE;\r\n  if (orderA > orderB) {\r\n    return 1;\r\n  } else if (orderA < orderB) {\r\n    return -1;\r\n  } else {\r\n    return 0;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport style from \"./bar.module.css\";\r\n\r\ntype BarDisplayProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  isSelected: boolean;\r\n  /* progress start point */\r\n  progressX: number;\r\n  progressWidth: number;\r\n  barCornerRadius: number;\r\n  styles: {\r\n    backgroundColor: string;\r\n    backgroundSelectedColor: string;\r\n    progressColor: string;\r\n    progressSelectedColor: string;\r\n  };\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  isSelected,\r\n  progressX,\r\n  progressWidth,\r\n  barCornerRadius,\r\n  styles,\r\n  onMouseDown,\r\n}) => {\r\n  const getProcessColor = () => {\r\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\r\n  };\r\n\r\n  const getBarColor = () => {\r\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\r\n  };\r\n\r\n  return (\r\n    <g onMouseDown={onMouseDown}>\r\n      <rect\r\n        x={x}\r\n        width={width}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={getBarColor()}\r\n        className={style.barBackground}\r\n      />\r\n      <rect\r\n        x={progressX}\r\n        width={progressWidth}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={getProcessColor()}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarDateHandleProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  barCornerRadius: number;\r\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>) => void;\r\n};\r\nexport const BarDateHandle: React.FC<BarDateHandleProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  barCornerRadius,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <rect\r\n      x={x}\r\n      y={y}\r\n      width={width}\r\n      height={height}\r\n      className={styles.barHandle}\r\n      ry={barCornerRadius}\r\n      rx={barCornerRadius}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarProgressHandleProps = {\r\n  progressPoint: string;\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\r\n  progressPoint,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <polygon\r\n      className={styles.barHandle}\r\n      points={progressPoint}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarDateHandle } from \"./bar-date-handle\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\n\r\nexport const Bar: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  rtl,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const progressPoint = getProgressPoint(\r\n    +!rtl * task.progressWidth + task.progressX,\r\n    task.y,\r\n    task.height\r\n  );\r\n  const handleHeight = task.height - 2;\r\n  return (\r\n    <g className={styles.barWrapper} tabIndex={0}>\r\n      <BarDisplay\r\n        x={task.x1}\r\n        y={task.y}\r\n        width={task.x2 - task.x1}\r\n        height={task.height}\r\n        progressX={task.progressX}\r\n        progressWidth={task.progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={task.styles}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      <g className=\"handleGroup\">\r\n        {isDateChangeable && (\r\n          <g>\r\n            {/* left */}\r\n            <BarDateHandle\r\n              x={task.x1 + 1}\r\n              y={task.y + 1}\r\n              width={task.handleWidth}\r\n              height={handleHeight}\r\n              barCornerRadius={task.barCornerRadius}\r\n              onMouseDown={e => {\r\n                onEventStart(\"start\", task, e);\r\n              }}\r\n            />\r\n            {/* right */}\r\n            <BarDateHandle\r\n              x={task.x2 - task.handleWidth - 1}\r\n              y={task.y + 1}\r\n              width={task.handleWidth}\r\n              height={handleHeight}\r\n              barCornerRadius={task.barCornerRadius}\r\n              onMouseDown={e => {\r\n                onEventStart(\"end\", task, e);\r\n              }}\r\n            />\r\n          </g>\r\n        )}\r\n        {isProgressChangeable && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\n\r\nexport const BarSmall: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const progressPoint = getProgressPoint(\r\n    task.progressWidth + task.x1,\r\n    task.y,\r\n    task.height\r\n  );\r\n  return (\r\n    <g className={styles.barWrapper} tabIndex={0}>\r\n      <BarDisplay\r\n        x={task.x1}\r\n        y={task.y}\r\n        width={task.x2 - task.x1}\r\n        height={task.height}\r\n        progressX={task.progressX}\r\n        progressWidth={task.progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={task.styles}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      <g className=\"handleGroup\">\r\n        {isProgressChangeable && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./milestone.module.css\";\r\n\r\nexport const Milestone: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const transform = `rotate(45 ${task.x1 + task.height * 0.356} \r\n    ${task.y + task.height * 0.85})`;\r\n  const getBarColor = () => {\r\n    return isSelected\r\n      ? task.styles.backgroundSelectedColor\r\n      : task.styles.backgroundColor;\r\n  };\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.milestoneWrapper}>\r\n      <rect\r\n        fill={getBarColor()}\r\n        x={task.x1}\r\n        width={task.height}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        transform={transform}\r\n        className={styles.milestoneBackground}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./project.module.css\";\r\n\r\nexport const Project: React.FC<TaskItemProps> = ({ task, isSelected }) => {\r\n  const barColor = isSelected\r\n    ? task.styles.backgroundSelectedColor\r\n    : task.styles.backgroundColor;\r\n  const processColor = isSelected\r\n    ? task.styles.progressSelectedColor\r\n    : task.styles.progressColor;\r\n  const projectWith = task.x2 - task.x1;\r\n\r\n  const projectLeftTriangle = [\r\n    task.x1,\r\n    task.y + task.height / 2 - 1,\r\n    task.x1,\r\n    task.y + task.height,\r\n    task.x1 + 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n  const projectRightTriangle = [\r\n    task.x2,\r\n    task.y + task.height / 2 - 1,\r\n    task.x2,\r\n    task.y + task.height,\r\n    task.x2 - 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.projectWrapper}>\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectBackground}\r\n      />\r\n      <rect\r\n        x={task.progressX}\r\n        width={task.progressWidth}\r\n        y={task.y}\r\n        height={task.height}\r\n        ry={task.barCornerRadius}\r\n        rx={task.barCornerRadius}\r\n        fill={processColor}\r\n      />\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height / 2}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectTop}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectLeftTriangle}\r\n        fill={barColor}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectRightTriangle}\r\n        fill={barColor}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\r\nimport { Bar } from \"./bar/bar\";\r\nimport { BarSmall } from \"./bar/bar-small\";\r\nimport { Milestone } from \"./milestone/milestone\";\r\nimport { Project } from \"./project/project\";\r\nimport style from \"./task-list.module.css\";\r\n\r\nexport type TaskItemProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  taskHeight: number;\r\n  isProgressChangeable: boolean;\r\n  isDateChangeable: boolean;\r\n  isDelete: boolean;\r\n  isSelected: boolean;\r\n  rtl: boolean;\r\n  onEventStart: (\r\n    action: GanttContentMoveAction,\r\n    selectedTask: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => any;\r\n};\r\n\r\nexport const TaskItem: React.FC<TaskItemProps> = props => {\r\n  const {\r\n    task,\r\n    arrowIndent,\r\n    isDelete,\r\n    taskHeight,\r\n    isSelected,\r\n    rtl,\r\n    onEventStart,\r\n  } = {\r\n    ...props,\r\n  };\r\n  const textRef = useRef<SVGTextElement>(null);\r\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\r\n  const [isTextInside, setIsTextInside] = useState(true);\r\n\r\n  useEffect(() => {\r\n    switch (task.typeInternal) {\r\n      case \"milestone\":\r\n        setTaskItem(<Milestone {...props} />);\r\n        break;\r\n      case \"project\":\r\n        setTaskItem(<Project {...props} />);\r\n        break;\r\n      case \"smalltask\":\r\n        setTaskItem(<BarSmall {...props} />);\r\n        break;\r\n      default:\r\n        setTaskItem(<Bar {...props} />);\r\n        break;\r\n    }\r\n  }, [task, isSelected]);\r\n\r\n  useEffect(() => {\r\n    if (textRef.current) {\r\n      setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\r\n    }\r\n  }, [textRef, task]);\r\n\r\n  const getX = () => {\r\n    const width = task.x2 - task.x1;\r\n    const hasChild = task.barChildren.length > 0;\r\n    if (isTextInside) {\r\n      return task.x1 + width * 0.5;\r\n    }\r\n    if (rtl && textRef.current) {\r\n      return (\r\n        task.x1 -\r\n        textRef.current.getBBox().width -\r\n        arrowIndent * +hasChild -\r\n        arrowIndent * 0.2\r\n      );\r\n    } else {\r\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <g\r\n      onKeyDown={e => {\r\n        switch (e.key) {\r\n          case \"Delete\": {\r\n            if (isDelete) onEventStart(\"delete\", task, e);\r\n            break;\r\n          }\r\n        }\r\n        e.stopPropagation();\r\n      }}\r\n      onMouseEnter={e => {\r\n        onEventStart(\"mouseenter\", task, e);\r\n      }}\r\n      onMouseLeave={e => {\r\n        onEventStart(\"mouseleave\", task, e);\r\n      }}\r\n      onDoubleClick={e => {\r\n        onEventStart(\"dblclick\", task, e);\r\n      }}\r\n      onClick={e => {\r\n        onEventStart(\"click\", task, e);\r\n      }}\r\n      onFocus={() => {\r\n        onEventStart(\"select\", task);\r\n      }}\r\n    >\r\n      {taskItem}\r\n      <text\r\n        x={getX()}\r\n        y={task.y + taskHeight * 0.5}\r\n        className={\r\n          isTextInside\r\n            ? style.barLabel\r\n            : style.barLabel && style.barLabelOutside\r\n        }\r\n        ref={textRef}\r\n      >\r\n        {task.name}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { EventOption } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Arrow } from \"../other/arrow\";\r\nimport { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\r\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\r\nimport { TaskItem } from \"../task-item/task-item\";\r\nimport {\r\n  BarMoveAction,\r\n  GanttContentMoveAction,\r\n  GanttEvent,\r\n} from \"../../types/gantt-task-actions\";\r\n\r\nexport type TaskGanttContentProps = {\r\n  tasks: BarTask[];\r\n  dates: Date[];\r\n  ganttEvent: GanttEvent;\r\n  selectedTask: BarTask | undefined;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  timeStep: number;\r\n  svg?: React.RefObject<SVGSVGElement>;\r\n  svgWidth: number;\r\n  taskHeight: number;\r\n  arrowColor: string;\r\n  arrowIndent: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  rtl: boolean;\r\n  setGanttEvent: (value: GanttEvent) => void;\r\n  setFailedTask: (value: BarTask | null) => void;\r\n  setSelectedTask: (taskId: string) => void;\r\n} & EventOption;\r\n\r\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = ({\r\n  tasks,\r\n  dates,\r\n  ganttEvent,\r\n  selectedTask,\r\n  rowHeight,\r\n  columnWidth,\r\n  timeStep,\r\n  svg,\r\n  taskHeight,\r\n  arrowColor,\r\n  arrowIndent,\r\n  fontFamily,\r\n  fontSize,\r\n  rtl,\r\n  setGanttEvent,\r\n  setFailedTask,\r\n  setSelectedTask,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onClick,\r\n  onDelete,\r\n}) => {\r\n  const point = svg?.current?.createSVGPoint();\r\n  const [xStep, setXStep] = useState(0);\r\n  const [initEventX1Delta, setInitEventX1Delta] = useState(0);\r\n  const [isMoving, setIsMoving] = useState(false);\r\n\r\n  // create xStep\r\n  useEffect(() => {\r\n    const dateDelta =\r\n      dates[1].getTime() -\r\n      dates[0].getTime() -\r\n      dates[1].getTimezoneOffset() * 60 * 1000 +\r\n      dates[0].getTimezoneOffset() * 60 * 1000;\r\n    const newXStep = (timeStep * columnWidth) / dateDelta;\r\n    setXStep(newXStep);\r\n  }, [columnWidth, dates, timeStep]);\r\n\r\n  useEffect(() => {\r\n    const handleMouseMove = async (event: MouseEvent) => {\r\n      if (!ganttEvent.changedTask || !point || !svg?.current) return;\r\n      event.preventDefault();\r\n\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg?.current.getScreenCTM()?.inverse()\r\n      );\r\n\r\n      const { isChanged, changedTask } = handleTaskBySVGMouseEvent(\r\n        cursor.x,\r\n        ganttEvent.action as BarMoveAction,\r\n        ganttEvent.changedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n      if (isChanged) {\r\n        setGanttEvent({ action: ganttEvent.action, changedTask });\r\n      }\r\n    };\r\n\r\n    const handleMouseUp = async (event: MouseEvent) => {\r\n      const { action, originalSelectedTask, changedTask } = ganttEvent;\r\n      if (!changedTask || !point || !svg?.current || !originalSelectedTask)\r\n        return;\r\n      event.preventDefault();\r\n\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg?.current.getScreenCTM()?.inverse()\r\n      );\r\n      const { changedTask: newChangedTask } = handleTaskBySVGMouseEvent(\r\n        cursor.x,\r\n        action as BarMoveAction,\r\n        changedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n\r\n      const isNotLikeOriginal =\r\n        originalSelectedTask.start !== newChangedTask.start ||\r\n        originalSelectedTask.end !== newChangedTask.end ||\r\n        originalSelectedTask.progress !== newChangedTask.progress;\r\n\r\n      // remove listeners\r\n      svg.current.removeEventListener(\"mousemove\", handleMouseMove);\r\n      svg.current.removeEventListener(\"mouseup\", handleMouseUp);\r\n      setGanttEvent({ action: \"\" });\r\n      setIsMoving(false);\r\n\r\n      // custom operation start\r\n      let operationSuccess = true;\r\n      if (\r\n        (action === \"move\" || action === \"end\" || action === \"start\") &&\r\n        onDateChange &&\r\n        isNotLikeOriginal\r\n      ) {\r\n        try {\r\n          const result = await onDateChange(\r\n            newChangedTask,\r\n            newChangedTask.barChildren\r\n          );\r\n          if (result !== undefined) {\r\n            operationSuccess = result;\r\n          }\r\n        } catch (error) {\r\n          operationSuccess = false;\r\n        }\r\n      } else if (onProgressChange && isNotLikeOriginal) {\r\n        try {\r\n          const result = await onProgressChange(\r\n            newChangedTask,\r\n            newChangedTask.barChildren\r\n          );\r\n          if (result !== undefined) {\r\n            operationSuccess = result;\r\n          }\r\n        } catch (error) {\r\n          operationSuccess = false;\r\n        }\r\n      }\r\n\r\n      // If operation is failed - return old state\r\n      if (!operationSuccess) {\r\n        setFailedTask(originalSelectedTask);\r\n      }\r\n    };\r\n\r\n    if (\r\n      !isMoving &&\r\n      (ganttEvent.action === \"move\" ||\r\n        ganttEvent.action === \"end\" ||\r\n        ganttEvent.action === \"start\" ||\r\n        ganttEvent.action === \"progress\") &&\r\n      svg?.current\r\n    ) {\r\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\r\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\r\n      setIsMoving(true);\r\n    }\r\n  }, [\r\n    ganttEvent,\r\n    xStep,\r\n    initEventX1Delta,\r\n    onProgressChange,\r\n    timeStep,\r\n    onDateChange,\r\n    svg,\r\n    isMoving,\r\n    point,\r\n    rtl,\r\n    setFailedTask,\r\n    setGanttEvent,\r\n  ]);\r\n\r\n  /**\r\n   * Method is Start point of task change\r\n   */\r\n  const handleBarEventStart = async (\r\n    action: GanttContentMoveAction,\r\n    task: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => {\r\n    if (!event) {\r\n      if (action === \"select\") {\r\n        setSelectedTask(task.id);\r\n      }\r\n    }\r\n    // Keyboard events\r\n    else if (isKeyboardEvent(event)) {\r\n      if (action === \"delete\") {\r\n        if (onDelete) {\r\n          try {\r\n            const result = await onDelete(task);\r\n            if (result !== undefined && result) {\r\n              setGanttEvent({ action, changedTask: task });\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error on Delete. \" + error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Mouse Events\r\n    else if (action === \"mouseenter\") {\r\n      if (!ganttEvent.action) {\r\n        setGanttEvent({\r\n          action,\r\n          changedTask: task,\r\n          originalSelectedTask: task,\r\n        });\r\n      }\r\n    } else if (action === \"mouseleave\") {\r\n      if (ganttEvent.action === \"mouseenter\") {\r\n        setGanttEvent({ action: \"\" });\r\n      }\r\n    } else if (action === \"dblclick\") {\r\n      !!onDoubleClick && onDoubleClick(task);\r\n    } else if (action === \"click\") {\r\n      !!onClick && onClick(task);\r\n    }\r\n    // Change task event start\r\n    else if (action === \"move\") {\r\n      if (!svg?.current || !point) return;\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg.current.getScreenCTM()?.inverse()\r\n      );\r\n      setInitEventX1Delta(cursor.x - task.x1);\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n    } else {\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <g className=\"content\">\r\n      <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\r\n        {tasks.map(task => {\r\n          return task.barChildren.map(child => {\r\n            return (\r\n              <Arrow\r\n                key={`Arrow from ${task.id} to ${tasks[child.index].id}`}\r\n                taskFrom={task}\r\n                taskTo={tasks[child.index]}\r\n                rowHeight={rowHeight}\r\n                taskHeight={taskHeight}\r\n                arrowIndent={arrowIndent}\r\n                rtl={rtl}\r\n              />\r\n            );\r\n          });\r\n        })}\r\n      </g>\r\n      <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\r\n        {tasks.map(task => {\r\n          return (\r\n            <TaskItem\r\n              task={task}\r\n              arrowIndent={arrowIndent}\r\n              taskHeight={taskHeight}\r\n              isProgressChangeable={!!onProgressChange && !task.isDisabled}\r\n              isDateChangeable={!!onDateChange && !task.isDisabled}\r\n              isDelete={!task.isDisabled}\r\n              onEventStart={handleBarEventStart}\r\n              key={task.id}\r\n              isSelected={!!selectedTask && task.id === selectedTask.id}\r\n              rtl={rtl}\r\n            />\r\n          );\r\n        })}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { GridProps, Grid } from \"../grid/grid\";\r\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\r\nimport styles from \"./gantt.module.css\";\r\n\r\nexport type TaskGanttProps = {\r\n  gridProps: GridProps;\r\n  calendarProps: CalendarProps;\r\n  barProps: TaskGanttContentProps;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  scrollX: number;\r\n};\r\nexport const TaskGantt: React.FC<TaskGanttProps> = ({\r\n  gridProps,\r\n  calendarProps,\r\n  barProps,\r\n  ganttHeight,\r\n  scrollY,\r\n  scrollX,\r\n}) => {\r\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  const verticalGanttContainerRef = useRef<HTMLDivElement>(null);\r\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\r\n\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  useEffect(() => {\r\n    if (verticalGanttContainerRef.current) {\r\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\r\n    }\r\n  }, [scrollX]);\r\n\r\n  return (\r\n    <div\r\n      className={styles.ganttVerticalContainer}\r\n      ref={verticalGanttContainerRef}\r\n      dir=\"ltr\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={gridProps.svgWidth}\r\n        height={calendarProps.headerHeight}\r\n        fontFamily={barProps.fontFamily}\r\n      >\r\n        <Calendar {...calendarProps} />\r\n      </svg>\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={styles.horizontalContainer}\r\n        style={\r\n          ganttHeight\r\n            ? { height: ganttHeight, width: gridProps.svgWidth }\r\n            : { width: gridProps.svgWidth }\r\n        }\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width={gridProps.svgWidth}\r\n          height={barProps.rowHeight * barProps.tasks.length}\r\n          fontFamily={barProps.fontFamily}\r\n          ref={ganttSVGRef}\r\n        >\r\n          <Grid {...gridProps} />\r\n          <TaskGanttContent {...newBarProps} />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./horizontal-scroll.module.css\";\r\n\r\nexport const HorizontalScroll: React.FC<{\r\n  scroll: number;\r\n  svgWidth: number;\r\n  taskListWidth: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({ scroll, svgWidth, taskListWidth, rtl, onScroll }) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollLeft = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      dir=\"ltr\"\r\n      style={{\r\n        margin: rtl\r\n          ? `0px ${taskListWidth}px 0px 0px`\r\n          : `0px 0px 0px ${taskListWidth}px`,\r\n      }}\r\n      className={styles.scrollWrapper}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ width: svgWidth }} className={styles.scroll} />\r\n    </div>\r\n  );\r\n};\r\n","import React, {\r\n  useState,\r\n  SyntheticEvent,\r\n  useRef,\r\n  useEffect,\r\n  useMemo,\r\n} from \"react\";\r\nimport { ViewMode, GanttProps, Task } from \"../../types/public-types\";\r\nimport { GridProps } from \"../grid/grid\";\r\nimport { ganttDateRange, seedDates } from \"../../helpers/date-helper\";\r\nimport { CalendarProps } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\r\nimport { TaskListHeaderDefault } from \"../task-list/task-list-header\";\r\nimport { TaskListTableDefault } from \"../task-list/task-list-table\";\r\nimport { StandardTooltipContent, Tooltip } from \"../other/tooltip\";\r\nimport { VerticalScroll } from \"../other/vertical-scroll\";\r\nimport { TaskListProps, TaskList } from \"../task-list/task-list\";\r\nimport { TaskGantt } from \"./task-gantt\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\r\nimport { GanttEvent } from \"../../types/gantt-task-actions\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport { HorizontalScroll } from \"../other/horizontal-scroll\";\r\nimport { removeHiddenTasks, sortTasks } from \"../../helpers/other-helper\";\r\nimport styles from \"./gantt.module.css\";\r\n\r\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\r\n  tasks,\r\n  headerHeight = 50,\r\n  columnWidth = 60,\r\n  listCellWidth = \"155px\",\r\n  rowHeight = 50,\r\n  ganttHeight = 0,\r\n  viewMode = ViewMode.Day,\r\n  preStepsCount = 1,\r\n  locale = \"en-GB\",\r\n  barFill = 60,\r\n  barCornerRadius = 3,\r\n  barProgressColor = \"#a3a3ff\",\r\n  barProgressSelectedColor = \"#8282f5\",\r\n  barBackgroundColor = \"#b8c2cc\",\r\n  barBackgroundSelectedColor = \"#aeb8c2\",\r\n  projectProgressColor = \"#7db59a\",\r\n  projectProgressSelectedColor = \"#59a985\",\r\n  projectBackgroundColor = \"#fac465\",\r\n  projectBackgroundSelectedColor = \"#f7bb53\",\r\n  milestoneBackgroundColor = \"#f1c453\",\r\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\r\n  rtl = false,\r\n  handleWidth = 8,\r\n  timeStep = 300000,\r\n  arrowColor = \"grey\",\r\n  fontFamily = \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\r\n  fontSize = \"14px\",\r\n  arrowIndent = 20,\r\n  todayColor = \"rgba(252, 248, 227, 0.5)\",\r\n  viewDate,\r\n  TooltipContent = StandardTooltipContent,\r\n  TaskListHeader = TaskListHeaderDefault,\r\n  TaskListTable = TaskListTableDefault,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onClick,\r\n  onDelete,\r\n  onSelect,\r\n  onExpanderClick,\r\n}) => {\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const taskListRef = useRef<HTMLDivElement>(null);\r\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\r\n    const [startDate, endDate] = ganttDateRange(tasks, viewMode, preStepsCount);\r\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\r\n  });\r\n  const [currentViewDate, setCurrentViewDate] = useState<Date | undefined>(\r\n    undefined\r\n  );\r\n\r\n  const [taskListWidth, setTaskListWidth] = useState(0);\r\n  const [svgContainerWidth, setSvgContainerWidth] = useState(0);\r\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight);\r\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\r\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\r\n    action: \"\",\r\n  });\r\n  const taskHeight = useMemo(\r\n    () => (rowHeight * barFill) / 100,\r\n    [rowHeight, barFill]\r\n  );\r\n\r\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\r\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\r\n\r\n  const svgWidth = dateSetup.dates.length * columnWidth;\r\n  const ganttFullHeight = barTasks.length * rowHeight;\r\n\r\n  const [scrollY, setScrollY] = useState(0);\r\n  const [scrollX, setScrollX] = useState(-1);\r\n  const [ignoreScrollEvent, setIgnoreScrollEvent] = useState(false);\r\n\r\n  // task change events\r\n  useEffect(() => {\r\n    let filteredTasks: Task[];\r\n    if (onExpanderClick) {\r\n      filteredTasks = removeHiddenTasks(tasks);\r\n    } else {\r\n      filteredTasks = tasks;\r\n    }\r\n    filteredTasks = filteredTasks.sort(sortTasks);\r\n    const [startDate, endDate] = ganttDateRange(\r\n      filteredTasks,\r\n      viewMode,\r\n      preStepsCount\r\n    );\r\n    let newDates = seedDates(startDate, endDate, viewMode);\r\n    if (rtl) {\r\n      newDates = newDates.reverse();\r\n      if (scrollX === -1) {\r\n        setScrollX(newDates.length * columnWidth);\r\n      }\r\n    }\r\n    setDateSetup({ dates: newDates, viewMode });\r\n    setBarTasks(\r\n      convertToBarTasks(\r\n        filteredTasks,\r\n        newDates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      )\r\n    );\r\n  }, [\r\n    tasks,\r\n    viewMode,\r\n    preStepsCount,\r\n    rowHeight,\r\n    barCornerRadius,\r\n    columnWidth,\r\n    taskHeight,\r\n    handleWidth,\r\n    barProgressColor,\r\n    barProgressSelectedColor,\r\n    barBackgroundColor,\r\n    barBackgroundSelectedColor,\r\n    projectProgressColor,\r\n    projectProgressSelectedColor,\r\n    projectBackgroundColor,\r\n    projectBackgroundSelectedColor,\r\n    milestoneBackgroundColor,\r\n    milestoneBackgroundSelectedColor,\r\n    rtl,\r\n    scrollX,\r\n    onExpanderClick,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      viewMode === dateSetup.viewMode &&\r\n      ((viewDate && !currentViewDate) ||\r\n        (viewDate && currentViewDate?.valueOf() !== viewDate.valueOf()))\r\n    ) {\r\n      const dates = dateSetup.dates;\r\n      const index = dates.findIndex(\r\n        (d, i) =>\r\n          viewDate.valueOf() >= d.valueOf() &&\r\n          i + 1 !== dates.length &&\r\n          viewDate.valueOf() < dates[i + 1].valueOf()\r\n      );\r\n      if (index === -1) {\r\n        return;\r\n      }\r\n      setCurrentViewDate(viewDate);\r\n      setScrollX(columnWidth * index);\r\n    }\r\n  }, [\r\n    viewDate,\r\n    columnWidth,\r\n    dateSetup.dates,\r\n    dateSetup.viewMode,\r\n    viewMode,\r\n    currentViewDate,\r\n    setCurrentViewDate,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const { changedTask, action } = ganttEvent;\r\n    if (changedTask) {\r\n      if (action === \"delete\") {\r\n        setGanttEvent({ action: \"\" });\r\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\r\n      } else if (\r\n        action === \"move\" ||\r\n        action === \"end\" ||\r\n        action === \"start\" ||\r\n        action === \"progress\"\r\n      ) {\r\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\r\n        if (\r\n          prevStateTask &&\r\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\r\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\r\n            prevStateTask.progress !== changedTask.progress)\r\n        ) {\r\n          // actions for change\r\n          const newTaskList = barTasks.map(t =>\r\n            t.id === changedTask.id ? changedTask : t\r\n          );\r\n          setBarTasks(newTaskList);\r\n        }\r\n      }\r\n    }\r\n  }, [ganttEvent, barTasks]);\r\n\r\n  useEffect(() => {\r\n    if (failedTask) {\r\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\r\n      setFailedTask(null);\r\n    }\r\n  }, [failedTask, barTasks]);\r\n\r\n  useEffect(() => {\r\n    if (!listCellWidth) {\r\n      setTaskListWidth(0);\r\n    }\r\n    if (taskListRef.current) {\r\n      setTaskListWidth(taskListRef.current.offsetWidth);\r\n    }\r\n  }, [taskListRef, listCellWidth]);\r\n\r\n  useEffect(() => {\r\n    if (wrapperRef.current) {\r\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\r\n    }\r\n  }, [wrapperRef, taskListWidth]);\r\n\r\n  useEffect(() => {\r\n    if (ganttHeight) {\r\n      setSvgContainerHeight(ganttHeight + headerHeight);\r\n    } else {\r\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\r\n    }\r\n  }, [ganttHeight, tasks, headerHeight, rowHeight]);\r\n\r\n  // scroll events\r\n  useEffect(() => {\r\n    const handleWheel = (event: WheelEvent) => {\r\n      if (event.shiftKey || event.deltaX) {\r\n        const scrollMove = event.deltaX ? event.deltaX : event.deltaY;\r\n        let newScrollX = scrollX + scrollMove;\r\n        if (newScrollX < 0) {\r\n          newScrollX = 0;\r\n        } else if (newScrollX > svgWidth) {\r\n          newScrollX = svgWidth;\r\n        }\r\n        setScrollX(newScrollX);\r\n        event.preventDefault();\r\n      } else if (ganttHeight) {\r\n        let newScrollY = scrollY + event.deltaY;\r\n        if (newScrollY < 0) {\r\n          newScrollY = 0;\r\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n          newScrollY = ganttFullHeight - ganttHeight;\r\n        }\r\n        if (newScrollY !== scrollY) {\r\n          setScrollY(newScrollY);\r\n          event.preventDefault();\r\n        }\r\n      }\r\n\r\n      setIgnoreScrollEvent(true);\r\n    };\r\n\r\n    // subscribe if scroll is necessary\r\n    wrapperRef.current?.addEventListener(\"wheel\", handleWheel, {\r\n      passive: false,\r\n    });\r\n    return () => {\r\n      wrapperRef.current?.removeEventListener(\"wheel\", handleWheel);\r\n    };\r\n  }, [\r\n    wrapperRef,\r\n    scrollY,\r\n    scrollX,\r\n    ganttHeight,\r\n    svgWidth,\r\n    rtl,\r\n    ganttFullHeight,\r\n  ]);\r\n\r\n  const handleScrollY = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\r\n      setScrollY(event.currentTarget.scrollTop);\r\n      setIgnoreScrollEvent(true);\r\n    } else {\r\n      setIgnoreScrollEvent(false);\r\n    }\r\n  };\r\n\r\n  const handleScrollX = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\r\n      setScrollX(event.currentTarget.scrollLeft);\r\n      setIgnoreScrollEvent(true);\r\n    } else {\r\n      setIgnoreScrollEvent(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles arrow keys events and transform it to new scroll\r\n   */\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    let newScrollY = scrollY;\r\n    let newScrollX = scrollX;\r\n    let isX = true;\r\n    switch (event.key) {\r\n      case \"Down\": // IE/Edge specific value\r\n      case \"ArrowDown\":\r\n        newScrollY += rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Up\": // IE/Edge specific value\r\n      case \"ArrowUp\":\r\n        newScrollY -= rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Left\":\r\n      case \"ArrowLeft\":\r\n        newScrollX -= columnWidth;\r\n        break;\r\n      case \"Right\": // IE/Edge specific value\r\n      case \"ArrowRight\":\r\n        newScrollX += columnWidth;\r\n        break;\r\n    }\r\n    if (isX) {\r\n      if (newScrollX < 0) {\r\n        newScrollX = 0;\r\n      } else if (newScrollX > svgWidth) {\r\n        newScrollX = svgWidth;\r\n      }\r\n      setScrollX(newScrollX);\r\n    } else {\r\n      if (newScrollY < 0) {\r\n        newScrollY = 0;\r\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n        newScrollY = ganttFullHeight - ganttHeight;\r\n      }\r\n      setScrollY(newScrollY);\r\n    }\r\n    setIgnoreScrollEvent(true);\r\n  };\r\n\r\n  /**\r\n   * Task select event\r\n   */\r\n  const handleSelectedTask = (taskId: string) => {\r\n    const newSelectedTask = barTasks.find(t => t.id === taskId);\r\n    const oldSelectedTask = barTasks.find(\r\n      t => !!selectedTask && t.id === selectedTask.id\r\n    );\r\n    if (onSelect) {\r\n      if (oldSelectedTask) {\r\n        onSelect(oldSelectedTask, false);\r\n      }\r\n      if (newSelectedTask) {\r\n        onSelect(newSelectedTask, true);\r\n      }\r\n    }\r\n    setSelectedTask(newSelectedTask);\r\n  };\r\n  const handleExpanderClick = (task: Task) => {\r\n    if (onExpanderClick && task.hideChildren !== undefined) {\r\n      onExpanderClick({ ...task, hideChildren: !task.hideChildren });\r\n    }\r\n  };\r\n  const gridProps: GridProps = {\r\n    columnWidth,\r\n    svgWidth,\r\n    tasks: tasks,\r\n    rowHeight,\r\n    dates: dateSetup.dates,\r\n    todayColor,\r\n    rtl,\r\n  };\r\n  const calendarProps: CalendarProps = {\r\n    dateSetup,\r\n    locale,\r\n    viewMode,\r\n    headerHeight,\r\n    columnWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    rtl,\r\n  };\r\n  const barProps: TaskGanttContentProps = {\r\n    tasks: barTasks,\r\n    dates: dateSetup.dates,\r\n    ganttEvent,\r\n    selectedTask,\r\n    rowHeight,\r\n    taskHeight,\r\n    columnWidth,\r\n    arrowColor,\r\n    timeStep,\r\n    fontFamily,\r\n    fontSize,\r\n    arrowIndent,\r\n    svgWidth,\r\n    rtl,\r\n    setGanttEvent,\r\n    setFailedTask,\r\n    setSelectedTask: handleSelectedTask,\r\n    onDateChange,\r\n    onProgressChange,\r\n    onDoubleClick,\r\n    onClick,\r\n    onDelete,\r\n  };\r\n\r\n  const tableProps: TaskListProps = {\r\n    rowHeight,\r\n    rowWidth: listCellWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks: barTasks,\r\n    locale,\r\n    headerHeight,\r\n    scrollY,\r\n    ganttHeight,\r\n    horizontalContainerClass: styles.horizontalContainer,\r\n    selectedTask,\r\n    taskListRef,\r\n    setSelectedTask: handleSelectedTask,\r\n    onExpanderClick: handleExpanderClick,\r\n    TaskListHeader,\r\n    TaskListTable,\r\n  };\r\n  return (\r\n    <div>\r\n      <div\r\n        className={styles.wrapper}\r\n        onKeyDown={handleKeyDown}\r\n        tabIndex={0}\r\n        ref={wrapperRef}\r\n      >\r\n        {listCellWidth && <TaskList {...tableProps} />}\r\n        <TaskGantt\r\n          gridProps={gridProps}\r\n          calendarProps={calendarProps}\r\n          barProps={barProps}\r\n          ganttHeight={ganttHeight}\r\n          scrollY={scrollY}\r\n          scrollX={scrollX}\r\n        />\r\n        {ganttEvent.changedTask && (\r\n          <Tooltip\r\n            arrowIndent={arrowIndent}\r\n            rowHeight={rowHeight}\r\n            svgContainerHeight={svgContainerHeight}\r\n            svgContainerWidth={svgContainerWidth}\r\n            fontFamily={fontFamily}\r\n            fontSize={fontSize}\r\n            scrollX={scrollX}\r\n            scrollY={scrollY}\r\n            task={ganttEvent.changedTask}\r\n            headerHeight={headerHeight}\r\n            taskListWidth={taskListWidth}\r\n            TooltipContent={TooltipContent}\r\n            rtl={rtl}\r\n            svgWidth={svgWidth}\r\n          />\r\n        )}\r\n        <VerticalScroll\r\n          ganttFullHeight={ganttFullHeight}\r\n          ganttHeight={ganttHeight}\r\n          headerHeight={headerHeight}\r\n          scroll={scrollY}\r\n          onScroll={handleScrollY}\r\n          rtl={rtl}\r\n        />\r\n      </div>\r\n      <HorizontalScroll\r\n        svgWidth={svgWidth}\r\n        taskListWidth={taskListWidth}\r\n        scroll={scrollX}\r\n        rtl={rtl}\r\n        onScroll={handleScrollX}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":["ViewMode","intlDTCache","getCachedDateTimeFormat","locString","opts","key","JSON","stringify","dtf","Intl","DateTimeFormat","addToDate","date","quantity","scale","newDate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","startOfDate","scores","shouldReset","_scale","maxScore","indexOf","ganttDateRange","tasks","viewMode","preStepsCount","newStartDate","start","newEndDate","task","end","Year","QuarterYear","Month","Week","getMonday","Day","QuarterDay","HalfDay","Hour","seedDates","startDate","endDate","currentDate","dates","push","getLocaleMonth","locale","bottomValue","month","format","replace","toLocaleUpperCase","getLocalDayOfWeek","weekday","day","getDay","diff","setDate","getWeekNumberISO8601","tmpDate","valueOf","dayNumber","firstThursday","setMonth","weekNumber","Math","ceil","toString","length","getDaysInMonth","year","TaskListHeaderDefault","headerHeight","fontFamily","fontSize","rowWidth","React","className","styles","ganttTable","style","ganttTable_Header","height","ganttTable_HeaderItem","minWidth","ganttTable_HeaderSeparator","marginTop","localeDateStringCache","toLocaleDateStringFactory","dateTimeOptions","lds","toLocaleDateString","TaskListTableDefault","rowHeight","onExpanderClick","useMemo","taskListWrapper","map","t","expanderSymbol","hideChildren","taskListTableRow","id","taskListCell","maxWidth","title","name","taskListNameWrapper","taskListExpander","taskListEmptyExpander","onClick","Tooltip","rtl","svgContainerHeight","svgContainerWidth","scrollX","scrollY","arrowIndent","taskListWidth","TooltipContent","tooltipRef","useRef","relatedY","setRelatedY","useState","relatedX","setRelatedX","useEffect","current","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","newRelatedY","index","newRelatedX","x1","x2","tooltipLeftmostPoint","fullChartWidth","tooltipLowerPoint","ref","tooltipDetailsContainer","tooltipDetailsContainerHidden","left","top","StandardTooltipContent","tooltipDefaultContainer","getTime","tooltipDefaultContainerParagraph","progress","VerticalScroll","scroll","ganttHeight","ganttFullHeight","onScroll","scrollRef","scrollTop","marginLeft","width","TaskList","selectedTask","setSelectedTask","taskListRef","horizontalContainerClass","TaskListHeader","TaskListTable","horizontalContainerRef","headerProps","selectedTaskId","tableProps","GridBody","svgWidth","columnWidth","todayColor","y","gridRows","rowLines","x","y1","y2","gridRowLine","gridRow","now","tickX","ticks","today","i","gridTick","fill","Grid","props","TopPartOfCalendar","value","x1Line","y1Line","y2Line","xText","yText","calendarTopTick","calendarTopText","Calendar","dateSetup","getCalendarValuesForYear","topValues","bottomValues","topDefaultHeight","calendarBottomText","topValue","getCalendarValuesForQuarterYear","quarter","floor","abs","getCalendarValuesForMonth","getCalendarValuesForWeek","weeksCount","getCalendarValuesForDay","getCalendarValuesForPartOfDay","hour","getCalendarValuesForHour","displayDate","topPosition","calendarHeader","Arrow","taskFrom","taskTo","taskHeight","path","trianglePoints","drownPathAndTriangleRTL","drownPathAndTriangle","strokeWidth","d","points","indexCompare","taskToEndPosition","taskFromEndPosition","taskFromHorizontalOffsetValue","taskToHorizontalOffsetValue","convertToBarTasks","barCornerRadius","handleWidth","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","barTasks","convertToBarTask","dependencies","j","dependence","findIndex","barChildren","barTask","type","convertToMilestone","convertToBar","taskXCoordinateRTL","taskXCoordinate","typeInternal","progressWidth","progressX","progressWithByParams","taskYCoordinate","undefined","backgroundColor","backgroundSelectedColor","progressColor","progressSelectedColor","rotatedHeight","xDate","remainderMillis","percentOfInterval","taskX1","taskX2","progressByX","barWidth","progressPercent","round","progressByXRTL","getProgressPoint","taskY","point","join","startByX","xStep","steps","additionalXValue","newX","endByX","moveByX","newX1","newX2","dateByX","taskX","taskDate","timeStep","getTimezoneOffset","handleTaskBySVGMouseEvent","svgX","action","initEventX1Delta","result","handleTaskBySVGMouseEventForMilestone","handleTaskBySVGMouseEventForBar","changedTask","isChanged","newMoveX1","newMoveX2","isKeyboardEvent","event","removeHiddenTasks","groupedTasks","filter","groupedTask","children","getChildren","taskList","project","taskChildren","forEach","concat","sortTasks","taskA","taskB","orderA","displayOrder","Number","MAX_VALUE","orderB","BarDisplay","isSelected","onMouseDown","getProcessColor","getBarColor","ry","rx","barBackground","BarDateHandle","barHandle","BarProgressHandle","progressPoint","Bar","isProgressChangeable","isDateChangeable","onEventStart","handleHeight","barWrapper","tabIndex","e","BarSmall","Milestone","transform","milestoneWrapper","milestoneBackground","Project","barColor","processColor","projectWith","projectLeftTriangle","projectRightTriangle","projectWrapper","projectBackground","projectTop","TaskItem","isDelete","textRef","taskItem","setTaskItem","isTextInside","setIsTextInside","getBBox","getX","hasChild","onKeyDown","stopPropagation","onMouseEnter","onMouseLeave","onDoubleClick","onFocus","barLabel","barLabelOutside","TaskGanttContent","ganttEvent","svg","arrowColor","setGanttEvent","setFailedTask","onDateChange","onProgressChange","onDelete","createSVGPoint","setXStep","setInitEventX1Delta","isMoving","setIsMoving","dateDelta","newXStep","handleMouseMove","preventDefault","clientX","cursor","matrixTransform","getScreenCTM","inverse","handleMouseUp","originalSelectedTask","newChangedTask","isNotLikeOriginal","removeEventListener","operationSuccess","error","addEventListener","handleBarEventStart","console","stroke","child","isDisabled","TaskGantt","gridProps","calendarProps","barProps","ganttSVGRef","verticalGanttContainerRef","newBarProps","scrollLeft","ganttVerticalContainer","dir","xmlns","horizontalContainer","HorizontalScroll","margin","scrollWrapper","Gantt","listCellWidth","barFill","viewDate","onSelect","wrapperRef","setDateSetup","currentViewDate","setCurrentViewDate","setTaskListWidth","setSvgContainerWidth","setSvgContainerHeight","setBarTasks","failedTask","setScrollY","setScrollX","ignoreScrollEvent","setIgnoreScrollEvent","filteredTasks","sort","newDates","reverse","prevStateTask","find","newTaskList","handleWheel","shiftKey","deltaX","scrollMove","deltaY","newScrollX","newScrollY","passive","handleScrollY","currentTarget","handleScrollX","handleKeyDown","isX","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","handleExpanderClick","wrapper"],"mappings":";;IAAYA;;AAAZ,WAAYA;EACVA,gBAAA,SAAA;EACAA,sBAAA,gBAAA;EACAA,mBAAA,aAAA;EACAA,eAAA,QAAA;EAEAA,gBAAA,SAAA;EACAA,iBAAA,UAAA;EACAA,uBAAA,gBAAA;EACAA,gBAAA,SAAA;AACD,CAVD,EAAYA,QAAQ,KAARA,QAAQ,KAAA,CAApB;;ACaA,MAAMC,WAAW,GAAG,EAApB;AACA,AAAO,MAAMC,uBAAuB,GAAG,CACrCC,SADqC,EAErCC,OAA8B,EAFO;EAIrC,MAAMC,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe,CAACJ,SAAD,EAAYC,IAAZ,CAAf,CAAZ;EACA,IAAII,GAAG,GAAGP,WAAW,CAACI,GAAD,CAArB;;EACA,IAAI,CAACG,GAAL,EAAU;IACRA,GAAG,GAAG,IAAIC,IAAI,CAACC,cAAT,CAAwBP,SAAxB,EAAmCC,IAAnC,CAAN;IACAH,WAAW,CAACI,GAAD,CAAX,GAAmBG,GAAnB;;;EAEF,OAAOA,GAAP;AACD,CAXM;AAaP,AAAO,MAAMG,SAAS,GAAG,CACvBC,IADuB,EAEvBC,QAFuB,EAGvBC,KAHuB;EAKvB,MAAMC,OAAO,GAAG,IAAIC,IAAJ,CACdJ,IAAI,CAACK,WAAL,MAAsBH,KAAK,KAAK,MAAV,GAAmBD,QAAnB,GAA8B,CAApD,CADc,EAEdD,IAAI,CAACM,QAAL,MAAmBJ,KAAK,KAAK,OAAV,GAAoBD,QAApB,GAA+B,CAAlD,CAFc,EAGdD,IAAI,CAACO,OAAL,MAAkBL,KAAK,KAAK,KAAV,GAAkBD,QAAlB,GAA6B,CAA/C,CAHc,EAIdD,IAAI,CAACQ,QAAL,MAAmBN,KAAK,KAAK,MAAV,GAAmBD,QAAnB,GAA8B,CAAjD,CAJc,EAKdD,IAAI,CAACS,UAAL,MAAqBP,KAAK,KAAK,QAAV,GAAqBD,QAArB,GAAgC,CAArD,CALc,EAMdD,IAAI,CAACU,UAAL,MAAqBR,KAAK,KAAK,QAAV,GAAqBD,QAArB,GAAgC,CAArD,CANc,EAOdD,IAAI,CAACW,eAAL,MAA0BT,KAAK,KAAK,aAAV,GAA0BD,QAA1B,GAAqC,CAA/D,CAPc,CAAhB;EASA,OAAOE,OAAP;AACD,CAfM;AAiBP,AAAO,MAAMS,WAAW,GAAG,CAACZ,IAAD,EAAaE,KAAb;EACzB,MAAMW,MAAM,GAAG,CACb,aADa,EAEb,QAFa,EAGb,QAHa,EAIb,MAJa,EAKb,KALa,EAMb,OANa,EAOb,MAPa,CAAf;;EAUA,MAAMC,WAAW,GAAIC,MAAD;IAClB,MAAMC,QAAQ,GAAGH,MAAM,CAACI,OAAP,CAAef,KAAf,CAAjB;IACA,OAAOW,MAAM,CAACI,OAAP,CAAeF,MAAf,KAA0BC,QAAjC;GAFF;;EAIA,MAAMb,OAAO,GAAG,IAAIC,IAAJ,CACdJ,IAAI,CAACK,WAAL,EADc,EAEdS,WAAW,CAAC,MAAD,CAAX,GAAsB,CAAtB,GAA0Bd,IAAI,CAACM,QAAL,EAFZ,EAGdQ,WAAW,CAAC,OAAD,CAAX,GAAuB,CAAvB,GAA2Bd,IAAI,CAACO,OAAL,EAHb,EAIdO,WAAW,CAAC,KAAD,CAAX,GAAqB,CAArB,GAAyBd,IAAI,CAACQ,QAAL,EAJX,EAKdM,WAAW,CAAC,MAAD,CAAX,GAAsB,CAAtB,GAA0Bd,IAAI,CAACS,UAAL,EALZ,EAMdK,WAAW,CAAC,QAAD,CAAX,GAAwB,CAAxB,GAA4Bd,IAAI,CAACU,UAAL,EANd,EAOdI,WAAW,CAAC,QAAD,CAAX,GAAwB,CAAxB,GAA4Bd,IAAI,CAACW,eAAL,EAPd,CAAhB;EASA,OAAOR,OAAP;AACD,CAzBM;AA2BP,AAAO,MAAMe,cAAc,GAAG,CAC5BC,KAD4B,EAE5BC,QAF4B,EAG5BC,aAH4B;EAK5B,IAAIC,YAAY,GAASH,KAAK,CAAC,CAAD,CAAL,CAASI,KAAlC;EACA,IAAIC,UAAU,GAASL,KAAK,CAAC,CAAD,CAAL,CAASI,KAAhC;;EACA,KAAK,MAAME,IAAX,IAAmBN,KAAnB,EAA0B;IACxB,IAAIM,IAAI,CAACF,KAAL,GAAaD,YAAjB,EAA+B;MAC7BA,YAAY,GAAGG,IAAI,CAACF,KAApB;;;IAEF,IAAIE,IAAI,CAACC,GAAL,GAAWF,UAAf,EAA2B;MACzBA,UAAU,GAAGC,IAAI,CAACC,GAAlB;;;;EAGJ,QAAQN,QAAR;IACE,KAAKhC,QAAQ,CAACuC,IAAd;MACEL,YAAY,GAAGvB,SAAS,CAACuB,YAAD,EAAe,CAAC,CAAhB,EAAmB,MAAnB,CAAxB;MACAA,YAAY,GAAGV,WAAW,CAACU,YAAD,EAAe,MAAf,CAA1B;MACAE,UAAU,GAAGzB,SAAS,CAACyB,UAAD,EAAa,CAAb,EAAgB,MAAhB,CAAtB;MACAA,UAAU,GAAGZ,WAAW,CAACY,UAAD,EAAa,MAAb,CAAxB;MACA;;IACF,KAAKpC,QAAQ,CAACwC,WAAd;MACEN,YAAY,GAAGvB,SAAS,CAACuB,YAAD,EAAe,CAAC,CAAhB,EAAmB,OAAnB,CAAxB;MACAA,YAAY,GAAGV,WAAW,CAACU,YAAD,EAAe,OAAf,CAA1B;MACAE,UAAU,GAAGzB,SAAS,CAACyB,UAAD,EAAa,CAAb,EAAgB,MAAhB,CAAtB;MACAA,UAAU,GAAGZ,WAAW,CAACY,UAAD,EAAa,MAAb,CAAxB;MACA;;IACF,KAAKpC,QAAQ,CAACyC,KAAd;MACEP,YAAY,GAAGvB,SAAS,CAACuB,YAAD,EAAe,CAAC,CAAD,GAAKD,aAApB,EAAmC,OAAnC,CAAxB;MACAC,YAAY,GAAGV,WAAW,CAACU,YAAD,EAAe,OAAf,CAA1B;MACAE,UAAU,GAAGzB,SAAS,CAACyB,UAAD,EAAa,CAAb,EAAgB,MAAhB,CAAtB;MACAA,UAAU,GAAGZ,WAAW,CAACY,UAAD,EAAa,MAAb,CAAxB;MACA;;IACF,KAAKpC,QAAQ,CAAC0C,IAAd;MACER,YAAY,GAAGV,WAAW,CAACU,YAAD,EAAe,KAAf,CAA1B;MACAA,YAAY,GAAGvB,SAAS,CACtBgC,SAAS,CAACT,YAAD,CADa,EAEtB,CAAC,CAAD,GAAKD,aAFiB,EAGtB,KAHsB,CAAxB;MAKAG,UAAU,GAAGZ,WAAW,CAACY,UAAD,EAAa,KAAb,CAAxB;MACAA,UAAU,GAAGzB,SAAS,CAACyB,UAAD,EAAa,GAAb,EAAkB,OAAlB,CAAtB;MACA;;IACF,KAAKpC,QAAQ,CAAC4C,GAAd;MACEV,YAAY,GAAGV,WAAW,CAACU,YAAD,EAAe,KAAf,CAA1B;MACAA,YAAY,GAAGvB,SAAS,CAACuB,YAAD,EAAe,CAAC,CAAD,GAAKD,aAApB,EAAmC,KAAnC,CAAxB;MACAG,UAAU,GAAGZ,WAAW,CAACY,UAAD,EAAa,KAAb,CAAxB;MACAA,UAAU,GAAGzB,SAAS,CAACyB,UAAD,EAAa,EAAb,EAAiB,KAAjB,CAAtB;MACA;;IACF,KAAKpC,QAAQ,CAAC6C,UAAd;MACEX,YAAY,GAAGV,WAAW,CAACU,YAAD,EAAe,KAAf,CAA1B;MACAA,YAAY,GAAGvB,SAAS,CAACuB,YAAD,EAAe,CAAC,CAAD,GAAKD,aAApB,EAAmC,KAAnC,CAAxB;MACAG,UAAU,GAAGZ,WAAW,CAACY,UAAD,EAAa,KAAb,CAAxB;MACAA,UAAU,GAAGzB,SAAS,CAACyB,UAAD,EAAa,EAAb,EAAiB,MAAjB,CAAtB;MACA;;IACF,KAAKpC,QAAQ,CAAC8C,OAAd;MACEZ,YAAY,GAAGV,WAAW,CAACU,YAAD,EAAe,KAAf,CAA1B;MACAA,YAAY,GAAGvB,SAAS,CAACuB,YAAD,EAAe,CAAC,CAAD,GAAKD,aAApB,EAAmC,KAAnC,CAAxB;MACAG,UAAU,GAAGZ,WAAW,CAACY,UAAD,EAAa,KAAb,CAAxB;MACAA,UAAU,GAAGzB,SAAS,CAACyB,UAAD,EAAa,GAAb,EAAkB,MAAlB,CAAtB;MACA;;IACF,KAAKpC,QAAQ,CAAC+C,IAAd;MACEb,YAAY,GAAGV,WAAW,CAACU,YAAD,EAAe,MAAf,CAA1B;MACAA,YAAY,GAAGvB,SAAS,CAACuB,YAAD,EAAe,CAAC,CAAD,GAAKD,aAApB,EAAmC,MAAnC,CAAxB;MACAG,UAAU,GAAGZ,WAAW,CAACY,UAAD,EAAa,KAAb,CAAxB;MACAA,UAAU,GAAGzB,SAAS,CAACyB,UAAD,EAAa,CAAb,EAAgB,KAAhB,CAAtB;MACA;;;EAEJ,OAAO,CAACF,YAAD,EAAeE,UAAf,CAAP;AACD,CAtEM;AAwEP,AAAO,MAAMY,SAAS,GAAG,CACvBC,SADuB,EAEvBC,OAFuB,EAGvBlB,QAHuB;EAKvB,IAAImB,WAAW,GAAS,IAAInC,IAAJ,CAASiC,SAAT,CAAxB;EACA,MAAMG,KAAK,GAAW,CAACD,WAAD,CAAtB;;EACA,OAAOA,WAAW,GAAGD,OAArB,EAA8B;IAC5B,QAAQlB,QAAR;MACE,KAAKhC,QAAQ,CAACuC,IAAd;QACEY,WAAW,GAAGxC,SAAS,CAACwC,WAAD,EAAc,CAAd,EAAiB,MAAjB,CAAvB;QACA;;MACF,KAAKnD,QAAQ,CAACwC,WAAd;QACEW,WAAW,GAAGxC,SAAS,CAACwC,WAAD,EAAc,CAAd,EAAiB,OAAjB,CAAvB;QACA;;MACF,KAAKnD,QAAQ,CAACyC,KAAd;QACEU,WAAW,GAAGxC,SAAS,CAACwC,WAAD,EAAc,CAAd,EAAiB,OAAjB,CAAvB;QACA;;MACF,KAAKnD,QAAQ,CAAC0C,IAAd;QACES,WAAW,GAAGxC,SAAS,CAACwC,WAAD,EAAc,CAAd,EAAiB,KAAjB,CAAvB;QACA;;MACF,KAAKnD,QAAQ,CAAC4C,GAAd;QACEO,WAAW,GAAGxC,SAAS,CAACwC,WAAD,EAAc,CAAd,EAAiB,KAAjB,CAAvB;QACA;;MACF,KAAKnD,QAAQ,CAAC8C,OAAd;QACEK,WAAW,GAAGxC,SAAS,CAACwC,WAAD,EAAc,EAAd,EAAkB,MAAlB,CAAvB;QACA;;MACF,KAAKnD,QAAQ,CAAC6C,UAAd;QACEM,WAAW,GAAGxC,SAAS,CAACwC,WAAD,EAAc,CAAd,EAAiB,MAAjB,CAAvB;QACA;;MACF,KAAKnD,QAAQ,CAAC+C,IAAd;QACEI,WAAW,GAAGxC,SAAS,CAACwC,WAAD,EAAc,CAAd,EAAiB,MAAjB,CAAvB;QACA;;;IAEJC,KAAK,CAACC,IAAN,CAAWF,WAAX;;;EAEF,OAAOC,KAAP;AACD,CArCM;AAuCP,AAAO,MAAME,cAAc,GAAG,CAAC1C,IAAD,EAAa2C,MAAb;EAC5B,IAAIC,WAAW,GAAGtD,uBAAuB,CAACqD,MAAD,EAAS;IAChDE,KAAK,EAAE;GADgC,CAAvB,CAEfC,MAFe,CAER9C,IAFQ,CAAlB;EAGA4C,WAAW,GAAGA,WAAW,CAACG,OAAZ,CACZH,WAAW,CAAC,CAAD,CADC,EAEZA,WAAW,CAAC,CAAD,CAAX,CAAeI,iBAAf,EAFY,CAAd;EAIA,OAAOJ,WAAP;AACD,CATM;AAWP,AAAO,MAAMK,iBAAiB,GAAG,CAC/BjD,IAD+B,EAE/B2C,MAF+B,EAG/BG,MAH+B;EAK/B,IAAIF,WAAW,GAAGtD,uBAAuB,CAACqD,MAAD,EAAS;IAChDO,OAAO,EAAEJ;GAD8B,CAAvB,CAEfA,MAFe,CAER9C,IAFQ,CAAlB;EAGA4C,WAAW,GAAGA,WAAW,CAACG,OAAZ,CACZH,WAAW,CAAC,CAAD,CADC,EAEZA,WAAW,CAAC,CAAD,CAAX,CAAeI,iBAAf,EAFY,CAAd;EAIA,OAAOJ,WAAP;AACD,CAbM;;AAmBP,MAAMb,SAAS,GAAI/B,IAAD;EAChB,MAAMmD,GAAG,GAAGnD,IAAI,CAACoD,MAAL,EAAZ;EACA,MAAMC,IAAI,GAAGrD,IAAI,CAACO,OAAL,KAAiB4C,GAAjB,IAAwBA,GAAG,KAAK,CAAR,GAAY,CAAC,CAAb,GAAiB,CAAzC,CAAb;EACA,OAAO,IAAI/C,IAAJ,CAASJ,IAAI,CAACsD,OAAL,CAAaD,IAAb,CAAT,CAAP;AACD,CAJD;;AAMA,AAAO,MAAME,oBAAoB,GAAIvD,IAAD;EAClC,MAAMwD,OAAO,GAAG,IAAIpD,IAAJ,CAASJ,IAAI,CAACyD,OAAL,EAAT,CAAhB;EACA,MAAMC,SAAS,GAAG,CAACF,OAAO,CAACJ,MAAR,KAAmB,CAApB,IAAyB,CAA3C;EACAI,OAAO,CAACF,OAAR,CAAgBE,OAAO,CAACjD,OAAR,KAAoBmD,SAApB,GAAgC,CAAhD;EACA,MAAMC,aAAa,GAAGH,OAAO,CAACC,OAAR,EAAtB;EACAD,OAAO,CAACI,QAAR,CAAiB,CAAjB,EAAoB,CAApB;;EACA,IAAIJ,OAAO,CAACJ,MAAR,OAAqB,CAAzB,EAA4B;IAC1BI,OAAO,CAACI,QAAR,CAAiB,CAAjB,EAAoB,IAAK,CAAC,IAAIJ,OAAO,CAACJ,MAAR,EAAJ,GAAuB,CAAxB,IAA6B,CAAtD;;;EAEF,MAAMS,UAAU,GAAG,CACjB,IAAIC,IAAI,CAACC,IAAL,CAAU,CAACJ,aAAa,GAAGH,OAAO,CAACC,OAAR,EAAjB,IAAsC,SAAhD,CADa,EAEjBO,QAFiB,EAAnB;;EAIA,IAAIH,UAAU,CAACI,MAAX,KAAsB,CAA1B,EAA6B;IAC3B,WAAWJ,YAAX;GADF,MAEO;IACL,OAAOA,UAAP;;AAEH,CAlBM;AAoBP,AAAO,MAAMK,cAAc,GAAG,CAACrB,KAAD,EAAgBsB,IAAhB;EAC5B,OAAO,IAAI/D,IAAJ,CAAS+D,IAAT,EAAetB,KAAK,GAAG,CAAvB,EAA0B,CAA1B,EAA6BtC,OAA7B,EAAP;AACD,CAFM;;;;AC3OA,MAAM6D,qBAAqB,GAK7B,CAAC;EAAEC,YAAF;EAAgBC,UAAhB;EAA4BC,QAA5B;EAAsCC;AAAtC,CAAD;EACH,OACEC,mBAAA,MAAA;IACEC,SAAS,EAAEC,MAAM,CAACC;IAClBC,KAAK,EAAE;MACLP,UAAU,EAAEA,UADP;MAELC,QAAQ,EAAEA;;GAJd,EAOEE,mBAAA,MAAA;IACEC,SAAS,EAAEC,MAAM,CAACG;IAClBD,KAAK,EAAE;MACLE,MAAM,EAAEV,YAAY,GAAG;;GAH3B,EAMEI,mBAAA,MAAA;IACEC,SAAS,EAAEC,MAAM,CAACK;IAClBH,KAAK,EAAE;MACLI,QAAQ,EAAET;;GAHd,cAAA,CANF,EAcEC,mBAAA,MAAA;IACEC,SAAS,EAAEC,MAAM,CAACO;IAClBL,KAAK,EAAE;MACLE,MAAM,EAAEV,YAAY,GAAG,GADlB;MAELc,SAAS,EAAEd,YAAY,GAAG;;GAJ9B,CAdF,EAqBEI,mBAAA,MAAA;IACEC,SAAS,EAAEC,MAAM,CAACK;IAClBH,KAAK,EAAE;MACLI,QAAQ,EAAET;;GAHd,cAAA,CArBF,EA6BEC,mBAAA,MAAA;IACEC,SAAS,EAAEC,MAAM,CAACO;IAClBL,KAAK,EAAE;MACLE,MAAM,EAAEV,YAAY,GAAG,GADlB;MAELc,SAAS,EAAEd,YAAY,GAAG;;GAJ9B,CA7BF,EAoCEI,mBAAA,MAAA;IACEC,SAAS,EAAEC,MAAM,CAACK;IAClBH,KAAK,EAAE;MACLI,QAAQ,EAAET;;GAHd,YAAA,CApCF,CAPF,CADF;AAuDD,CA7DM;;;;ACCP,MAAMY,qBAAqB,GAAG,EAA9B;;AACA,MAAMC,yBAAyB,GAC5B1C,MAAD,IACA,CAAC3C,IAAD,EAAasF,eAAb;EACE,MAAM7F,GAAG,GAAGO,IAAI,CAACgE,QAAL,EAAZ;EACA,IAAIuB,GAAG,GAAGH,qBAAqB,CAAC3F,GAAD,CAA/B;;EACA,IAAI,CAAC8F,GAAL,EAAU;IACRA,GAAG,GAAGvF,IAAI,CAACwF,kBAAL,CAAwB7C,MAAxB,EAAgC2C,eAAhC,CAAN;IACAF,qBAAqB,CAAC3F,GAAD,CAArB,GAA6B8F,GAA7B;;;EAEF,OAAOA,GAAP;AACD,CAVH;;AAWA,MAAMD,eAAe,GAA+B;EAClDpC,OAAO,EAAE,OADyC;EAElDiB,IAAI,EAAE,SAF4C;EAGlDtB,KAAK,EAAE,MAH2C;EAIlDM,GAAG,EAAE;AAJ6C,CAApD;AAOA,AAAO,MAAMsC,oBAAoB,GAU5B,CAAC;EACJC,SADI;EAEJlB,QAFI;EAGJrD,KAHI;EAIJmD,UAJI;EAKJC,QALI;EAMJ5B,MANI;EAOJgD;AAPI,CAAD;EASH,MAAMH,kBAAkB,GAAGI,OAAO,CAChC,MAAMP,yBAAyB,CAAC1C,MAAD,CADC,EAEhC,CAACA,MAAD,CAFgC,CAAlC;EAKA,OACE8B,mBAAA,MAAA;IACEC,SAAS,EAAEC,QAAM,CAACkB;IAClBhB,KAAK,EAAE;MACLP,UAAU,EAAEA,UADP;MAELC,QAAQ,EAAEA;;GAJd,EAOGpD,KAAK,CAAC2E,GAAN,CAAUC,CAAC;IACV,IAAIC,cAAc,GAAG,EAArB;;IACA,IAAID,CAAC,CAACE,YAAF,KAAmB,KAAvB,EAA8B;MAC5BD,cAAc,GAAG,GAAjB;KADF,MAEO,IAAID,CAAC,CAACE,YAAF,KAAmB,IAAvB,EAA6B;MAClCD,cAAc,GAAG,GAAjB;;;IAGF,OACEvB,mBAAA,MAAA;MACEC,SAAS,EAAEC,QAAM,CAACuB;MAClBrB,KAAK,EAAE;QAAEE,MAAM,EAAEW;;MACjBjG,GAAG,KAAKsG,CAAC,CAACI;KAHZ,EAKE1B,mBAAA,MAAA;MACEC,SAAS,EAAEC,QAAM,CAACyB;MAClBvB,KAAK,EAAE;QACLI,QAAQ,EAAET,QADL;QAEL6B,QAAQ,EAAE7B;;MAEZ8B,KAAK,EAAEP,CAAC,CAACQ;KANX,EAQE9B,mBAAA,MAAA;MAAKC,SAAS,EAAEC,QAAM,CAAC6B;KAAvB,EACE/B,mBAAA,MAAA;MACEC,SAAS,EACPsB,cAAc,GACVrB,QAAM,CAAC8B,gBADG,GAEV9B,QAAM,CAAC+B;MAEbC,OAAO,EAAE,MAAMhB,eAAe,CAACI,CAAD;KANhC,EAQGC,cARH,CADF,EAWEvB,mBAAA,MAAA,MAAA,EAAMsB,CAAC,CAACQ,IAAR,CAXF,CARF,CALF,EA2BE9B,mBAAA,MAAA;MACEC,SAAS,EAAEC,QAAM,CAACyB;MAClBvB,KAAK,EAAE;QACLI,QAAQ,EAAET,QADL;QAEL6B,QAAQ,EAAE7B;;KAJd,UAAA,EAOSgB,kBAAkB,CAACO,CAAC,CAACxE,KAAH,EAAU+D,eAAV,CAP3B,CA3BF,EAoCEb,mBAAA,MAAA;MACEC,SAAS,EAAEC,QAAM,CAACyB;MAClBvB,KAAK,EAAE;QACLI,QAAQ,EAAET,QADL;QAEL6B,QAAQ,EAAE7B;;KAJd,UAAA,EAOSgB,kBAAkB,CAACO,CAAC,CAACrE,GAAH,EAAQ4D,eAAR,CAP3B,CApCF,CADF;GARD,CAPH,CADF;AAmED,CA3FM;;;;ACEA,MAAMsB,OAAO,GAA2B,CAAC;EAC9CnF,IAD8C;EAE9CiE,SAF8C;EAG9CmB,GAH8C;EAI9CC,kBAJ8C;EAK9CC,iBAL8C;EAM9CC,OAN8C;EAO9CC,OAP8C;EAQ9CC,WAR8C;EAS9C3C,QAT8C;EAU9CD,UAV8C;EAW9CD,YAX8C;EAY9C8C,aAZ8C;EAa9CC;AAb8C,CAAD;EAe7C,MAAMC,UAAU,GAAGC,MAAM,CAAwB,IAAxB,CAAzB;EACA,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BC,QAAQ,CAAC,CAAD,CAAxC;EACA,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BF,QAAQ,CAAC,CAAD,CAAxC;EACAG,SAAS,CAAC;IACR,IAAIP,UAAU,CAACQ,OAAf,EAAwB;MACtB,MAAMC,aAAa,GAAGT,UAAU,CAACQ,OAAX,CAAmBE,YAAnB,GAAkC,GAAxD;MACA,MAAMC,YAAY,GAAGX,UAAU,CAACQ,OAAX,CAAmBI,WAAnB,GAAiC,GAAtD;MAEA,IAAIC,WAAW,GAAGzG,IAAI,CAAC0G,KAAL,GAAazC,SAAb,GAAyBuB,OAAzB,GAAmC5C,YAArD;MACA,IAAI+D,WAAJ;;MACA,IAAIvB,GAAJ,EAAS;QACPuB,WAAW,GAAG3G,IAAI,CAAC4G,EAAL,GAAUnB,WAAW,GAAG,GAAxB,GAA8Bc,YAA9B,GAA6ChB,OAA3D;;QACA,IAAIoB,WAAW,GAAG,CAAlB,EAAqB;UACnBA,WAAW,GAAG3G,IAAI,CAAC6G,EAAL,GAAUpB,WAAW,GAAG,GAAxB,GAA8BF,OAA5C;;;QAEF,MAAMuB,oBAAoB,GAAGP,YAAY,GAAGI,WAA5C;;QACA,IAAIG,oBAAoB,GAAGxB,iBAA3B,EAA8C;UAC5CqB,WAAW,GAAGrB,iBAAiB,GAAGiB,YAAlC;UACAE,WAAW,IAAIxC,SAAf;;OARJ,MAUO;QACL0C,WAAW,GAAG3G,IAAI,CAAC6G,EAAL,GAAUpB,WAAW,GAAG,GAAxB,GAA8BC,aAA9B,GAA8CH,OAA5D;QACA,MAAMuB,oBAAoB,GAAGP,YAAY,GAAGI,WAA5C;QACA,MAAMI,cAAc,GAAGrB,aAAa,GAAGJ,iBAAvC;;QACA,IAAIwB,oBAAoB,GAAGC,cAA3B,EAA2C;UACzCJ,WAAW,GACT3G,IAAI,CAAC4G,EAAL,GACAlB,aADA,GAEAD,WAAW,GAAG,GAFd,GAGAF,OAHA,GAIAgB,YALF;;;QAOF,IAAII,WAAW,GAAGjB,aAAlB,EAAiC;UAC/BiB,WAAW,GAAGrB,iBAAiB,GAAGI,aAApB,GAAoCa,YAAlD;UACAE,WAAW,IAAIxC,SAAf;;;;MAIJ,MAAM+C,iBAAiB,GAAGX,aAAa,GAAGI,WAAhB,GAA8BjB,OAAxD;;MACA,IAAIwB,iBAAiB,GAAG3B,kBAAkB,GAAGG,OAA7C,EAAsD;QACpDiB,WAAW,GAAGpB,kBAAkB,GAAGgB,aAAnC;;;MAEFN,WAAW,CAACU,WAAD,CAAX;MACAP,WAAW,CAACS,WAAD,CAAX;;GAxCK,EA0CN,CACDf,UADC,EAED5F,IAFC,EAGDyF,WAHC,EAIDF,OAJC,EAKDC,OALC,EAMD5C,YANC,EAOD8C,aAPC,EAQDzB,SARC,EASDoB,kBATC,EAUDC,iBAVC,EAWDF,GAXC,CA1CM,CAAT;EAwDA,OACEpC,mBAAA,MAAA;IACEiE,GAAG,EAAErB;IACL3C,SAAS,EACPgD,QAAQ,GACJ/C,QAAM,CAACgE,uBADH,GAEJhE,QAAM,CAACiE;IAEb/D,KAAK,EAAE;MAAEgE,IAAI,EAAEnB,QAAR;MAAkBoB,GAAG,EAAEvB;;GAPhC,EASE9C,mBAAA,CAAC2C,cAAD;IAAgB3F,IAAI,EAAEA;IAAM8C,QAAQ,EAAEA;IAAUD,UAAU,EAAEA;GAA5D,CATF,CADF;AAaD,CAvFM;AAyFP,AAAO,MAAMyE,sBAAsB,GAI9B,CAAC;EAAEtH,IAAF;EAAQ8C,QAAR;EAAkBD;AAAlB,CAAD;EACH,MAAMO,KAAK,GAAG;IACZN,QADY;IAEZD;GAFF;EAIA,OACEG,mBAAA,MAAA;IAAKC,SAAS,EAAEC,QAAM,CAACqE;IAAyBnE,KAAK,EAAEA;GAAvD,EACEJ,mBAAA,IAAA;IAAGI,KAAK,EAAE;MAAEN,QAAQ,EAAEA,QAAQ,GAAG;;GAAjC,KACE9C,IAAI,CAAC8E,SACF9E,IAAI,CAACF,KAAL,CAAWhB,OAAX,MACHkB,IAAI,CAACF,KAAL,CAAWjB,QAAX,KAAwB,KACtBmB,IAAI,CAACF,KAAL,CAAWlB,WAAX,QAA8BoB,IAAI,CAACC,GAAL,CAASnB,OAAT,MAChCkB,IAAI,CAACC,GAAL,CAASpB,QAAT,KAAsB,KACpBmB,IAAI,CAACC,GAAL,CAASrB,WAAT,IANJ,CADF,EAQGoB,IAAI,CAACC,GAAL,CAASuH,OAAT,KAAqBxH,IAAI,CAACF,KAAL,CAAW0H,OAAX,EAArB,KAA8C,CAA9C,IACCxE,mBAAA,IAAA;IAAGC,SAAS,EAAEC,QAAM,CAACuE;GAArB,eAAqE,CAAC,EACpE,CAACzH,IAAI,CAACC,GAAL,CAASuH,OAAT,KAAqBxH,IAAI,CAACF,KAAL,CAAW0H,OAAX,EAAtB,KACC,OAAO,EAAP,GAAY,EAAZ,GAAiB,EADlB,CADoE,UAAtE,CATJ,EAeExE,mBAAA,IAAA;IAAGC,SAAS,EAAEC,QAAM,CAACuE;GAArB,EACG,CAAC,CAACzH,IAAI,CAAC0H,QAAP,iBAAgC1H,IAAI,CAAC0H,YADxC,CAfF,CADF;AAqBD,CA9BM;;;;AC/GA,MAAMC,cAAc,GAOtB,CAAC;EACJC,MADI;EAEJC,WAFI;EAGJC,eAHI;EAIJlF,YAJI;EAKJwC,GALI;EAMJ2C;AANI,CAAD;EAQH,MAAMC,SAAS,GAAGnC,MAAM,CAAiB,IAAjB,CAAxB;EAEAM,SAAS,CAAC;IACR,IAAI6B,SAAS,CAAC5B,OAAd,EAAuB;MACrB4B,SAAS,CAAC5B,OAAV,CAAkB6B,SAAlB,GAA8BL,MAA9B;;GAFK,EAIN,CAACA,MAAD,CAJM,CAAT;EAMA,OACE5E,mBAAA,MAAA;IACEI,KAAK,EAAE;MACLE,MAAM,EAAEuE,WADH;MAELnE,SAAS,EAAEd,YAFN;MAGLsF,UAAU,EAAE9C,GAAG,GAAG,EAAH,GAAQ;;IAEzBnC,SAAS,EAAEC,QAAM,CAAC0E;IAClBG,QAAQ,EAAEA;IACVd,GAAG,EAAEe;GARP,EAUEhF,mBAAA,MAAA;IAAKI,KAAK,EAAE;MAAEE,MAAM,EAAEwE,eAAV;MAA2BK,KAAK,EAAE;;GAA9C,CAVF,CADF;AAcD,CArCM;;ACmCA,MAAMC,QAAQ,GAA4B,CAAC;EAChDxF,YADgD;EAEhDC,UAFgD;EAGhDC,QAHgD;EAIhDC,QAJgD;EAKhDkB,SALgD;EAMhDuB,OANgD;EAOhD9F,KAPgD;EAQhD2I,YARgD;EAShDC,eATgD;EAUhDpE,eAVgD;EAWhDhD,MAXgD;EAYhD2G,WAZgD;EAahDU,WAbgD;EAchDC,wBAdgD;EAehDC,cAfgD;EAgBhDC;AAhBgD,CAAD;EAkB/C,MAAMC,sBAAsB,GAAG9C,MAAM,CAAiB,IAAjB,CAArC;EACAM,SAAS,CAAC;IACR,IAAIwC,sBAAsB,CAACvC,OAA3B,EAAoC;MAClCuC,sBAAsB,CAACvC,OAAvB,CAA+B6B,SAA/B,GAA2CzC,OAA3C;;GAFK,EAIN,CAACA,OAAD,CAJM,CAAT;EAMA,MAAMoD,WAAW,GAAG;IAClBhG,YADkB;IAElBC,UAFkB;IAGlBC,QAHkB;IAIlBC;GAJF;EAMA,MAAM8F,cAAc,GAAGR,YAAY,GAAGA,YAAY,CAAC3D,EAAhB,GAAqB,EAAxD;EACA,MAAMoE,UAAU,GAAG;IACjB7E,SADiB;IAEjBlB,QAFiB;IAGjBF,UAHiB;IAIjBC,QAJiB;IAKjBpD,KALiB;IAMjBwB,MANiB;IAOjB2H,cAAc,EAAEA,cAPC;IAQjBP,eARiB;IASjBpE;GATF;EAYA,OACElB,mBAAA,MAAA;IAAKiE,GAAG,EAAEsB;GAAV,EACEvF,mBAAA,CAACyF,cAAD,oBAAoBG,YAApB,CADF,EAEE5F,mBAAA,MAAA;IACEiE,GAAG,EAAE0B;IACL1F,SAAS,EAAEuF;IACXpF,KAAK,EAAEyE,WAAW,GAAG;MAAEvE,MAAM,EAAEuE;KAAb,GAA6B;GAHjD,EAKE7E,mBAAA,CAAC0F,aAAD,oBAAmBI,WAAnB,CALF,CAFF,CADF;AAYD,CAxDM;;;;ACxBA,MAAMC,QAAQ,GAA4B,CAAC;EAChDrJ,KADgD;EAEhDqB,KAFgD;EAGhDkD,SAHgD;EAIhD+E,QAJgD;EAKhDC,WALgD;EAMhDC,UANgD;EAOhD9D;AAPgD,CAAD;EAS/C,IAAI+D,CAAC,GAAG,CAAR;EACA,MAAMC,QAAQ,GAAiB,EAA/B;EACA,MAAMC,QAAQ,GAAiB,CAC7BrG,mBAAA,OAAA;IACEhF,GAAG,EAAC;IACJsL,CAAC,EAAC;IACFC,EAAE,EAAE;IACJ1C,EAAE,EAAEmC;IACJQ,EAAE,EAAE;IACJvG,SAAS,EAAEC,QAAM,CAACuG;GANpB,CAD6B,CAA/B;;EAUA,KAAK,MAAMzJ,IAAX,IAAmBN,KAAnB,EAA0B;IACxB0J,QAAQ,CAACpI,IAAT,CACEgC,mBAAA,OAAA;MACEhF,GAAG,EAAE,QAAQgC,IAAI,CAAC0E;MAClB4E,CAAC,EAAC;MACFH,CAAC,EAAEA;MACHhB,KAAK,EAAEa;MACP1F,MAAM,EAAEW;MACRhB,SAAS,EAAEC,QAAM,CAACwG;KANpB,CADF;IAUAL,QAAQ,CAACrI,IAAT,CACEgC,mBAAA,OAAA;MACEhF,GAAG,EAAE,YAAYgC,IAAI,CAAC0E;MACtB4E,CAAC,EAAC;MACFC,EAAE,EAAEJ,CAAC,GAAGlF;MACR4C,EAAE,EAAEmC;MACJQ,EAAE,EAAEL,CAAC,GAAGlF;MACRhB,SAAS,EAAEC,QAAM,CAACuG;KANpB,CADF;IAUAN,CAAC,IAAIlF,SAAL;;;EAGF,MAAM0F,GAAG,GAAG,IAAIhL,IAAJ,EAAZ;EACA,IAAIiL,KAAK,GAAG,CAAZ;EACA,MAAMC,KAAK,GAAiB,EAA5B;EACA,IAAIC,KAAK,GAAe9G,mBAAA,OAAA,MAAA,CAAxB;;EACA,KAAK,IAAI+G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhJ,KAAK,CAACyB,MAA1B,EAAkCuH,CAAC,EAAnC,EAAuC;IACrC,MAAMxL,IAAI,GAAGwC,KAAK,CAACgJ,CAAD,CAAlB;IACAF,KAAK,CAAC7I,IAAN,CACEgC,mBAAA,OAAA;MACEhF,GAAG,EAAEO,IAAI,CAACiJ,OAAL;MACLZ,EAAE,EAAEgD;MACJL,EAAE,EAAE;MACJ1C,EAAE,EAAE+C;MACJJ,EAAE,EAAEL;MACJlG,SAAS,EAAEC,QAAM,CAAC8G;KANpB,CADF;;IAUA,IACGD,CAAC,GAAG,CAAJ,KAAUhJ,KAAK,CAACyB,MAAhB,IACCjE,IAAI,CAACiJ,OAAL,KAAiBmC,GAAG,CAACnC,OAAJ,EADlB,IAECzG,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAL,CAAavC,OAAb,MAA0BmC,GAAG,CAACnC,OAAJ,EAF5B,IAICuC,CAAC,KAAK,CAAN,IACCA,CAAC,GAAG,CAAJ,KAAUhJ,KAAK,CAACyB,MADjB,IAECjE,IAAI,CAACiJ,OAAL,KAAiBmC,GAAG,CAACnC,OAAJ,EAFlB,IAGClJ,SAAS,CACPC,IADO,EAEPA,IAAI,CAACiJ,OAAL,KAAiBzG,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAL,CAAavC,OAAb,EAFV,EAGP,aAHO,CAAT,CAIEA,OAJF,MAIemC,GAAG,CAACnC,OAAJ,EAZnB,EAaE;MACAsC,KAAK,GACH9G,mBAAA,OAAA;QACEsG,CAAC,EAAEM;QACHT,CAAC,EAAE;QACHhB,KAAK,EAAEc;QACP3F,MAAM,EAAE6F;QACRc,IAAI,EAAEf;OALR,CADF;;;IAWF,IACE9D,GAAG,IACH2E,CAAC,GAAG,CAAJ,KAAUhJ,KAAK,CAACyB,MADhB,IAEAjE,IAAI,CAACiJ,OAAL,MAAkBmC,GAAG,CAACnC,OAAJ,EAFlB,IAGAzG,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAL,CAAavC,OAAb,KAAyBmC,GAAG,CAACnC,OAAJ,EAJ3B,EAKE;MACAsC,KAAK,GACH9G,mBAAA,OAAA;QACEsG,CAAC,EAAEM,KAAK,GAAGX;QACXE,CAAC,EAAE;QACHhB,KAAK,EAAEc;QACP3F,MAAM,EAAE6F;QACRc,IAAI,EAAEf;OALR,CADF;;;IAUFU,KAAK,IAAIX,WAAT;;;EAEF,OACEjG,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EACED,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EAAqBmG,QAArB,CADF,EAEEpG,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EAAyBoG,QAAzB,CAFF,EAGErG,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EAAsB4G,KAAtB,CAHF,EAIE7G,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EAAsB6G,KAAtB,CAJF,CADF;AAQD,CAhHM;;ACVA,MAAMI,IAAI,GAAwBC,KAAK;EAC5C,OACEnH,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EACED,mBAAA,CAAC+F,QAAD,oBAAcoB,MAAd,CADF,CADF;AAKD,CANM;;;;ACQA,MAAMC,iBAAiB,GAAqC,CAAC;EAClEC,KADkE;EAElEC,MAFkE;EAGlEC,MAHkE;EAIlEC,MAJkE;EAKlEC,KALkE;EAMlEC;AANkE,CAAD;EAQjE,OACE1H,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EACED,mBAAA,OAAA;IACE4D,EAAE,EAAE0D;IACJf,EAAE,EAAEgB;IACJ1D,EAAE,EAAEyD;IACJd,EAAE,EAAEgB;IACJvH,SAAS,EAAEC,QAAM,CAACyH;IAClB3M,GAAG,EAAEqM,KAAK,GAAG;GANf,CADF,EASErH,mBAAA,OAAA;IACEhF,GAAG,EAAEqM,KAAK,GAAG;IACblB,CAAC,EAAEuB;IACHpB,CAAC,EAAEmB;IACHxH,SAAS,EAAEC,QAAM,CAAC0H;GAJpB,EAMGP,KANH,CATF,CADF;AAoBD,CA5BM;;ACYA,MAAMQ,QAAQ,GAA4B,CAAC;EAChDC,SADgD;EAEhD5J,MAFgD;EAGhDvB,QAHgD;EAIhDyF,GAJgD;EAKhDxC,YALgD;EAMhDqG,WANgD;EAOhDpG,UAPgD;EAQhDC;AARgD,CAAD;EAU/C,MAAMiI,wBAAwB,GAAG;IAC/B,MAAMC,SAAS,GAAiB,EAAhC;IACA,MAAMC,YAAY,GAAiB,EAAnC;IACA,MAAMC,gBAAgB,GAAGtI,YAAY,GAAG,GAAxC;;IACA,KAAK,IAAImH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGe,SAAS,CAAC/J,KAAV,CAAgByB,MAApC,EAA4CuH,CAAC,EAA7C,EAAiD;MAC/C,MAAMxL,IAAI,GAAGuM,SAAS,CAAC/J,KAAV,CAAgBgJ,CAAhB,CAAb;MACA,MAAM5I,WAAW,GAAG5C,IAAI,CAACK,WAAL,EAApB;MACAqM,YAAY,CAACjK,IAAb,CACEgC,mBAAA,OAAA;QACEhF,GAAG,EAAEO,IAAI,CAACiJ,OAAL;QACL2B,CAAC,EAAEvG,YAAY,GAAG;QAClB0G,CAAC,EAAEL,WAAW,GAAGc,CAAd,GAAkBd,WAAW,GAAG;QACnChG,SAAS,EAAEC,QAAM,CAACiI;OAJpB,EAMGhK,WANH,CADF;;MAUA,IACE4I,CAAC,KAAK,CAAN,IACAxL,IAAI,CAACK,WAAL,OAAuBkM,SAAS,CAAC/J,KAAV,CAAgBgJ,CAAC,GAAG,CAApB,EAAuBnL,WAAvB,EAFzB,EAGE;QACA,MAAMwM,QAAQ,GAAG7M,IAAI,CAACK,WAAL,GAAmB2D,QAAnB,EAAjB;QACA,IAAIkI,KAAJ;;QACA,IAAIrF,GAAJ,EAAS;UACPqF,KAAK,GAAG,CAAC,IAAIV,CAAJ,GAAQxL,IAAI,CAACK,WAAL,EAAR,GAA6B,CAA9B,IAAmCqK,WAA3C;SADF,MAEO;UACLwB,KAAK,GAAG,CAAC,IAAIV,CAAJ,GAAQxL,IAAI,CAACK,WAAL,EAAT,IAA+BqK,WAAvC;;;QAEF+B,SAAS,CAAChK,IAAV,CACEgC,mBAAA,CAACoH,iBAAD;UACEpM,GAAG,EAAEoN;UACLf,KAAK,EAAEe;UACPd,MAAM,EAAErB,WAAW,GAAGc;UACtBQ,MAAM,EAAE;UACRC,MAAM,EAAE5H;UACR6H,KAAK,EAAEA;UACPC,KAAK,EAAEQ,gBAAgB,GAAG;SAP5B,CADF;;;;IAaJ,OAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;GAzCF;;EA4CA,MAAMI,+BAA+B,GAAG;IACtC,MAAML,SAAS,GAAiB,EAAhC;IACA,MAAMC,YAAY,GAAiB,EAAnC;IACA,MAAMC,gBAAgB,GAAGtI,YAAY,GAAG,GAAxC;;IACA,KAAK,IAAImH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGe,SAAS,CAAC/J,KAAV,CAAgByB,MAApC,EAA4CuH,CAAC,EAA7C,EAAiD;MAC/C,MAAMxL,IAAI,GAAGuM,SAAS,CAAC/J,KAAV,CAAgBgJ,CAAhB,CAAb;MAEA,MAAMuB,OAAO,GAAG,MAAMjJ,IAAI,CAACkJ,KAAL,CAAW,CAAChN,IAAI,CAACM,QAAL,KAAkB,CAAnB,IAAwB,CAAnC,CAAtB;MACAoM,YAAY,CAACjK,IAAb,CACEgC,mBAAA,OAAA;QACEhF,GAAG,EAAEO,IAAI,CAACiJ,OAAL;QACL2B,CAAC,EAAEvG,YAAY,GAAG;QAClB0G,CAAC,EAAEL,WAAW,GAAGc,CAAd,GAAkBd,WAAW,GAAG;QACnChG,SAAS,EAAEC,QAAM,CAACiI;OAJpB,EAMGG,OANH,CADF;;MAUA,IACEvB,CAAC,KAAK,CAAN,IACAxL,IAAI,CAACK,WAAL,OAAuBkM,SAAS,CAAC/J,KAAV,CAAgBgJ,CAAC,GAAG,CAApB,EAAuBnL,WAAvB,EAFzB,EAGE;QACA,MAAMwM,QAAQ,GAAG7M,IAAI,CAACK,WAAL,GAAmB2D,QAAnB,EAAjB;QACA,IAAIkI,KAAJ;;QACA,IAAIrF,GAAJ,EAAS;UACPqF,KAAK,GAAG,CAAC,IAAIV,CAAJ,GAAQxL,IAAI,CAACM,QAAL,EAAR,GAA0B,CAA3B,IAAgCoK,WAAxC;SADF,MAEO;UACLwB,KAAK,GAAG,CAAC,IAAIV,CAAJ,GAAQxL,IAAI,CAACM,QAAL,EAAT,IAA4BoK,WAApC;;;QAEF+B,SAAS,CAAChK,IAAV,CACEgC,mBAAA,CAACoH,iBAAD;UACEpM,GAAG,EAAEoN;UACLf,KAAK,EAAEe;UACPd,MAAM,EAAErB,WAAW,GAAGc;UACtBQ,MAAM,EAAE;UACRC,MAAM,EAAEU;UACRT,KAAK,EAAEpI,IAAI,CAACmJ,GAAL,CAASf,KAAT;UACPC,KAAK,EAAEQ,gBAAgB,GAAG;SAP5B,CADF;;;;IAaJ,OAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;GA1CF;;EA6CA,MAAMQ,yBAAyB,GAAG;IAChC,MAAMT,SAAS,GAAiB,EAAhC;IACA,MAAMC,YAAY,GAAiB,EAAnC;IACA,MAAMC,gBAAgB,GAAGtI,YAAY,GAAG,GAAxC;;IACA,KAAK,IAAImH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGe,SAAS,CAAC/J,KAAV,CAAgByB,MAApC,EAA4CuH,CAAC,EAA7C,EAAiD;MAC/C,MAAMxL,IAAI,GAAGuM,SAAS,CAAC/J,KAAV,CAAgBgJ,CAAhB,CAAb;MACA,MAAM5I,WAAW,GAAGF,cAAc,CAAC1C,IAAD,EAAO2C,MAAP,CAAlC;MACA+J,YAAY,CAACjK,IAAb,CACEgC,mBAAA,OAAA;QACEhF,GAAG,EAAEmD,WAAW,GAAG5C,IAAI,CAACK,WAAL;QACnBuK,CAAC,EAAEvG,YAAY,GAAG;QAClB0G,CAAC,EAAEL,WAAW,GAAGc,CAAd,GAAkBd,WAAW,GAAG;QACnChG,SAAS,EAAEC,QAAM,CAACiI;OAJpB,EAMGhK,WANH,CADF;;MAUA,IACE4I,CAAC,KAAK,CAAN,IACAxL,IAAI,CAACK,WAAL,OAAuBkM,SAAS,CAAC/J,KAAV,CAAgBgJ,CAAC,GAAG,CAApB,EAAuBnL,WAAvB,EAFzB,EAGE;QACA,MAAMwM,QAAQ,GAAG7M,IAAI,CAACK,WAAL,GAAmB2D,QAAnB,EAAjB;QACA,IAAIkI,KAAJ;;QACA,IAAIrF,GAAJ,EAAS;UACPqF,KAAK,GAAG,CAAC,IAAIV,CAAJ,GAAQxL,IAAI,CAACM,QAAL,EAAR,GAA0B,CAA3B,IAAgCoK,WAAxC;SADF,MAEO;UACLwB,KAAK,GAAG,CAAC,IAAIV,CAAJ,GAAQxL,IAAI,CAACM,QAAL,EAAT,IAA4BoK,WAApC;;;QAEF+B,SAAS,CAAChK,IAAV,CACEgC,mBAAA,CAACoH,iBAAD;UACEpM,GAAG,EAAEoN;UACLf,KAAK,EAAEe;UACPd,MAAM,EAAErB,WAAW,GAAGc;UACtBQ,MAAM,EAAE;UACRC,MAAM,EAAEU;UACRT,KAAK,EAAEA;UACPC,KAAK,EAAEQ,gBAAgB,GAAG;SAP5B,CADF;;;;IAaJ,OAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;GAzCF;;EA4CA,MAAMS,wBAAwB,GAAG;IAC/B,MAAMV,SAAS,GAAiB,EAAhC;IACA,MAAMC,YAAY,GAAiB,EAAnC;IACA,IAAIU,UAAU,GAAW,CAAzB;IACA,MAAMT,gBAAgB,GAAGtI,YAAY,GAAG,GAAxC;IACA,MAAM7B,KAAK,GAAG+J,SAAS,CAAC/J,KAAxB;;IACA,KAAK,IAAIgJ,CAAC,GAAGhJ,KAAK,CAACyB,MAAN,GAAe,CAA5B,EAA+BuH,CAAC,IAAI,CAApC,EAAuCA,CAAC,EAAxC,EAA4C;MAC1C,MAAMxL,IAAI,GAAGwC,KAAK,CAACgJ,CAAD,CAAlB;MACA,IAAIqB,QAAQ,GAAG,EAAf;;MACA,IAAIrB,CAAC,KAAK,CAAN,IAAWxL,IAAI,CAACM,QAAL,OAAoBkC,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAL,CAAalL,QAAb,EAAnC,EAA4D;QAE1DuM,QAAQ,MAAMnK,cAAc,CAAC1C,IAAD,EAAO2C,MAAP,MAAmB3C,IAAI,CAACK,WAAL,IAA/C;;;MAGF,MAAMuC,WAAW,OAAOW,oBAAoB,CAACvD,IAAD,GAA5C;MAEA0M,YAAY,CAACjK,IAAb,CACEgC,mBAAA,OAAA;QACEhF,GAAG,EAAEO,IAAI,CAACiJ,OAAL;QACL2B,CAAC,EAAEvG,YAAY,GAAG;QAClB0G,CAAC,EAAEL,WAAW,IAAIc,CAAC,GAAG,CAAC3E,GAAT;QACdnC,SAAS,EAAEC,QAAM,CAACiI;OAJpB,EAMGhK,WANH,CADF;;MAWA,IAAIiK,QAAJ,EAAc;QAEZ,IAAIrB,CAAC,KAAKhJ,KAAK,CAACyB,MAAN,GAAe,CAAzB,EAA4B;UAC1BwI,SAAS,CAAChK,IAAV,CACEgC,mBAAA,CAACoH,iBAAD;YACEpM,GAAG,EAAEoN;YACLf,KAAK,EAAEe;YACPd,MAAM,EAAErB,WAAW,GAAGc,CAAd,GAAkB4B,UAAU,GAAG1C;YACvCsB,MAAM,EAAE;YACRC,MAAM,EAAEU;YACRT,KAAK,EAAExB,WAAW,GAAGc,CAAd,GAAkBd,WAAW,GAAG0C,UAAd,GAA2B;YACpDjB,KAAK,EAAEQ,gBAAgB,GAAG;WAP5B,CADF;;;QAYFS,UAAU,GAAG,CAAb;;;MAEFA,UAAU;;;IAEZ,OAAO,CAACX,SAAD,EAAYC,YAAZ,CAAP;GA9CF;;EAiDA,MAAMW,uBAAuB,GAAG;IAC9B,MAAMZ,SAAS,GAAiB,EAAhC;IACA,MAAMC,YAAY,GAAiB,EAAnC;IACA,MAAMC,gBAAgB,GAAGtI,YAAY,GAAG,GAAxC;IACA,MAAM7B,KAAK,GAAG+J,SAAS,CAAC/J,KAAxB;;IACA,KAAK,IAAIgJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhJ,KAAK,CAACyB,MAA1B,EAAkCuH,CAAC,EAAnC,EAAuC;MACrC,MAAMxL,IAAI,GAAGwC,KAAK,CAACgJ,CAAD,CAAlB;MACA,MAAM5I,WAAW,MAAMK,iBAAiB,CAACjD,IAAD,EAAO2C,MAAP,EAAe,OAAf,MAA4B3C,IAAI,CACrEO,OADiE,GAEjEyD,QAFiE,IAApE;MAIA0I,YAAY,CAACjK,IAAb,CACEgC,mBAAA,OAAA;QACEhF,GAAG,EAAEO,IAAI,CAACiJ,OAAL;QACL2B,CAAC,EAAEvG,YAAY,GAAG;QAClB0G,CAAC,EAAEL,WAAW,GAAGc,CAAd,GAAkBd,WAAW,GAAG;QACnChG,SAAS,EAAEC,QAAM,CAACiI;OAJpB,EAMGhK,WANH,CADF;;MAUA,IACE4I,CAAC,GAAG,CAAJ,KAAUhJ,KAAK,CAACyB,MAAhB,IACAjE,IAAI,CAACM,QAAL,OAAoBkC,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAL,CAAalL,QAAb,EAFtB,EAGE;QACA,MAAMuM,QAAQ,GAAGnK,cAAc,CAAC1C,IAAD,EAAO2C,MAAP,CAA/B;QAEA8J,SAAS,CAAChK,IAAV,CACEgC,mBAAA,CAACoH,iBAAD;UACEpM,GAAG,EAAEoN,QAAQ,GAAG7M,IAAI,CAACK,WAAL;UAChByL,KAAK,EAAEe;UACPd,MAAM,EAAErB,WAAW,IAAIc,CAAC,GAAG,CAAR;UACnBQ,MAAM,EAAE;UACRC,MAAM,EAAEU;UACRT,KAAK,EACHxB,WAAW,IAAIc,CAAC,GAAG,CAAR,CAAX,GACAtH,cAAc,CAAClE,IAAI,CAACM,QAAL,EAAD,EAAkBN,IAAI,CAACK,WAAL,EAAlB,CAAd,GACEqK,WADF,GAEE;UAEJyB,KAAK,EAAEQ,gBAAgB,GAAG;SAZ5B,CADF;;;;IAkBJ,OAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;GA7CF;;EAgDA,MAAMY,6BAA6B,GAAG;IACpC,MAAMb,SAAS,GAAiB,EAAhC;IACA,MAAMC,YAAY,GAAiB,EAAnC;IACA,MAAMpB,KAAK,GAAGlK,QAAQ,KAAKhC,QAAQ,CAAC8C,OAAtB,GAAgC,CAAhC,GAAoC,CAAlD;IACA,MAAMyK,gBAAgB,GAAGtI,YAAY,GAAG,GAAxC;IACA,MAAM7B,KAAK,GAAG+J,SAAS,CAAC/J,KAAxB;;IACA,KAAK,IAAIgJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhJ,KAAK,CAACyB,MAA1B,EAAkCuH,CAAC,EAAnC,EAAuC;MACrC,MAAMxL,IAAI,GAAGwC,KAAK,CAACgJ,CAAD,CAAlB;MACA,MAAM5I,WAAW,GAAGtD,uBAAuB,CAACqD,MAAD,EAAS;QAClD4K,IAAI,EAAE;OADmC,CAAvB,CAEjBzK,MAFiB,CAEV9C,IAFU,CAApB;MAIA0M,YAAY,CAACjK,IAAb,CACEgC,mBAAA,OAAA;QACEhF,GAAG,EAAEO,IAAI,CAACiJ,OAAL;QACL2B,CAAC,EAAEvG,YAAY,GAAG;QAClB0G,CAAC,EAAEL,WAAW,IAAIc,CAAC,GAAG,CAAC3E,GAAT;QACdnC,SAAS,EAAEC,QAAM,CAACiI;QAClBtI,UAAU,EAAEA;OALd,EAOG1B,WAPH,CADF;;MAWA,IAAI4I,CAAC,KAAK,CAAN,IAAWxL,IAAI,CAACO,OAAL,OAAmBiC,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAL,CAAajL,OAAb,EAAlC,EAA0D;QACxD,MAAMsM,QAAQ,MAAM5J,iBAAiB,CACnCjD,IADmC,EAEnC2C,MAFmC,EAGnC,OAHmC,MAI/B3C,IAAI,CAACO,OAAL,MAAkBmC,cAAc,CAAC1C,IAAD,EAAO2C,MAAP,GAJtC;QAKA8J,SAAS,CAAChK,IAAV,CACEgC,mBAAA,CAACoH,iBAAD;UACEpM,GAAG,EAAEoN,QAAQ,GAAG7M,IAAI,CAACK,WAAL;UAChByL,KAAK,EAAEe;UACPd,MAAM,EAAErB,WAAW,GAAGc,CAAd,GAAkBF,KAAK,GAAGZ;UAClCsB,MAAM,EAAE;UACRC,MAAM,EAAEU;UACRT,KAAK,EAAExB,WAAW,GAAGc,CAAd,GAAkBF,KAAK,GAAGZ,WAAR,GAAsB;UAC/CyB,KAAK,EAAEQ,gBAAgB,GAAG;SAP5B,CADF;;;;IAcJ,OAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;GA3CF;;EA8CA,MAAMc,wBAAwB,GAAG;IAC/B,MAAMf,SAAS,GAAiB,EAAhC;IACA,MAAMC,YAAY,GAAiB,EAAnC;IACA,MAAMC,gBAAgB,GAAGtI,YAAY,GAAG,GAAxC;IACA,MAAM7B,KAAK,GAAG+J,SAAS,CAAC/J,KAAxB;;IACA,KAAK,IAAIgJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhJ,KAAK,CAACyB,MAA1B,EAAkCuH,CAAC,EAAnC,EAAuC;MACrC,MAAMxL,IAAI,GAAGwC,KAAK,CAACgJ,CAAD,CAAlB;MACA,MAAM5I,WAAW,GAAGtD,uBAAuB,CAACqD,MAAD,EAAS;QAClD4K,IAAI,EAAE;OADmC,CAAvB,CAEjBzK,MAFiB,CAEV9C,IAFU,CAApB;MAIA0M,YAAY,CAACjK,IAAb,CACEgC,mBAAA,OAAA;QACEhF,GAAG,EAAEO,IAAI,CAACiJ,OAAL;QACL2B,CAAC,EAAEvG,YAAY,GAAG;QAClB0G,CAAC,EAAEL,WAAW,IAAIc,CAAC,GAAG,CAAC3E,GAAT;QACdnC,SAAS,EAAEC,QAAM,CAACiI;QAClBtI,UAAU,EAAEA;OALd,EAOG1B,WAPH,CADF;;MAWA,IAAI4I,CAAC,KAAK,CAAN,IAAWxL,IAAI,CAACO,OAAL,OAAmBiC,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAL,CAAajL,OAAb,EAAlC,EAA0D;QACxD,MAAMkN,WAAW,GAAGjL,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAzB;QACA,MAAMqB,QAAQ,MAAM5J,iBAAiB,CACnCwK,WADmC,EAEnC9K,MAFmC,EAGnC,MAHmC,MAI/B8K,WAAW,CAAClN,OAAZ,MAAyBmC,cAAc,CAAC+K,WAAD,EAAc9K,MAAd,GAJ7C;QAKA,MAAM+K,WAAW,GAAG,CAAC1N,IAAI,CAACQ,QAAL,KAAkB,EAAnB,IAAyB,CAA7C;QACAiM,SAAS,CAAChK,IAAV,CACEgC,mBAAA,CAACoH,iBAAD;UACEpM,GAAG,EAAEoN,QAAQ,GAAGY,WAAW,CAACpN,WAAZ;UAChByL,KAAK,EAAEe;UACPd,MAAM,EAAErB,WAAW,GAAGc;UACtBQ,MAAM,EAAE;UACRC,MAAM,EAAEU;UACRT,KAAK,EAAExB,WAAW,IAAIc,CAAC,GAAGkC,WAAR;UAClBvB,KAAK,EAAEQ,gBAAgB,GAAG;SAP5B,CADF;;;;IAcJ,OAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;GA5CF;;EA+CA,IAAID,SAAS,GAAiB,EAA9B;EACA,IAAIC,YAAY,GAAiB,EAAjC;;EACA,QAAQH,SAAS,CAACnL,QAAlB;IACE,KAAKhC,QAAQ,CAACuC,IAAd;MACE,CAAC8K,SAAD,EAAYC,YAAZ,IAA4BF,wBAAwB,EAApD;MACA;;IACF,KAAKpN,QAAQ,CAACwC,WAAd;MACE,CAAC6K,SAAD,EAAYC,YAAZ,IAA4BI,+BAA+B,EAA3D;MACA;;IACF,KAAK1N,QAAQ,CAACyC,KAAd;MACE,CAAC4K,SAAD,EAAYC,YAAZ,IAA4BQ,yBAAyB,EAArD;MACA;;IACF,KAAK9N,QAAQ,CAAC0C,IAAd;MACE,CAAC2K,SAAD,EAAYC,YAAZ,IAA4BS,wBAAwB,EAApD;MACA;;IACF,KAAK/N,QAAQ,CAAC4C,GAAd;MACE,CAACyK,SAAD,EAAYC,YAAZ,IAA4BW,uBAAuB,EAAnD;MACA;;IACF,KAAKjO,QAAQ,CAAC6C,UAAd;IACA,KAAK7C,QAAQ,CAAC8C,OAAd;MACE,CAACuK,SAAD,EAAYC,YAAZ,IAA4BY,6BAA6B,EAAzD;MACA;;IACF,KAAKlO,QAAQ,CAAC+C,IAAd;MACE,CAACsK,SAAD,EAAYC,YAAZ,IAA4Bc,wBAAwB,EAApD;;;EAEJ,OACE/I,mBAAA,IAAA;IAAGC,SAAS,EAAC;IAAWH,QAAQ,EAAEA;IAAUD,UAAU,EAAEA;GAAxD,EACEG,mBAAA,OAAA;IACEsG,CAAC,EAAE;IACHH,CAAC,EAAE;IACHhB,KAAK,EAAEc,WAAW,GAAG6B,SAAS,CAAC/J,KAAV,CAAgByB;IACrCc,MAAM,EAAEV;IACRK,SAAS,EAAEC,QAAM,CAACgJ;GALpB,CADF,EAQGjB,YARH,KAAA,EAQkBD,SARlB,CADF;AAYD,CAlXM;;ACbA,MAAMmB,KAAK,GAAyB,CAAC;EAC1CC,QAD0C;EAE1CC,MAF0C;EAG1CpI,SAH0C;EAI1CqI,UAJ0C;EAK1C7G,WAL0C;EAM1CL;AAN0C,CAAD;EAQzC,IAAImH,IAAJ;EACA,IAAIC,cAAJ;;EACA,IAAIpH,GAAJ,EAAS;IACP,CAACmH,IAAD,EAAOC,cAAP,IAAyBC,uBAAuB,CAC9CL,QAD8C,EAE9CC,MAF8C,EAG9CpI,SAH8C,EAI9CqI,UAJ8C,EAK9C7G,WAL8C,CAAhD;GADF,MAQO;IACL,CAAC8G,IAAD,EAAOC,cAAP,IAAyBE,oBAAoB,CAC3CN,QAD2C,EAE3CC,MAF2C,EAG3CpI,SAH2C,EAI3CqI,UAJ2C,EAK3C7G,WAL2C,CAA7C;;;EASF,OACEzC,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EACED,mBAAA,OAAA;IAAM2J,WAAW,EAAC;IAAMC,CAAC,EAAEL;IAAMtC,IAAI,EAAC;GAAtC,CADF,EAEEjH,mBAAA,UAAA;IAAS6J,MAAM,EAAEL;GAAjB,CAFF,CADF;AAMD,CAlCM;;AAoCP,MAAME,oBAAoB,GAAG,CAC3BN,QAD2B,EAE3BC,MAF2B,EAG3BpI,SAH2B,EAI3BqI,UAJ2B,EAK3B7G,WAL2B;EAO3B,MAAMqH,YAAY,GAAGV,QAAQ,CAAC1F,KAAT,GAAiB2F,MAAM,CAAC3F,KAAxB,GAAgC,CAAC,CAAjC,GAAqC,CAA1D;EACA,MAAMqG,iBAAiB,GAAGV,MAAM,CAAClD,CAAP,GAAWmD,UAAU,GAAG,CAAlD;EACA,MAAMU,mBAAmB,GAAGZ,QAAQ,CAACvF,EAAT,GAAcpB,WAAW,GAAG,CAAxD;EACA,MAAMwH,6BAA6B,GACjCD,mBAAmB,GAAGX,MAAM,CAACzF,EAA7B,GAAkC,EAAlC,QAA4CyF,MAAM,CAACzF,EAAP,GAAYnB,aAD1D;EAEA,MAAMyH,2BAA2B,GAC/BF,mBAAmB,GAAGX,MAAM,CAACzF,EAA7B,GACInB,WADJ,GAEI4G,MAAM,CAACzF,EAAP,GAAYwF,QAAQ,CAACvF,EAArB,GAA0BpB,WAHhC;EAKA,MAAM8G,IAAI,QAAQH,QAAQ,CAACvF,MAAMuF,QAAQ,CAACjD,CAAT,GAAamD,UAAU,GAAG;MACvD7G;MACCqH,YAAY,GAAG7I,SAAhB,GAA6B;IAC/BgJ;MACEF;MACAG,6BALJ;EAOA,MAAMV,cAAc,MAAMH,MAAM,CAACzF,MAAMmG;IACrCV,MAAM,CAACzF,EAAP,GAAY,KAAKmG,iBAAiB,GAAG;IACrCV,MAAM,CAACzF,EAAP,GAAY,KAAKmG,iBAAiB,GAAG,GAFvC;EAGA,OAAO,CAACR,IAAD,EAAOC,cAAP,CAAP;AACD,CA5BD;;AA8BA,MAAMC,uBAAuB,GAAG,CAC9BL,QAD8B,EAE9BC,MAF8B,EAG9BpI,SAH8B,EAI9BqI,UAJ8B,EAK9B7G,WAL8B;EAO9B,MAAMqH,YAAY,GAAGV,QAAQ,CAAC1F,KAAT,GAAiB2F,MAAM,CAAC3F,KAAxB,GAAgC,CAAC,CAAjC,GAAqC,CAA1D;EACA,MAAMqG,iBAAiB,GAAGV,MAAM,CAAClD,CAAP,GAAWmD,UAAU,GAAG,CAAlD;EACA,MAAMU,mBAAmB,GAAGZ,QAAQ,CAACxF,EAAT,GAAcnB,WAAW,GAAG,CAAxD;EACA,MAAMwH,6BAA6B,GACjCD,mBAAmB,GAAGX,MAAM,CAACxF,EAA7B,GAAkC,EAAlC,QAA4CwF,MAAM,CAACxF,EAAP,GAAYpB,aAD1D;EAEA,MAAMyH,2BAA2B,GAC/BF,mBAAmB,GAAGX,MAAM,CAACxF,EAA7B,GACI,CAACpB,WADL,GAEI4G,MAAM,CAACxF,EAAP,GAAYuF,QAAQ,CAACxF,EAArB,GAA0BnB,WAHhC;EAKA,MAAM8G,IAAI,QAAQH,QAAQ,CAACxF,MAAMwF,QAAQ,CAACjD,CAAT,GAAamD,UAAU,GAAG;MACvD,CAAC7G;MACAqH,YAAY,GAAG7I,SAAhB,GAA6B;IAC/BgJ;MACEF;MACAG,6BALJ;EAOA,MAAMV,cAAc,MAAMH,MAAM,CAACxF,MAAMkG;IACrCV,MAAM,CAACxF,EAAP,GAAY,KAAKkG,iBAAiB,GAAG;IACrCV,MAAM,CAACxF,EAAP,GAAY,KAAKkG,iBAAiB,GAAG,GAFvC;EAGA,OAAO,CAACR,IAAD,EAAOC,cAAP,CAAP;AACD,CA5BD;;ACzEO,MAAMW,iBAAiB,GAAG,CAC/BzN,KAD+B,EAE/BqB,KAF+B,EAG/BkI,WAH+B,EAI/BhF,SAJ+B,EAK/BqI,UAL+B,EAM/Bc,eAN+B,EAO/BC,WAP+B,EAQ/BjI,GAR+B,EAS/BkI,gBAT+B,EAU/BC,wBAV+B,EAW/BC,kBAX+B,EAY/BC,0BAZ+B,EAa/BC,oBAb+B,EAc/BC,4BAd+B,EAe/BC,sBAf+B,EAgB/BC,8BAhB+B,EAiB/BC,wBAjB+B,EAkB/BC,gCAlB+B;EAoB/B,IAAIC,QAAQ,GAAGtO,KAAK,CAAC2E,GAAN,CAAU,CAACC,CAAD,EAAIyF,CAAJ;IACvB,OAAOkE,gBAAgB,CACrB3J,CADqB,EAErByF,CAFqB,EAGrBhJ,KAHqB,EAIrBkI,WAJqB,EAKrBhF,SALqB,EAMrBqI,UANqB,EAOrBc,eAPqB,EAQrBC,WARqB,EASrBjI,GATqB,EAUrBkI,gBAVqB,EAWrBC,wBAXqB,EAYrBC,kBAZqB,EAarBC,0BAbqB,EAcrBC,oBAdqB,EAerBC,4BAfqB,EAgBrBC,sBAhBqB,EAiBrBC,8BAjBqB,EAkBrBC,wBAlBqB,EAmBrBC,gCAnBqB,CAAvB;GADa,CAAf;EAyBAC,QAAQ,GAAGA,QAAQ,CAAC3J,GAAT,CAAarE,IAAI;IAC1B,MAAMkO,YAAY,GAAGlO,IAAI,CAACkO,YAAL,IAAqB,EAA1C;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,YAAY,CAAC1L,MAAjC,EAAyC2L,CAAC,EAA1C,EAA8C;MAC5C,MAAMC,UAAU,GAAGJ,QAAQ,CAACK,SAAT,CACjBhE,KAAK,IAAIA,KAAK,CAAC3F,EAAN,KAAawJ,YAAY,CAACC,CAAD,CADjB,CAAnB;MAGA,IAAIC,UAAU,KAAK,CAAC,CAApB,EAAuBJ,QAAQ,CAACI,UAAD,CAAR,CAAqBE,WAArB,CAAiCtN,IAAjC,CAAsChB,IAAtC;;;IAEzB,OAAOA,IAAP;GARS,CAAX;EAWA,OAAOgO,QAAP;AACD,CAzDM;;AA2DP,MAAMC,gBAAgB,GAAG,CACvBjO,IADuB,EAEvB0G,KAFuB,EAGvB3F,KAHuB,EAIvBkI,WAJuB,EAKvBhF,SALuB,EAMvBqI,UANuB,EAOvBc,eAPuB,EAQvBC,WARuB,EASvBjI,GATuB,EAUvBkI,gBAVuB,EAWvBC,wBAXuB,EAYvBC,kBAZuB,EAavBC,0BAbuB,EAcvBC,oBAduB,EAevBC,4BAfuB,EAgBvBC,sBAhBuB,EAiBvBC,8BAjBuB,EAkBvBC,wBAlBuB,EAmBvBC,gCAnBuB;EAqBvB,IAAIQ,OAAJ;;EACA,QAAQvO,IAAI,CAACwO,IAAb;IACE,KAAK,WAAL;MACED,OAAO,GAAGE,kBAAkB,CAC1BzO,IAD0B,EAE1B0G,KAF0B,EAG1B3F,KAH0B,EAI1BkI,WAJ0B,EAK1BhF,SAL0B,EAM1BqI,UAN0B,EAO1Bc,eAP0B,EAQ1BC,WAR0B,EAS1BS,wBAT0B,EAU1BC,gCAV0B,CAA5B;MAYA;;IACF,KAAK,SAAL;MACEQ,OAAO,GAAGG,YAAY,CACpB1O,IADoB,EAEpB0G,KAFoB,EAGpB3F,KAHoB,EAIpBkI,WAJoB,EAKpBhF,SALoB,EAMpBqI,UANoB,EAOpBc,eAPoB,EAQpBC,WARoB,EASpBjI,GAToB,EAUpBsI,oBAVoB,EAWpBC,4BAXoB,EAYpBC,sBAZoB,EAapBC,8BAboB,CAAtB;MAeA;;IACF;MACEU,OAAO,GAAGG,YAAY,CACpB1O,IADoB,EAEpB0G,KAFoB,EAGpB3F,KAHoB,EAIpBkI,WAJoB,EAKpBhF,SALoB,EAMpBqI,UANoB,EAOpBc,eAPoB,EAQpBC,WARoB,EASpBjI,GAToB,EAUpBkI,gBAVoB,EAWpBC,wBAXoB,EAYpBC,kBAZoB,EAapBC,0BAboB,CAAtB;MAeA;;;EAEJ,OAAOc,OAAP;AACD,CAzED;;AA2EA,MAAMG,YAAY,GAAG,CACnB1O,IADmB,EAEnB0G,KAFmB,EAGnB3F,KAHmB,EAInBkI,WAJmB,EAKnBhF,SALmB,EAMnBqI,UANmB,EAOnBc,eAPmB,EAQnBC,WARmB,EASnBjI,GATmB,EAUnBkI,gBAVmB,EAWnBC,wBAXmB,EAYnBC,kBAZmB,EAanBC,0BAbmB;EAenB,IAAI7G,EAAJ;EACA,IAAIC,EAAJ;;EACA,IAAIzB,GAAJ,EAAS;IACPyB,EAAE,GAAG8H,kBAAkB,CAAC3O,IAAI,CAACF,KAAN,EAAaiB,KAAb,EAAoBkI,WAApB,CAAvB;IACArC,EAAE,GAAG+H,kBAAkB,CAAC3O,IAAI,CAACC,GAAN,EAAWc,KAAX,EAAkBkI,WAAlB,CAAvB;GAFF,MAGO;IACLrC,EAAE,GAAGgI,eAAe,CAAC5O,IAAI,CAACF,KAAN,EAAaiB,KAAb,EAAoBkI,WAApB,CAApB;IACApC,EAAE,GAAG+H,eAAe,CAAC5O,IAAI,CAACC,GAAN,EAAWc,KAAX,EAAkBkI,WAAlB,CAApB;;;EAEF,IAAI4F,YAAY,GAAqB7O,IAAI,CAACwO,IAA1C;;EACA,IAAIK,YAAY,KAAK,MAAjB,IAA2BhI,EAAE,GAAGD,EAAL,GAAUyG,WAAW,GAAG,CAAvD,EAA0D;IACxDwB,YAAY,GAAG,WAAf;IACAhI,EAAE,GAAGD,EAAE,GAAGyG,WAAW,GAAG,CAAxB;;;EAGF,MAAM,CAACyB,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrDpI,EADqD,EAErDC,EAFqD,EAGrD7G,IAAI,CAAC0H,QAHgD,EAIrDtC,GAJqD,CAAvD;EAMA,MAAM+D,CAAC,GAAG8F,eAAe,CAACvI,KAAD,EAAQzC,SAAR,EAAmBqI,UAAnB,CAAzB;EACA,MAAM9H,YAAY,GAAGxE,IAAI,CAACwO,IAAL,KAAc,SAAd,GAA0BxO,IAAI,CAACwE,YAA/B,GAA8C0K,SAAnE;EAEA,MAAMhM,MAAM,GAAG;IACbiM,eAAe,EAAE3B,kBADJ;IAEb4B,uBAAuB,EAAE3B,0BAFZ;IAGb4B,aAAa,EAAE/B,gBAHF;IAIbgC,qBAAqB,EAAE/B,wBAJV;IAKb,GAAGvN,IAAI,CAACkD;GALV;EAOA,OAAO,EACL,GAAGlD,IADE;IAEL6O,YAFK;IAGLjI,EAHK;IAILC,EAJK;IAKLsC,CALK;IAMLzC,KANK;IAOLqI,SAPK;IAQLD,aARK;IASL1B,eATK;IAULC,WAVK;IAWL7I,YAXK;IAYLlB,MAAM,EAAEgJ,UAZH;IAaLgC,WAAW,EAAE,EAbR;IAcLpL;GAdF;AAgBD,CA9DD;;AAgEA,MAAMuL,kBAAkB,GAAG,CACzBzO,IADyB,EAEzB0G,KAFyB,EAGzB3F,KAHyB,EAIzBkI,WAJyB,EAKzBhF,SALyB,EAMzBqI,UANyB,EAOzBc,eAPyB,EAQzBC,WARyB,EASzBS,wBATyB,EAUzBC,gCAVyB;EAYzB,MAAMzE,CAAC,GAAGsF,eAAe,CAAC5O,IAAI,CAACF,KAAN,EAAaiB,KAAb,EAAoBkI,WAApB,CAAzB;EACA,MAAME,CAAC,GAAG8F,eAAe,CAACvI,KAAD,EAAQzC,SAAR,EAAmBqI,UAAnB,CAAzB;EAEA,MAAM1F,EAAE,GAAG0C,CAAC,GAAGgD,UAAU,GAAG,GAA5B;EACA,MAAMzF,EAAE,GAAGyC,CAAC,GAAGgD,UAAU,GAAG,GAA5B;EAEA,MAAMiD,aAAa,GAAGjD,UAAU,GAAG,KAAnC;EACA,MAAMpJ,MAAM,GAAG;IACbiM,eAAe,EAAErB,wBADJ;IAEbsB,uBAAuB,EAAErB,gCAFZ;IAGbsB,aAAa,EAAE,EAHF;IAIbC,qBAAqB,EAAE,EAJV;IAKb,GAAGtP,IAAI,CAACkD;GALV;EAOA,OAAO,EACL,GAAGlD,IADE;IAELC,GAAG,EAAED,IAAI,CAACF,KAFL;IAGL8G,EAHK;IAILC,EAJK;IAKLsC,CALK;IAMLzC,KANK;IAOLqI,SAAS,EAAE,CAPN;IAQLD,aAAa,EAAE,CARV;IASL1B,eATK;IAULC,WAVK;IAWLwB,YAAY,EAAE7O,IAAI,CAACwO,IAXd;IAYL9G,QAAQ,EAAE,CAZL;IAaLpE,MAAM,EAAEiM,aAbH;IAcL/K,YAAY,EAAE0K,SAdT;IAeLZ,WAAW,EAAE,EAfR;IAgBLpL;GAhBF;AAkBD,CA5CD;;AA8CA,MAAM0L,eAAe,GAAG,CAACY,KAAD,EAAczO,KAAd,EAA6BkI,WAA7B;EACtB,MAAMvC,KAAK,GAAG3F,KAAK,CAACsN,SAAN,CAAgBzB,CAAC,IAAIA,CAAC,CAACpF,OAAF,MAAegI,KAAK,CAAChI,OAAN,EAApC,IAAuD,CAArE;EAEA,MAAMiI,eAAe,GAAGD,KAAK,CAAChI,OAAN,KAAkBzG,KAAK,CAAC2F,KAAD,CAAL,CAAac,OAAb,EAA1C;EACA,MAAMkI,iBAAiB,GACrBD,eAAe,IAAI1O,KAAK,CAAC2F,KAAK,GAAG,CAAT,CAAL,CAAiBc,OAAjB,KAA6BzG,KAAK,CAAC2F,KAAD,CAAL,CAAac,OAAb,EAAjC,CADjB;EAEA,MAAM8B,CAAC,GAAG5C,KAAK,GAAGuC,WAAR,GAAsByG,iBAAiB,GAAGzG,WAApD;EACA,OAAOK,CAAP;AACD,CARD;;AASA,MAAMqF,kBAAkB,GAAG,CACzBa,KADyB,EAEzBzO,KAFyB,EAGzBkI,WAHyB;EAKzB,IAAIK,CAAC,GAAGsF,eAAe,CAACY,KAAD,EAAQzO,KAAR,EAAekI,WAAf,CAAvB;EACAK,CAAC,IAAIL,WAAL;EACA,OAAOK,CAAP;AACD,CARD;;AASA,MAAM2F,eAAe,GAAG,CACtBvI,KADsB,EAEtBzC,SAFsB,EAGtBqI,UAHsB;EAKtB,MAAMnD,CAAC,GAAGzC,KAAK,GAAGzC,SAAR,GAAoB,CAACA,SAAS,GAAGqI,UAAb,IAA2B,CAAzD;EACA,OAAOnD,CAAP;AACD,CAPD;;AASA,AAAO,MAAM6F,oBAAoB,GAAG,CAClCW,MADkC,EAElCC,MAFkC,EAGlClI,QAHkC,EAIlCtC,GAJkC;EAMlC,MAAM0J,aAAa,GAAG,CAACc,MAAM,GAAGD,MAAV,IAAoBjI,QAApB,GAA+B,IAArD;EACA,IAAIqH,SAAJ;;EACA,IAAI3J,GAAJ,EAAS;IACP2J,SAAS,GAAGa,MAAM,GAAGd,aAArB;GADF,MAEO;IACLC,SAAS,GAAGY,MAAZ;;;EAEF,OAAO,CAACb,aAAD,EAAgBC,SAAhB,CAAP;AACD,CAdM;AAgBP;AAWA,MAAMc,WAAW,GAAG,CAACvG,CAAD,EAAYtJ,IAAZ;EAClB,IAAIsJ,CAAC,IAAItJ,IAAI,CAAC6G,EAAd,EAAkB,OAAO,GAAP,CAAlB,KACK,IAAIyC,CAAC,IAAItJ,IAAI,CAAC4G,EAAd,EAAkB,OAAO,CAAP,CAAlB,KACA;IACH,MAAMkJ,QAAQ,GAAG9P,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAAC4G,EAAhC;IACA,MAAMmJ,eAAe,GAAG1N,IAAI,CAAC2N,KAAL,CAAY,CAAC1G,CAAC,GAAGtJ,IAAI,CAAC4G,EAAV,IAAgB,GAAjB,GAAwBkJ,QAAnC,CAAxB;IACA,OAAOC,eAAP;;AAEH,CARD;;AASA,MAAME,cAAc,GAAG,CAAC3G,CAAD,EAAYtJ,IAAZ;EACrB,IAAIsJ,CAAC,IAAItJ,IAAI,CAAC6G,EAAd,EAAkB,OAAO,CAAP,CAAlB,KACK,IAAIyC,CAAC,IAAItJ,IAAI,CAAC4G,EAAd,EAAkB,OAAO,GAAP,CAAlB,KACA;IACH,MAAMkJ,QAAQ,GAAG9P,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAAC4G,EAAhC;IACA,MAAMmJ,eAAe,GAAG1N,IAAI,CAAC2N,KAAL,CAAY,CAAChQ,IAAI,CAAC6G,EAAL,GAAUyC,CAAX,IAAgB,GAAjB,GAAwBwG,QAAnC,CAAxB;IACA,OAAOC,eAAP;;AAEH,CARD;;AAUA,AAAO,MAAMG,gBAAgB,GAAG,CAC9BnB,SAD8B,EAE9BoB,KAF8B,EAG9B7D,UAH8B;EAK9B,MAAM8D,KAAK,GAAG,CACZrB,SAAS,GAAG,CADA,EAEZoB,KAAK,GAAG7D,UAFI,EAGZyC,SAAS,GAAG,CAHA,EAIZoB,KAAK,GAAG7D,UAJI,EAKZyC,SALY,EAMZoB,KAAK,GAAG7D,UAAR,GAAqB,IANT,CAAd;EAQA,OAAO8D,KAAK,CAACC,IAAN,CAAW,GAAX,CAAP;AACD,CAdM;;AAgBP,MAAMC,QAAQ,GAAG,CAAChH,CAAD,EAAYiH,KAAZ,EAA2BvQ,IAA3B;EACf,IAAIsJ,CAAC,IAAItJ,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAACqN,WAAL,GAAmB,CAAtC,EAAyC;IACvC/D,CAAC,GAAGtJ,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAACqN,WAAL,GAAmB,CAAjC;;;EAEF,MAAMmD,KAAK,GAAGnO,IAAI,CAAC2N,KAAL,CAAW,CAAC1G,CAAC,GAAGtJ,IAAI,CAAC4G,EAAV,IAAgB2J,KAA3B,CAAd;EACA,MAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAjC;EACA,MAAMG,IAAI,GAAG1Q,IAAI,CAAC4G,EAAL,GAAU6J,gBAAvB;EACA,OAAOC,IAAP;AACD,CARD;;AAUA,MAAMC,MAAM,GAAG,CAACrH,CAAD,EAAYiH,KAAZ,EAA2BvQ,IAA3B;EACb,IAAIsJ,CAAC,IAAItJ,IAAI,CAAC4G,EAAL,GAAU5G,IAAI,CAACqN,WAAL,GAAmB,CAAtC,EAAyC;IACvC/D,CAAC,GAAGtJ,IAAI,CAAC4G,EAAL,GAAU5G,IAAI,CAACqN,WAAL,GAAmB,CAAjC;;;EAEF,MAAMmD,KAAK,GAAGnO,IAAI,CAAC2N,KAAL,CAAW,CAAC1G,CAAC,GAAGtJ,IAAI,CAAC6G,EAAV,IAAgB0J,KAA3B,CAAd;EACA,MAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAjC;EACA,MAAMG,IAAI,GAAG1Q,IAAI,CAAC6G,EAAL,GAAU4J,gBAAvB;EACA,OAAOC,IAAP;AACD,CARD;;AAUA,MAAME,OAAO,GAAG,CAACtH,CAAD,EAAYiH,KAAZ,EAA2BvQ,IAA3B;EACd,MAAMwQ,KAAK,GAAGnO,IAAI,CAAC2N,KAAL,CAAW,CAAC1G,CAAC,GAAGtJ,IAAI,CAAC4G,EAAV,IAAgB2J,KAA3B,CAAd;EACA,MAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAjC;EACA,MAAMM,KAAK,GAAG7Q,IAAI,CAAC4G,EAAL,GAAU6J,gBAAxB;EACA,MAAMK,KAAK,GAAGD,KAAK,GAAG7Q,IAAI,CAAC6G,EAAb,GAAkB7G,IAAI,CAAC4G,EAArC;EACA,OAAO,CAACiK,KAAD,EAAQC,KAAR,CAAP;AACD,CAND;;AAQA,MAAMC,OAAO,GAAG,CACdzH,CADc,EAEd0H,KAFc,EAGdC,QAHc,EAIdV,KAJc,EAKdW,QALc;EAOd,IAAIxS,OAAO,GAAG,IAAIC,IAAJ,CAAU,CAAC2K,CAAC,GAAG0H,KAAL,IAAcT,KAAf,GAAwBW,QAAxB,GAAmCD,QAAQ,CAACzJ,OAAT,EAA5C,CAAd;EACA9I,OAAO,GAAG,IAAIC,IAAJ,CACRD,OAAO,CAAC8I,OAAR,KACE,CAAC9I,OAAO,CAACyS,iBAAR,KAA8BF,QAAQ,CAACE,iBAAT,EAA/B,IAA+D,KAFzD,CAAV;EAIA,OAAOzS,OAAP;AACD,CAbD;;AAkBA,AAAO,MAAM0S,yBAAyB,GAAG,CACvCC,IADuC,EAEvCC,MAFuC,EAGvCjJ,YAHuC,EAIvCkI,KAJuC,EAKvCW,QALuC,EAMvCK,gBANuC,EAOvCnM,GAPuC;EASvC,IAAIoM,MAAJ;;EACA,QAAQnJ,YAAY,CAACmG,IAArB;IACE,KAAK,WAAL;MACEgD,MAAM,GAAGC,qCAAqC,CAC5CJ,IAD4C,EAE5CC,MAF4C,EAG5CjJ,YAH4C,EAI5CkI,KAJ4C,EAK5CW,QAL4C,EAM5CK,gBAN4C,CAA9C;MAQA;;IACF;MACEC,MAAM,GAAGE,+BAA+B,CACtCL,IADsC,EAEtCC,MAFsC,EAGtCjJ,YAHsC,EAItCkI,KAJsC,EAKtCW,QALsC,EAMtCK,gBANsC,EAOtCnM,GAPsC,CAAxC;MASA;;;EAEJ,OAAOoM,MAAP;AACD,CAlCM;;AAoCP,MAAME,+BAA+B,GAAG,CACtCL,IADsC,EAEtCC,MAFsC,EAGtCjJ,YAHsC,EAItCkI,KAJsC,EAKtCW,QALsC,EAMtCK,gBANsC,EAOtCnM,GAPsC;EAStC,MAAMuM,WAAW,GAAY,EAAE,GAAGtJ;GAAlC;EACA,IAAIuJ,SAAS,GAAG,KAAhB;;EACA,QAAQN,MAAR;IACE,KAAK,UAAL;MACE,IAAIlM,GAAJ,EAAS;QACPuM,WAAW,CAACjK,QAAZ,GAAuBuI,cAAc,CAACoB,IAAD,EAAOhJ,YAAP,CAArC;OADF,MAEO;QACLsJ,WAAW,CAACjK,QAAZ,GAAuBmI,WAAW,CAACwB,IAAD,EAAOhJ,YAAP,CAAlC;;;MAEFuJ,SAAS,GAAGD,WAAW,CAACjK,QAAZ,KAAyBW,YAAY,CAACX,QAAlD;;MACA,IAAIkK,SAAJ,EAAe;QACb,MAAM,CAAC9C,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrD2C,WAAW,CAAC/K,EADyC,EAErD+K,WAAW,CAAC9K,EAFyC,EAGrD8K,WAAW,CAACjK,QAHyC,EAIrDtC,GAJqD,CAAvD;QAMAuM,WAAW,CAAC7C,aAAZ,GAA4BA,aAA5B;QACA6C,WAAW,CAAC5C,SAAZ,GAAwBA,SAAxB;;;MAEF;;IACF,KAAK,OAAL;MAAc;QACZ,MAAM8B,KAAK,GAAGP,QAAQ,CAACe,IAAD,EAAOd,KAAP,EAAclI,YAAd,CAAtB;QACAsJ,WAAW,CAAC/K,EAAZ,GAAiBiK,KAAjB;QACAe,SAAS,GAAGD,WAAW,CAAC/K,EAAZ,KAAmByB,YAAY,CAACzB,EAA5C;;QACA,IAAIgL,SAAJ,EAAe;UACb,IAAIxM,GAAJ,EAAS;YACPuM,WAAW,CAAC1R,GAAZ,GAAkB8Q,OAAO,CACvBF,KADuB,EAEvBxI,YAAY,CAACzB,EAFU,EAGvByB,YAAY,CAACpI,GAHU,EAIvBsQ,KAJuB,EAKvBW,QALuB,CAAzB;WADF,MAQO;YACLS,WAAW,CAAC7R,KAAZ,GAAoBiR,OAAO,CACzBF,KADyB,EAEzBxI,YAAY,CAACzB,EAFY,EAGzByB,YAAY,CAACvI,KAHY,EAIzByQ,KAJyB,EAKzBW,QALyB,CAA3B;;;UAQF,MAAM,CAACpC,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrD2C,WAAW,CAAC/K,EADyC,EAErD+K,WAAW,CAAC9K,EAFyC,EAGrD8K,WAAW,CAACjK,QAHyC,EAIrDtC,GAJqD,CAAvD;UAMAuM,WAAW,CAAC7C,aAAZ,GAA4BA,aAA5B;UACA6C,WAAW,CAAC5C,SAAZ,GAAwBA,SAAxB;;;QAEF;;;IAEF,KAAK,KAAL;MAAY;QACV,MAAM+B,KAAK,GAAGH,MAAM,CAACU,IAAD,EAAOd,KAAP,EAAclI,YAAd,CAApB;QACAsJ,WAAW,CAAC9K,EAAZ,GAAiBiK,KAAjB;QACAc,SAAS,GAAGD,WAAW,CAAC9K,EAAZ,KAAmBwB,YAAY,CAACxB,EAA5C;;QACA,IAAI+K,SAAJ,EAAe;UACb,IAAIxM,GAAJ,EAAS;YACPuM,WAAW,CAAC7R,KAAZ,GAAoBiR,OAAO,CACzBD,KADyB,EAEzBzI,YAAY,CAACxB,EAFY,EAGzBwB,YAAY,CAACvI,KAHY,EAIzByQ,KAJyB,EAKzBW,QALyB,CAA3B;WADF,MAQO;YACLS,WAAW,CAAC1R,GAAZ,GAAkB8Q,OAAO,CACvBD,KADuB,EAEvBzI,YAAY,CAACxB,EAFU,EAGvBwB,YAAY,CAACpI,GAHU,EAIvBsQ,KAJuB,EAKvBW,QALuB,CAAzB;;;UAQF,MAAM,CAACpC,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrD2C,WAAW,CAAC/K,EADyC,EAErD+K,WAAW,CAAC9K,EAFyC,EAGrD8K,WAAW,CAACjK,QAHyC,EAIrDtC,GAJqD,CAAvD;UAMAuM,WAAW,CAAC7C,aAAZ,GAA4BA,aAA5B;UACA6C,WAAW,CAAC5C,SAAZ,GAAwBA,SAAxB;;;QAEF;;;IAEF,KAAK,MAAL;MAAa;QACX,MAAM,CAAC8C,SAAD,EAAYC,SAAZ,IAAyBlB,OAAO,CACpCS,IAAI,GAAGE,gBAD6B,EAEpChB,KAFoC,EAGpClI,YAHoC,CAAtC;QAKAuJ,SAAS,GAAGC,SAAS,KAAKxJ,YAAY,CAACzB,EAAvC;;QACA,IAAIgL,SAAJ,EAAe;UACbD,WAAW,CAAC7R,KAAZ,GAAoBiR,OAAO,CACzBc,SADyB,EAEzBxJ,YAAY,CAACzB,EAFY,EAGzByB,YAAY,CAACvI,KAHY,EAIzByQ,KAJyB,EAKzBW,QALyB,CAA3B;UAOAS,WAAW,CAAC1R,GAAZ,GAAkB8Q,OAAO,CACvBe,SADuB,EAEvBzJ,YAAY,CAACxB,EAFU,EAGvBwB,YAAY,CAACpI,GAHU,EAIvBsQ,KAJuB,EAKvBW,QALuB,CAAzB;UAOAS,WAAW,CAAC/K,EAAZ,GAAiBiL,SAAjB;UACAF,WAAW,CAAC9K,EAAZ,GAAiBiL,SAAjB;UACA,MAAM,CAAChD,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrD2C,WAAW,CAAC/K,EADyC,EAErD+K,WAAW,CAAC9K,EAFyC,EAGrD8K,WAAW,CAACjK,QAHyC,EAIrDtC,GAJqD,CAAvD;UAMAuM,WAAW,CAAC7C,aAAZ,GAA4BA,aAA5B;UACA6C,WAAW,CAAC5C,SAAZ,GAAwBA,SAAxB;;;QAEF;;;;EAGJ,OAAO;IAAE6C,SAAF;IAAaD;GAApB;AACD,CArID;;AAuIA,MAAMF,qCAAqC,GAAG,CAC5CJ,IAD4C,EAE5CC,MAF4C,EAG5CjJ,YAH4C,EAI5CkI,KAJ4C,EAK5CW,QAL4C,EAM5CK,gBAN4C;EAQ5C,MAAMI,WAAW,GAAY,EAAE,GAAGtJ;GAAlC;EACA,IAAIuJ,SAAS,GAAG,KAAhB;;EACA,QAAQN,MAAR;IACE,KAAK,MAAL;MAAa;QACX,MAAM,CAACO,SAAD,EAAYC,SAAZ,IAAyBlB,OAAO,CACpCS,IAAI,GAAGE,gBAD6B,EAEpChB,KAFoC,EAGpClI,YAHoC,CAAtC;QAKAuJ,SAAS,GAAGC,SAAS,KAAKxJ,YAAY,CAACzB,EAAvC;;QACA,IAAIgL,SAAJ,EAAe;UACbD,WAAW,CAAC7R,KAAZ,GAAoBiR,OAAO,CACzBc,SADyB,EAEzBxJ,YAAY,CAACzB,EAFY,EAGzByB,YAAY,CAACvI,KAHY,EAIzByQ,KAJyB,EAKzBW,QALyB,CAA3B;UAOAS,WAAW,CAAC1R,GAAZ,GAAkB0R,WAAW,CAAC7R,KAA9B;UACA6R,WAAW,CAAC/K,EAAZ,GAAiBiL,SAAjB;UACAF,WAAW,CAAC9K,EAAZ,GAAiBiL,SAAjB;;;QAEF;;;;EAGJ,OAAO;IAAEF,SAAF;IAAaD;GAApB;AACD,CAlCD;;SCviBgBI,gBACdC;EAEA,OAAQA,KAA6B,CAAChU,GAA9B,KAAsCkR,SAA9C;AACD;AAED,SAUgB+C,kBAAkBvS;EAChC,MAAMwS,YAAY,GAAGxS,KAAK,CAACyS,MAAN,CACnB7N,CAAC,IAAIA,CAAC,CAACE,YAAF,IAAkBF,CAAC,CAACkK,IAAF,KAAW,SADf,CAArB;;EAGA,IAAI0D,YAAY,CAAC1P,MAAb,GAAsB,CAA1B,EAA6B;IAC3B,KAAK,IAAIuH,CAAC,GAAG,CAAb,EAAgBmI,YAAY,CAAC1P,MAAb,GAAsBuH,CAAtC,EAAyCA,CAAC,EAA1C,EAA8C;MAC5C,MAAMqI,WAAW,GAAGF,YAAY,CAACnI,CAAD,CAAhC;MACA,MAAMsI,QAAQ,GAAGC,WAAW,CAAC5S,KAAD,EAAQ0S,WAAR,CAA5B;MACA1S,KAAK,GAAGA,KAAK,CAACyS,MAAN,CAAa7N,CAAC,IAAI+N,QAAQ,CAAC7S,OAAT,CAAiB8E,CAAjB,MAAwB,CAAC,CAA3C,CAAR;;;;EAGJ,OAAO5E,KAAP;AACD;;AAED,SAAS4S,WAAT,CAAqBC,QAArB,EAAuCvS,IAAvC;EACE,IAAIN,KAAK,GAAW,EAApB;;EACA,IAAIM,IAAI,CAACwO,IAAL,KAAc,SAAlB,EAA6B;IAC3B9O,KAAK,GAAG6S,QAAQ,CAACJ,MAAT,CACN7N,CAAC,IAAIA,CAAC,CAAC4J,YAAF,IAAkB5J,CAAC,CAAC4J,YAAF,CAAe1O,OAAf,CAAuBQ,IAAI,CAAC0E,EAA5B,MAAoC,CAAC,CADtD,CAAR;GADF,MAIO;IACLhF,KAAK,GAAG6S,QAAQ,CAACJ,MAAT,CAAgB7N,CAAC,IAAIA,CAAC,CAACkO,OAAF,IAAalO,CAAC,CAACkO,OAAF,KAAcxS,IAAI,CAAC0E,EAArD,CAAR;;;EAEF,IAAI+N,YAAY,GAAW,EAA3B;EACA/S,KAAK,CAACgT,OAAN,CAAcpO,CAAC;IACbmO,YAAY,CAACzR,IAAb,CAAkB,GAAGsR,WAAW,CAACC,QAAD,EAAWjO,CAAX,CAAhC;GADF;EAGA5E,KAAK,GAAGA,KAAK,CAACiT,MAAN,CAAajT,KAAb,EAAoB+S,YAApB,CAAR;EACA,OAAO/S,KAAP;AACD;;AAED,AAAO,MAAMkT,SAAS,GAAG,CAACC,KAAD,EAAcC,KAAd;EACvB,MAAMC,MAAM,GAAGF,KAAK,CAACG,YAAN,IAAsBC,MAAM,CAACC,SAA5C;EACA,MAAMC,MAAM,GAAGL,KAAK,CAACE,YAAN,IAAsBC,MAAM,CAACC,SAA5C;;EACA,IAAIH,MAAM,GAAGI,MAAb,EAAqB;IACnB,OAAO,CAAP;GADF,MAEO,IAAIJ,MAAM,GAAGI,MAAb,EAAqB;IAC1B,OAAO,CAAC,CAAR;GADK,MAEA;IACL,OAAO,CAAP;;AAEH,CAVM;;;;AC7BA,MAAMC,UAAU,GAA8B,CAAC;EACpD9J,CADoD;EAEpDH,CAFoD;EAGpDhB,KAHoD;EAIpD7E,MAJoD;EAKpD+P,UALoD;EAMpDtE,SANoD;EAOpDD,aAPoD;EAQpD1B,eARoD;EASpDlK,MAToD;EAUpDoQ;AAVoD,CAAD;EAYnD,MAAMC,eAAe,GAAG;IACtB,OAAOF,UAAU,GAAGnQ,MAAM,CAACoM,qBAAV,GAAkCpM,MAAM,CAACmM,aAA1D;GADF;;EAIA,MAAMmE,WAAW,GAAG;IAClB,OAAOH,UAAU,GAAGnQ,MAAM,CAACkM,uBAAV,GAAoClM,MAAM,CAACiM,eAA5D;GADF;;EAIA,OACEnM,mBAAA,IAAA;IAAGsQ,WAAW,EAAEA;GAAhB,EACEtQ,mBAAA,OAAA;IACEsG,CAAC,EAAEA;IACHnB,KAAK,EAAEA;IACPgB,CAAC,EAAEA;IACH7F,MAAM,EAAEA;IACRmQ,EAAE,EAAErG;IACJsG,EAAE,EAAEtG;IACJnD,IAAI,EAAEuJ,WAAW;IACjBvQ,SAAS,EAAEG,QAAK,CAACuQ;GARnB,CADF,EAWE3Q,mBAAA,OAAA;IACEsG,CAAC,EAAEyF;IACH5G,KAAK,EAAE2G;IACP3F,CAAC,EAAEA;IACH7F,MAAM,EAAEA;IACRmQ,EAAE,EAAErG;IACJsG,EAAE,EAAEtG;IACJnD,IAAI,EAAEsJ,eAAe;GAPvB,CAXF,CADF;AAuBD,CA3CM;;ACVA,MAAMK,aAAa,GAAiC,CAAC;EAC1DtK,CAD0D;EAE1DH,CAF0D;EAG1DhB,KAH0D;EAI1D7E,MAJ0D;EAK1D8J,eAL0D;EAM1DkG;AAN0D,CAAD;EAQzD,OACEtQ,mBAAA,OAAA;IACEsG,CAAC,EAAEA;IACHH,CAAC,EAAEA;IACHhB,KAAK,EAAEA;IACP7E,MAAM,EAAEA;IACRL,SAAS,EAAEC,QAAM,CAAC2Q;IAClBJ,EAAE,EAAErG;IACJsG,EAAE,EAAEtG;IACJkG,WAAW,EAAEA;GARf,CADF;AAYD,CApBM;;ACJA,MAAMQ,iBAAiB,GAAqC,CAAC;EAClEC,aADkE;EAElET;AAFkE,CAAD;EAIjE,OACEtQ,mBAAA,UAAA;IACEC,SAAS,EAAEC,QAAM,CAAC2Q;IAClBhH,MAAM,EAAEkH;IACRT,WAAW,EAAEA;GAHf,CADF;AAOD,CAXM;;ACCA,MAAMU,GAAG,GAA4B,CAAC;EAC3ChU,IAD2C;EAE3CiU,oBAF2C;EAG3CC,gBAH2C;EAI3C9O,GAJ2C;EAK3C+O,YAL2C;EAM3Cd;AAN2C,CAAD;EAQ1C,MAAMU,aAAa,GAAG7D,gBAAgB,CACpC,CAAC,CAAC9K,GAAF,GAAQpF,IAAI,CAAC8O,aAAb,GAA6B9O,IAAI,CAAC+O,SADE,EAEpC/O,IAAI,CAACmJ,CAF+B,EAGpCnJ,IAAI,CAACsD,MAH+B,CAAtC;EAKA,MAAM8Q,YAAY,GAAGpU,IAAI,CAACsD,MAAL,GAAc,CAAnC;EACA,OACEN,mBAAA,IAAA;IAAGC,SAAS,EAAEC,QAAM,CAACmR;IAAYC,QAAQ,EAAE;GAA3C,EACEtR,mBAAA,CAACoQ,UAAD;IACE9J,CAAC,EAAEtJ,IAAI,CAAC4G;IACRuC,CAAC,EAAEnJ,IAAI,CAACmJ;IACRhB,KAAK,EAAEnI,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAAC4G;IACtBtD,MAAM,EAAEtD,IAAI,CAACsD;IACbyL,SAAS,EAAE/O,IAAI,CAAC+O;IAChBD,aAAa,EAAE9O,IAAI,CAAC8O;IACpB1B,eAAe,EAAEpN,IAAI,CAACoN;IACtBlK,MAAM,EAAElD,IAAI,CAACkD;IACbmQ,UAAU,EAAEA;IACZC,WAAW,EAAEiB,CAAC;MACZL,gBAAgB,IAAIC,YAAY,CAAC,MAAD,EAASnU,IAAT,EAAeuU,CAAf,CAAhC;;GAXJ,CADF,EAeEvR,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EACGiR,gBAAgB,IACflR,mBAAA,IAAA,MAAA,EAEEA,mBAAA,CAAC4Q,aAAD;IACEtK,CAAC,EAAEtJ,IAAI,CAAC4G,EAAL,GAAU;IACbuC,CAAC,EAAEnJ,IAAI,CAACmJ,CAAL,GAAS;IACZhB,KAAK,EAAEnI,IAAI,CAACqN;IACZ/J,MAAM,EAAE8Q;IACRhH,eAAe,EAAEpN,IAAI,CAACoN;IACtBkG,WAAW,EAAEiB,CAAC;MACZJ,YAAY,CAAC,OAAD,EAAUnU,IAAV,EAAgBuU,CAAhB,CAAZ;;GAPJ,CAFF,EAaEvR,mBAAA,CAAC4Q,aAAD;IACEtK,CAAC,EAAEtJ,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAACqN,WAAf,GAA6B;IAChClE,CAAC,EAAEnJ,IAAI,CAACmJ,CAAL,GAAS;IACZhB,KAAK,EAAEnI,IAAI,CAACqN;IACZ/J,MAAM,EAAE8Q;IACRhH,eAAe,EAAEpN,IAAI,CAACoN;IACtBkG,WAAW,EAAEiB,CAAC;MACZJ,YAAY,CAAC,KAAD,EAAQnU,IAAR,EAAcuU,CAAd,CAAZ;;GAPJ,CAbF,CAFJ,EA2BGN,oBAAoB,IACnBjR,mBAAA,CAAC8Q,iBAAD;IACEC,aAAa,EAAEA;IACfT,WAAW,EAAEiB,CAAC;MACZJ,YAAY,CAAC,UAAD,EAAanU,IAAb,EAAmBuU,CAAnB,CAAZ;;GAHJ,CA5BJ,CAfF,CADF;AAsDD,CApEM;;ACDA,MAAMC,QAAQ,GAA4B,CAAC;EAChDxU,IADgD;EAEhDiU,oBAFgD;EAGhDC,gBAHgD;EAIhDC,YAJgD;EAKhDd;AALgD,CAAD;EAO/C,MAAMU,aAAa,GAAG7D,gBAAgB,CACpClQ,IAAI,CAAC8O,aAAL,GAAqB9O,IAAI,CAAC4G,EADU,EAEpC5G,IAAI,CAACmJ,CAF+B,EAGpCnJ,IAAI,CAACsD,MAH+B,CAAtC;EAKA,OACEN,mBAAA,IAAA;IAAGC,SAAS,EAAEC,QAAM,CAACmR;IAAYC,QAAQ,EAAE;GAA3C,EACEtR,mBAAA,CAACoQ,UAAD;IACE9J,CAAC,EAAEtJ,IAAI,CAAC4G;IACRuC,CAAC,EAAEnJ,IAAI,CAACmJ;IACRhB,KAAK,EAAEnI,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAAC4G;IACtBtD,MAAM,EAAEtD,IAAI,CAACsD;IACbyL,SAAS,EAAE/O,IAAI,CAAC+O;IAChBD,aAAa,EAAE9O,IAAI,CAAC8O;IACpB1B,eAAe,EAAEpN,IAAI,CAACoN;IACtBlK,MAAM,EAAElD,IAAI,CAACkD;IACbmQ,UAAU,EAAEA;IACZC,WAAW,EAAEiB,CAAC;MACZL,gBAAgB,IAAIC,YAAY,CAAC,MAAD,EAASnU,IAAT,EAAeuU,CAAf,CAAhC;;GAXJ,CADF,EAeEvR,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EACGgR,oBAAoB,IACnBjR,mBAAA,CAAC8Q,iBAAD;IACEC,aAAa,EAAEA;IACfT,WAAW,EAAEiB,CAAC;MACZJ,YAAY,CAAC,UAAD,EAAanU,IAAb,EAAmBuU,CAAnB,CAAZ;;GAHJ,CAFJ,CAfF,CADF;AA4BD,CAxCM;;;;ACHA,MAAME,SAAS,GAA4B,CAAC;EACjDzU,IADiD;EAEjDkU,gBAFiD;EAGjDC,YAHiD;EAIjDd;AAJiD,CAAD;EAMhD,MAAMqB,SAAS,gBAAgB1U,IAAI,CAAC4G,EAAL,GAAU5G,IAAI,CAACsD,MAAL,GAAc;MACnDtD,IAAI,CAACmJ,CAAL,GAASnJ,IAAI,CAACsD,MAAL,GAAc,OAD3B;;EAEA,MAAMkQ,WAAW,GAAG;IAClB,OAAOH,UAAU,GACbrT,IAAI,CAACkD,MAAL,CAAYkM,uBADC,GAEbpP,IAAI,CAACkD,MAAL,CAAYiM,eAFhB;GADF;;EAMA,OACEnM,mBAAA,IAAA;IAAGsR,QAAQ,EAAE;IAAGrR,SAAS,EAAEC,QAAM,CAACyR;GAAlC,EACE3R,mBAAA,OAAA;IACEiH,IAAI,EAAEuJ,WAAW;IACjBlK,CAAC,EAAEtJ,IAAI,CAAC4G;IACRuB,KAAK,EAAEnI,IAAI,CAACsD;IACZ6F,CAAC,EAAEnJ,IAAI,CAACmJ;IACR7F,MAAM,EAAEtD,IAAI,CAACsD;IACboQ,EAAE,EAAE1T,IAAI,CAACoN;IACTqG,EAAE,EAAEzT,IAAI,CAACoN;IACTsH,SAAS,EAAEA;IACXzR,SAAS,EAAEC,QAAM,CAAC0R;IAClBtB,WAAW,EAAEiB,CAAC;MACZL,gBAAgB,IAAIC,YAAY,CAAC,MAAD,EAASnU,IAAT,EAAeuU,CAAf,CAAhC;;GAXJ,CADF,CADF;AAkBD,CAhCM;;;;ACAA,MAAMM,OAAO,GAA4B,CAAC;EAAE7U,IAAF;EAAQqT;AAAR,CAAD;EAC9C,MAAMyB,QAAQ,GAAGzB,UAAU,GACvBrT,IAAI,CAACkD,MAAL,CAAYkM,uBADW,GAEvBpP,IAAI,CAACkD,MAAL,CAAYiM,eAFhB;EAGA,MAAM4F,YAAY,GAAG1B,UAAU,GAC3BrT,IAAI,CAACkD,MAAL,CAAYoM,qBADe,GAE3BtP,IAAI,CAACkD,MAAL,CAAYmM,aAFhB;EAGA,MAAM2F,WAAW,GAAGhV,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAAC4G,EAAnC;EAEA,MAAMqO,mBAAmB,GAAG,CAC1BjV,IAAI,CAAC4G,EADqB,EAE1B5G,IAAI,CAACmJ,CAAL,GAASnJ,IAAI,CAACsD,MAAL,GAAc,CAAvB,GAA2B,CAFD,EAG1BtD,IAAI,CAAC4G,EAHqB,EAI1B5G,IAAI,CAACmJ,CAAL,GAASnJ,IAAI,CAACsD,MAJY,EAK1BtD,IAAI,CAAC4G,EAAL,GAAU,EALgB,EAM1B5G,IAAI,CAACmJ,CAAL,GAASnJ,IAAI,CAACsD,MAAL,GAAc,CAAvB,GAA2B,CAND,EAO1B+M,IAP0B,CAOrB,GAPqB,CAA5B;EAQA,MAAM6E,oBAAoB,GAAG,CAC3BlV,IAAI,CAAC6G,EADsB,EAE3B7G,IAAI,CAACmJ,CAAL,GAASnJ,IAAI,CAACsD,MAAL,GAAc,CAAvB,GAA2B,CAFA,EAG3BtD,IAAI,CAAC6G,EAHsB,EAI3B7G,IAAI,CAACmJ,CAAL,GAASnJ,IAAI,CAACsD,MAJa,EAK3BtD,IAAI,CAAC6G,EAAL,GAAU,EALiB,EAM3B7G,IAAI,CAACmJ,CAAL,GAASnJ,IAAI,CAACsD,MAAL,GAAc,CAAvB,GAA2B,CANA,EAO3B+M,IAP2B,CAOtB,GAPsB,CAA7B;EASA,OACErN,mBAAA,IAAA;IAAGsR,QAAQ,EAAE;IAAGrR,SAAS,EAAEC,QAAM,CAACiS;GAAlC,EACEnS,mBAAA,OAAA;IACEiH,IAAI,EAAE6K;IACNxL,CAAC,EAAEtJ,IAAI,CAAC4G;IACRuB,KAAK,EAAE6M;IACP7L,CAAC,EAAEnJ,IAAI,CAACmJ;IACR7F,MAAM,EAAEtD,IAAI,CAACsD;IACboQ,EAAE,EAAE1T,IAAI,CAACoN;IACTqG,EAAE,EAAEzT,IAAI,CAACoN;IACTnK,SAAS,EAAEC,QAAM,CAACkS;GARpB,CADF,EAWEpS,mBAAA,OAAA;IACEsG,CAAC,EAAEtJ,IAAI,CAAC+O;IACR5G,KAAK,EAAEnI,IAAI,CAAC8O;IACZ3F,CAAC,EAAEnJ,IAAI,CAACmJ;IACR7F,MAAM,EAAEtD,IAAI,CAACsD;IACbmQ,EAAE,EAAEzT,IAAI,CAACoN;IACTsG,EAAE,EAAE1T,IAAI,CAACoN;IACTnD,IAAI,EAAE8K;GAPR,CAXF,EAoBE/R,mBAAA,OAAA;IACEiH,IAAI,EAAE6K;IACNxL,CAAC,EAAEtJ,IAAI,CAAC4G;IACRuB,KAAK,EAAE6M;IACP7L,CAAC,EAAEnJ,IAAI,CAACmJ;IACR7F,MAAM,EAAEtD,IAAI,CAACsD,MAAL,GAAc;IACtBoQ,EAAE,EAAE1T,IAAI,CAACoN;IACTqG,EAAE,EAAEzT,IAAI,CAACoN;IACTnK,SAAS,EAAEC,QAAM,CAACmS;GARpB,CApBF,EA8BErS,mBAAA,UAAA;IACEC,SAAS,EAAEC,QAAM,CAACmS;IAClBxI,MAAM,EAAEoI;IACRhL,IAAI,EAAE6K;GAHR,CA9BF,EAmCE9R,mBAAA,UAAA;IACEC,SAAS,EAAEC,QAAM,CAACmS;IAClBxI,MAAM,EAAEqI;IACRjL,IAAI,EAAE6K;GAHR,CAnCF,CADF;AA2CD,CArEM;;;;ACqBA,MAAMQ,QAAQ,GAA4BnL,KAAK;EACpD,MAAM;IACJnK,IADI;IAEJyF,WAFI;IAGJ8P,QAHI;IAIJjJ,UAJI;IAKJ+G,UALI;IAMJjO,GANI;IAOJ+O;MACE,EACF,GAAGhK;GATL;EAWA,MAAMqL,OAAO,GAAG3P,MAAM,CAAiB,IAAjB,CAAtB;EACA,MAAM,CAAC4P,QAAD,EAAWC,WAAX,IAA0B1P,QAAQ,CAAchD,mBAAA,MAAA,MAAA,CAAd,CAAxC;EACA,MAAM,CAAC2S,YAAD,EAAeC,eAAf,IAAkC5P,QAAQ,CAAC,IAAD,CAAhD;EAEAG,SAAS,CAAC;IACR,QAAQnG,IAAI,CAAC6O,YAAb;MACE,KAAK,WAAL;QACE6G,WAAW,CAAC1S,mBAAA,CAACyR,SAAD,oBAAetK,MAAf,CAAD,CAAX;QACA;;MACF,KAAK,SAAL;QACEuL,WAAW,CAAC1S,mBAAA,CAAC6R,OAAD,oBAAa1K,MAAb,CAAD,CAAX;QACA;;MACF,KAAK,WAAL;QACEuL,WAAW,CAAC1S,mBAAA,CAACwR,QAAD,oBAAcrK,MAAd,CAAD,CAAX;QACA;;MACF;QACEuL,WAAW,CAAC1S,mBAAA,CAACgR,GAAD,oBAAS7J,MAAT,CAAD,CAAX;QACA;;GAbG,EAeN,CAACnK,IAAD,EAAOqT,UAAP,CAfM,CAAT;EAiBAlN,SAAS,CAAC;IACR,IAAIqP,OAAO,CAACpP,OAAZ,EAAqB;MACnBwP,eAAe,CAACJ,OAAO,CAACpP,OAAR,CAAgByP,OAAhB,GAA0B1N,KAA1B,GAAkCnI,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAAC4G,EAAlD,CAAf;;GAFK,EAIN,CAAC4O,OAAD,EAAUxV,IAAV,CAJM,CAAT;;EAMA,MAAM8V,IAAI,GAAG;IACX,MAAM3N,KAAK,GAAGnI,IAAI,CAAC6G,EAAL,GAAU7G,IAAI,CAAC4G,EAA7B;IACA,MAAMmP,QAAQ,GAAG/V,IAAI,CAACsO,WAAL,CAAiB9L,MAAjB,GAA0B,CAA3C;;IACA,IAAImT,YAAJ,EAAkB;MAChB,OAAO3V,IAAI,CAAC4G,EAAL,GAAUuB,KAAK,GAAG,GAAzB;;;IAEF,IAAI/C,GAAG,IAAIoQ,OAAO,CAACpP,OAAnB,EAA4B;MAC1B,OACEpG,IAAI,CAAC4G,EAAL,GACA4O,OAAO,CAACpP,OAAR,CAAgByP,OAAhB,GAA0B1N,KAD1B,GAEA1C,WAAW,GAAG,CAACsQ,QAFf,GAGAtQ,WAAW,GAAG,GAJhB;KADF,MAOO;MACL,OAAOzF,IAAI,CAAC4G,EAAL,GAAUuB,KAAV,GAAkB1C,WAAW,GAAG,CAACsQ,QAAjC,GAA4CtQ,WAAW,GAAG,GAAjE;;GAdJ;;EAkBA,OACEzC,mBAAA,IAAA;IACEgT,SAAS,EAAEzB,CAAC;MACV,QAAQA,CAAC,CAACvW,GAAV;QACE,KAAK,QAAL;UAAe;YACb,IAAIuX,QAAJ,EAAcpB,YAAY,CAAC,QAAD,EAAWnU,IAAX,EAAiBuU,CAAjB,CAAZ;YACd;;;;MAGJA,CAAC,CAAC0B,eAAF;;IAEFC,YAAY,EAAE3B,CAAC;MACbJ,YAAY,CAAC,YAAD,EAAenU,IAAf,EAAqBuU,CAArB,CAAZ;;IAEF4B,YAAY,EAAE5B,CAAC;MACbJ,YAAY,CAAC,YAAD,EAAenU,IAAf,EAAqBuU,CAArB,CAAZ;;IAEF6B,aAAa,EAAE7B,CAAC;MACdJ,YAAY,CAAC,UAAD,EAAanU,IAAb,EAAmBuU,CAAnB,CAAZ;;IAEFrP,OAAO,EAAEqP,CAAC;MACRJ,YAAY,CAAC,OAAD,EAAUnU,IAAV,EAAgBuU,CAAhB,CAAZ;;IAEF8B,OAAO,EAAE;MACPlC,YAAY,CAAC,QAAD,EAAWnU,IAAX,CAAZ;;GAvBJ,EA0BGyV,QA1BH,EA2BEzS,mBAAA,OAAA;IACEsG,CAAC,EAAEwM,IAAI;IACP3M,CAAC,EAAEnJ,IAAI,CAACmJ,CAAL,GAASmD,UAAU,GAAG;IACzBrJ,SAAS,EACP0S,YAAY,GACRvS,KAAK,CAACkT,QADE,GAERlT,CAAkBA,KAAK,CAACmT;IAE9BtP,GAAG,EAAEuO;GARP,EAUGxV,IAAI,CAAC8E,IAVR,CA3BF,CADF;AA0CD,CAnGM;;ACSA,MAAM0R,gBAAgB,GAAoC,CAAC;EAChE9W,KADgE;EAEhEqB,KAFgE;EAGhE0V,UAHgE;EAIhEpO,YAJgE;EAKhEpE,SALgE;EAMhEgF,WANgE;EAOhEiI,QAPgE;EAQhEwF,GARgE;EAShEpK,UATgE;EAUhEqK,UAVgE;EAWhElR,WAXgE;EAYhE5C,UAZgE;EAahEC,QAbgE;EAchEsC,GAdgE;EAehEwR,aAfgE;EAgBhEC,aAhBgE;EAiBhEvO,eAjBgE;EAkBhEwO,YAlBgE;EAmBhEC,gBAnBgE;EAoBhEX,aApBgE;EAqBhElR,OArBgE;EAsBhE8R;AAtBgE,CAAD;;;EAwB/D,MAAM5G,KAAK,GAAGsG,GAAH,aAAGA,GAAH,uCAAGA,GAAG,CAAEtQ,OAAR,iDAAG,aAAc6Q,cAAd,EAAd;EACA,MAAM,CAAC1G,KAAD,EAAQ2G,QAAR,IAAoBlR,QAAQ,CAAC,CAAD,CAAlC;EACA,MAAM,CAACuL,gBAAD,EAAmB4F,mBAAnB,IAA0CnR,QAAQ,CAAC,CAAD,CAAxD;EACA,MAAM,CAACoR,QAAD,EAAWC,WAAX,IAA0BrR,QAAQ,CAAC,KAAD,CAAxC;EAGAG,SAAS,CAAC;IACR,MAAMmR,SAAS,GACbvW,KAAK,CAAC,CAAD,CAAL,CAASyG,OAAT,KACAzG,KAAK,CAAC,CAAD,CAAL,CAASyG,OAAT,EADA,GAEAzG,KAAK,CAAC,CAAD,CAAL,CAASoQ,iBAAT,KAA+B,EAA/B,GAAoC,IAFpC,GAGApQ,KAAK,CAAC,CAAD,CAAL,CAASoQ,iBAAT,KAA+B,EAA/B,GAAoC,IAJtC;IAKA,MAAMoG,QAAQ,GAAIrG,QAAQ,GAAGjI,WAAZ,GAA2BqO,SAA5C;IACAJ,QAAQ,CAACK,QAAD,CAAR;GAPO,EAQN,CAACtO,WAAD,EAAclI,KAAd,EAAqBmQ,QAArB,CARM,CAAT;EAUA/K,SAAS,CAAC;IACR,MAAMqR,eAAe,GAAG,MAAOxF,KAAP;;;MACtB,IAAI,CAACyE,UAAU,CAAC9E,WAAZ,IAA2B,CAACvB,KAA5B,IAAqC,EAACsG,GAAD,aAACA,GAAD,eAACA,GAAG,CAAEtQ,OAAN,CAAzC,EAAwD;MACxD4L,KAAK,CAACyF,cAAN;MAEArH,KAAK,CAAC9G,CAAN,GAAU0I,KAAK,CAAC0F,OAAhB;MACA,MAAMC,MAAM,GAAGvH,KAAK,CAACwH,eAAN,CACblB,GADa,aACbA,GADa,gDACbA,GAAG,CAAEtQ,OAAL,CAAayR,YAAb,EADa,0DACb,sBAA6BC,OAA7B,EADa,CAAf;MAIA,MAAM;QAAElG,SAAF;QAAaD;UAAgBP,yBAAyB,CAC1DuG,MAAM,CAACrO,CADmD,EAE1DmN,UAAU,CAACnF,MAF+C,EAG1DmF,UAAU,CAAC9E,WAH+C,EAI1DpB,KAJ0D,EAK1DW,QAL0D,EAM1DK,gBAN0D,EAO1DnM,GAP0D,CAA5D;;MASA,IAAIwM,SAAJ,EAAe;QACbgF,aAAa,CAAC;UAAEtF,MAAM,EAAEmF,UAAU,CAACnF,MAArB;UAA6BK;SAA9B,CAAb;;KAnBJ;;IAuBA,MAAMoG,aAAa,GAAG,MAAO/F,KAAP;;;MACpB,MAAM;QAAEV,MAAF;QAAU0G,oBAAV;QAAgCrG;UAAgB8E,UAAtD;MACA,IAAI,CAAC9E,WAAD,IAAgB,CAACvB,KAAjB,IAA0B,EAACsG,GAAD,aAACA,GAAD,eAACA,GAAG,CAAEtQ,OAAN,CAA1B,IAA2C,CAAC4R,oBAAhD,EACE;MACFhG,KAAK,CAACyF,cAAN;MAEArH,KAAK,CAAC9G,CAAN,GAAU0I,KAAK,CAAC0F,OAAhB;MACA,MAAMC,MAAM,GAAGvH,KAAK,CAACwH,eAAN,CACblB,GADa,aACbA,GADa,iDACbA,GAAG,CAAEtQ,OAAL,CAAayR,YAAb,EADa,2DACb,uBAA6BC,OAA7B,EADa,CAAf;MAGA,MAAM;QAAEnG,WAAW,EAAEsG;UAAmB7G,yBAAyB,CAC/DuG,MAAM,CAACrO,CADwD,EAE/DgI,MAF+D,EAG/DK,WAH+D,EAI/DpB,KAJ+D,EAK/DW,QAL+D,EAM/DK,gBAN+D,EAO/DnM,GAP+D,CAAjE;MAUA,MAAM8S,iBAAiB,GACrBF,oBAAoB,CAAClY,KAArB,KAA+BmY,cAAc,CAACnY,KAA9C,IACAkY,oBAAoB,CAAC/X,GAArB,KAA6BgY,cAAc,CAAChY,GAD5C,IAEA+X,oBAAoB,CAACtQ,QAArB,KAAkCuQ,cAAc,CAACvQ,QAHnD;MAMAgP,GAAG,CAACtQ,OAAJ,CAAY+R,mBAAZ,CAAgC,WAAhC,EAA6CX,eAA7C;MACAd,GAAG,CAACtQ,OAAJ,CAAY+R,mBAAZ,CAAgC,SAAhC,EAA2CJ,aAA3C;MACAnB,aAAa,CAAC;QAAEtF,MAAM,EAAE;OAAX,CAAb;MACA+F,WAAW,CAAC,KAAD,CAAX;MAGA,IAAIe,gBAAgB,GAAG,IAAvB;;MACA,IACE,CAAC9G,MAAM,KAAK,MAAX,IAAqBA,MAAM,KAAK,KAAhC,IAAyCA,MAAM,KAAK,OAArD,KACAwF,YADA,IAEAoB,iBAHF,EAIE;QACA,IAAI;UACF,MAAM1G,MAAM,GAAG,MAAMsF,YAAY,CAC/BmB,cAD+B,EAE/BA,cAAc,CAAC3J,WAFgB,CAAjC;;UAIA,IAAIkD,MAAM,KAAKtC,SAAf,EAA0B;YACxBkJ,gBAAgB,GAAG5G,MAAnB;;SANJ,CAQE,OAAO6G,KAAP,EAAc;UACdD,gBAAgB,GAAG,KAAnB;;OAdJ,MAgBO,IAAIrB,gBAAgB,IAAImB,iBAAxB,EAA2C;QAChD,IAAI;UACF,MAAM1G,MAAM,GAAG,MAAMuF,gBAAgB,CACnCkB,cADmC,EAEnCA,cAAc,CAAC3J,WAFoB,CAArC;;UAIA,IAAIkD,MAAM,KAAKtC,SAAf,EAA0B;YACxBkJ,gBAAgB,GAAG5G,MAAnB;;SANJ,CAQE,OAAO6G,KAAP,EAAc;UACdD,gBAAgB,GAAG,KAAnB;;;;MAKJ,IAAI,CAACA,gBAAL,EAAuB;QACrBvB,aAAa,CAACmB,oBAAD,CAAb;;KAjEJ;;IAqEA,IACE,CAACZ,QAAD,KACCX,UAAU,CAACnF,MAAX,KAAsB,MAAtB,IACCmF,UAAU,CAACnF,MAAX,KAAsB,KADvB,IAECmF,UAAU,CAACnF,MAAX,KAAsB,OAFvB,IAGCmF,UAAU,CAACnF,MAAX,KAAsB,UAJxB,KAKAoF,GALA,aAKAA,GALA,eAKAA,GAAG,CAAEtQ,OANP,EAOE;MACAsQ,GAAG,CAACtQ,OAAJ,CAAYkS,gBAAZ,CAA6B,WAA7B,EAA0Cd,eAA1C;MACAd,GAAG,CAACtQ,OAAJ,CAAYkS,gBAAZ,CAA6B,SAA7B,EAAwCP,aAAxC;MACAV,WAAW,CAAC,IAAD,CAAX;;GAvGK,EAyGN,CACDZ,UADC,EAEDlG,KAFC,EAGDgB,gBAHC,EAIDwF,gBAJC,EAKD7F,QALC,EAMD4F,YANC,EAODJ,GAPC,EAQDU,QARC,EASDhH,KATC,EAUDhL,GAVC,EAWDyR,aAXC,EAYDD,aAZC,CAzGM,CAAT;;EA2HA,MAAM2B,mBAAmB,GAAG,OAC1BjH,MAD0B,EAE1BtR,IAF0B,EAG1BgS,KAH0B;IAK1B,IAAI,CAACA,KAAL,EAAY;MACV,IAAIV,MAAM,KAAK,QAAf,EAAyB;QACvBhJ,eAAe,CAACtI,IAAI,CAAC0E,EAAN,CAAf;;KAFJ,MAMK,IAAIqN,eAAe,CAACC,KAAD,CAAnB,EAA4B;MAC/B,IAAIV,MAAM,KAAK,QAAf,EAAyB;QACvB,IAAI0F,QAAJ,EAAc;UACZ,IAAI;YACF,MAAMxF,MAAM,GAAG,MAAMwF,QAAQ,CAAChX,IAAD,CAA7B;;YACA,IAAIwR,MAAM,KAAKtC,SAAX,IAAwBsC,MAA5B,EAAoC;cAClCoF,aAAa,CAAC;gBAAEtF,MAAF;gBAAUK,WAAW,EAAE3R;eAAxB,CAAb;;WAHJ,CAKE,OAAOqY,KAAP,EAAc;YACdG,OAAO,CAACH,KAAR,CAAc,sBAAsBA,KAApC;;;;KATH,MAeA,IAAI/G,MAAM,KAAK,YAAf,EAA6B;MAChC,IAAI,CAACmF,UAAU,CAACnF,MAAhB,EAAwB;QACtBsF,aAAa,CAAC;UACZtF,MADY;UAEZK,WAAW,EAAE3R,IAFD;UAGZgY,oBAAoB,EAAEhY;SAHX,CAAb;;KAFC,MAQE,IAAIsR,MAAM,KAAK,YAAf,EAA6B;MAClC,IAAImF,UAAU,CAACnF,MAAX,KAAsB,YAA1B,EAAwC;QACtCsF,aAAa,CAAC;UAAEtF,MAAM,EAAE;SAAX,CAAb;;KAFG,MAIA,IAAIA,MAAM,KAAK,UAAf,EAA2B;MAChC,CAAC,CAAC8E,aAAF,IAAmBA,aAAa,CAACpW,IAAD,CAAhC;KADK,MAEA,IAAIsR,MAAM,KAAK,OAAf,EAAwB;MAC7B,CAAC,CAACpM,OAAF,IAAaA,OAAO,CAAClF,IAAD,CAApB;KADK,MAIF,IAAIsR,MAAM,KAAK,MAAf,EAAuB;MAAA;;MAC1B,IAAI,EAACoF,GAAD,aAACA,GAAD,eAACA,GAAG,CAAEtQ,OAAN,KAAiB,CAACgK,KAAtB,EAA6B;MAC7BA,KAAK,CAAC9G,CAAN,GAAU0I,KAAK,CAAC0F,OAAhB;MACA,MAAMC,MAAM,GAAGvH,KAAK,CAACwH,eAAN,2BACblB,GAAG,CAACtQ,OAAJ,CAAYyR,YAAZ,EADa,2DACb,uBAA4BC,OAA5B,EADa,CAAf;MAGAX,mBAAmB,CAACQ,MAAM,CAACrO,CAAP,GAAWtJ,IAAI,CAAC4G,EAAjB,CAAnB;MACAgQ,aAAa,CAAC;QACZtF,MADY;QAEZK,WAAW,EAAE3R,IAFD;QAGZgY,oBAAoB,EAAEhY;OAHX,CAAb;KAPG,MAYE;MACL4W,aAAa,CAAC;QACZtF,MADY;QAEZK,WAAW,EAAE3R,IAFD;QAGZgY,oBAAoB,EAAEhY;OAHX,CAAb;;GAzDJ;;EAiEA,OACEgD,mBAAA,IAAA;IAAGC,SAAS,EAAC;GAAb,EACED,mBAAA,IAAA;IAAGC,SAAS,EAAC;IAASgH,IAAI,EAAE0M;IAAY8B,MAAM,EAAE9B;GAAhD,EACGjX,KAAK,CAAC2E,GAAN,CAAUrE,IAAI;IACb,OAAOA,IAAI,CAACsO,WAAL,CAAiBjK,GAAjB,CAAqBqU,KAAK;MAC/B,OACE1V,mBAAA,CAACmJ,KAAD;QACEnO,GAAG,gBAAgBgC,IAAI,CAAC0E,SAAShF,KAAK,CAACgZ,KAAK,CAAChS,KAAP,CAAL,CAAmBhC;QACpD0H,QAAQ,EAAEpM;QACVqM,MAAM,EAAE3M,KAAK,CAACgZ,KAAK,CAAChS,KAAP;QACbzC,SAAS,EAAEA;QACXqI,UAAU,EAAEA;QACZ7G,WAAW,EAAEA;QACbL,GAAG,EAAEA;OAPP,CADF;KADK,CAAP;GADD,CADH,CADF,EAkBEpC,mBAAA,IAAA;IAAGC,SAAS,EAAC;IAAMJ,UAAU,EAAEA;IAAYC,QAAQ,EAAEA;GAArD,EACGpD,KAAK,CAAC2E,GAAN,CAAUrE,IAAI;IACb,OACEgD,mBAAA,CAACsS,QAAD;MACEtV,IAAI,EAAEA;MACNyF,WAAW,EAAEA;MACb6G,UAAU,EAAEA;MACZ2H,oBAAoB,EAAE,CAAC,CAAC8C,gBAAF,IAAsB,CAAC/W,IAAI,CAAC2Y;MAClDzE,gBAAgB,EAAE,CAAC,CAAC4C,YAAF,IAAkB,CAAC9W,IAAI,CAAC2Y;MAC1CpD,QAAQ,EAAE,CAACvV,IAAI,CAAC2Y;MAChBxE,YAAY,EAAEoE;MACdva,GAAG,EAAEgC,IAAI,CAAC0E;MACV2O,UAAU,EAAE,CAAC,CAAChL,YAAF,IAAkBrI,IAAI,CAAC0E,EAAL,KAAY2D,YAAY,CAAC3D;MACvDU,GAAG,EAAEA;KAVP,CADF;GADD,CADH,CAlBF,CADF;AAuCD,CA3QM;;;;ACpBA,MAAMwT,SAAS,GAA6B,CAAC;EAClDC,SADkD;EAElDC,aAFkD;EAGlDC,QAHkD;EAIlDlR,WAJkD;EAKlDrC,OALkD;EAMlDD;AANkD,CAAD;EAQjD,MAAMyT,WAAW,GAAGnT,MAAM,CAAgB,IAAhB,CAA1B;EACA,MAAM8C,sBAAsB,GAAG9C,MAAM,CAAiB,IAAjB,CAArC;EACA,MAAMoT,yBAAyB,GAAGpT,MAAM,CAAiB,IAAjB,CAAxC;EACA,MAAMqT,WAAW,GAAG,EAAE,GAAGH,QAAL;IAAerC,GAAG,EAAEsC;GAAxC;EAEA7S,SAAS,CAAC;IACR,IAAIwC,sBAAsB,CAACvC,OAA3B,EAAoC;MAClCuC,sBAAsB,CAACvC,OAAvB,CAA+B6B,SAA/B,GAA2CzC,OAA3C;;GAFK,EAIN,CAACA,OAAD,CAJM,CAAT;EAMAW,SAAS,CAAC;IACR,IAAI8S,yBAAyB,CAAC7S,OAA9B,EAAuC;MACrC6S,yBAAyB,CAAC7S,OAA1B,CAAkC+S,UAAlC,GAA+C5T,OAA/C;;GAFK,EAIN,CAACA,OAAD,CAJM,CAAT;EAMA,OACEvC,mBAAA,MAAA;IACEC,SAAS,EAAEC,QAAM,CAACkW;IAClBnS,GAAG,EAAEgS;IACLI,GAAG,EAAC;GAHN,EAKErW,mBAAA,MAAA;IACEsW,KAAK,EAAC;IACNnR,KAAK,EAAE0Q,SAAS,CAAC7P;IACjB1F,MAAM,EAAEwV,aAAa,CAAClW;IACtBC,UAAU,EAAEkW,QAAQ,CAAClW;GAJvB,EAMEG,mBAAA,CAAC6H,QAAD,oBAAciO,cAAd,CANF,CALF,EAaE9V,mBAAA,MAAA;IACEiE,GAAG,EAAE0B;IACL1F,SAAS,EAAEC,QAAM,CAACqW;IAClBnW,KAAK,EACHyE,WAAW,GACP;MAAEvE,MAAM,EAAEuE,WAAV;MAAuBM,KAAK,EAAE0Q,SAAS,CAAC7P;KADjC,GAEP;MAAEb,KAAK,EAAE0Q,SAAS,CAAC7P;;GAN3B,EASEhG,mBAAA,MAAA;IACEsW,KAAK,EAAC;IACNnR,KAAK,EAAE0Q,SAAS,CAAC7P;IACjB1F,MAAM,EAAEyV,QAAQ,CAAC9U,SAAT,GAAqB8U,QAAQ,CAACrZ,KAAT,CAAe8C;IAC5CK,UAAU,EAAEkW,QAAQ,CAAClW;IACrBoE,GAAG,EAAE+R;GALP,EAOEhW,mBAAA,CAACkH,IAAD,oBAAU2O,UAAV,CAPF,EAQE7V,mBAAA,CAACwT,gBAAD,oBAAsB0C,YAAtB,CARF,CATF,CAbF,CADF;AAoCD,CA7DM;;;;ACXA,MAAMM,gBAAgB,GAMxB,CAAC;EAAE5R,MAAF;EAAUoB,QAAV;EAAoBtD,aAApB;EAAmCN,GAAnC;EAAwC2C;AAAxC,CAAD;EACH,MAAMC,SAAS,GAAGnC,MAAM,CAAiB,IAAjB,CAAxB;EAEAM,SAAS,CAAC;IACR,IAAI6B,SAAS,CAAC5B,OAAd,EAAuB;MACrB4B,SAAS,CAAC5B,OAAV,CAAkB+S,UAAlB,GAA+BvR,MAA/B;;GAFK,EAIN,CAACA,MAAD,CAJM,CAAT;EAMA,OACE5E,mBAAA,MAAA;IACEqW,GAAG,EAAC;IACJjW,KAAK,EAAE;MACLqW,MAAM,EAAErU,GAAG,UACAM,yBADA,kBAEQA;;IAErBzC,SAAS,EAAEC,QAAM,CAACwW;IAClB3R,QAAQ,EAAEA;IACVd,GAAG,EAAEe;GATP,EAWEhF,mBAAA,MAAA;IAAKI,KAAK,EAAE;MAAE+E,KAAK,EAAEa;;IAAY/F,SAAS,EAAEC,QAAM,CAAC0E;GAAnD,CAXF,CADF;AAeD,CA9BM;;MCuBM+R,KAAK,GAAwC,CAAC;EACzDja,KADyD;EAEzDkD,YAAY,EAAZA,aAAY,GAAG,EAF0C;EAGzDqG,WAAW,EAAXA,YAAW,GAAG,EAH2C;EAIzD2Q,aAAa,EAAbA,cAAa,GAAG,OAJyC;EAKzD3V,SAAS,EAATA,UAAS,GAAG,EAL6C;EAMzD4D,WAAW,EAAXA,YAAW,GAAG,CAN2C;EAOzDlI,QAAQ,EAARA,SAAQ,GAAGhC,QAAQ,CAAC4C,GAPqC;EAQzDX,aAAa,EAAbA,cAAa,GAAG,CARyC;EASzDsB,MAAM,EAANA,OAAM,GAAG,OATgD;EAUzD2Y,OAAO,EAAPA,QAAO,GAAG,EAV+C;EAWzDzM,eAAe,EAAfA,gBAAe,GAAG,CAXuC;EAYzDE,gBAAgB,EAAhBA,iBAAgB,GAAG,SAZsC;EAazDC,wBAAwB,EAAxBA,yBAAwB,GAAG,SAb8B;EAczDC,kBAAkB,EAAlBA,mBAAkB,GAAG,SAdoC;EAezDC,0BAA0B,EAA1BA,2BAA0B,GAAG,SAf4B;EAgBzDC,oBAAoB,EAApBA,qBAAoB,GAAG,SAhBkC;EAiBzDC,4BAA4B,EAA5BA,6BAA4B,GAAG,SAjB0B;EAkBzDC,sBAAsB,EAAtBA,uBAAsB,GAAG,SAlBgC;EAmBzDC,8BAA8B,EAA9BA,+BAA8B,GAAG,SAnBwB;EAoBzDC,wBAAwB,EAAxBA,yBAAwB,GAAG,SApB8B;EAqBzDC,gCAAgC,EAAhCA,iCAAgC,GAAG,SArBsB;EAsBzD3I,GAAG,EAAHA,IAAG,GAAG,KAtBmD;EAuBzDiI,WAAW,EAAXA,YAAW,GAAG,CAvB2C;EAwBzD6D,QAAQ,EAARA,SAAQ,GAAG,MAxB8C;EAyBzDyF,UAAU,EAAVA,WAAU,GAAG,MAzB4C;EA0BzD9T,UAAU,EAAVA,WAAU,GAAG,iFA1B4C;EA2BzDC,QAAQ,EAARA,SAAQ,GAAG,MA3B8C;EA4BzD2C,WAAW,EAAXA,YAAW,GAAG,EA5B2C;EA6BzDyD,UAAU,EAAVA,WAAU,GAAG,0BA7B4C;EA8BzD4Q,QA9ByD;EA+BzDnU,cAAc,EAAdA,eAAc,GAAG2B,sBA/BwC;EAgCzDmB,cAAc,EAAdA,eAAc,GAAG9F,qBAhCwC;EAiCzD+F,aAAa,EAAbA,cAAa,GAAG1E,oBAjCyC;EAkCzD8S,YAlCyD;EAmCzDC,gBAnCyD;EAoCzDX,aApCyD;EAqCzDlR,OArCyD;EAsCzD8R,QAtCyD;EAuCzD+C,QAvCyD;EAwCzD7V;AAxCyD,CAAD;EA0CxD,MAAM8V,UAAU,GAAGnU,MAAM,CAAiB,IAAjB,CAAzB;EACA,MAAM0C,WAAW,GAAG1C,MAAM,CAAiB,IAAjB,CAA1B;EACA,MAAM,CAACiF,SAAD,EAAYmP,YAAZ,IAA4BjU,QAAQ,CAAY;IACpD,MAAM,CAACpF,SAAD,EAAYC,OAAZ,IAAuBpB,cAAc,CAACC,KAAD,EAAQC,SAAR,EAAkBC,cAAlB,CAA3C;IACA,OAAO;MAAED,QAAQ,EAARA,SAAF;MAAYoB,KAAK,EAAEJ,SAAS,CAACC,SAAD,EAAYC,OAAZ,EAAqBlB,SAArB;KAAnC;GAFwC,CAA1C;EAIA,MAAM,CAACua,eAAD,EAAkBC,kBAAlB,IAAwCnU,QAAQ,CACpDkJ,SADoD,CAAtD;EAIA,MAAM,CAACxJ,aAAD,EAAgB0U,gBAAhB,IAAoCpU,QAAQ,CAAC,CAAD,CAAlD;EACA,MAAM,CAACV,iBAAD,EAAoB+U,oBAApB,IAA4CrU,QAAQ,CAAC,CAAD,CAA1D;EACA,MAAM,CAACX,kBAAD,EAAqBiV,qBAArB,IAA8CtU,QAAQ,CAAC6B,YAAD,CAA5D;EACA,MAAM,CAACmG,QAAD,EAAWuM,WAAX,IAA0BvU,QAAQ,CAAY,EAAZ,CAAxC;EACA,MAAM,CAACyQ,UAAD,EAAaG,aAAb,IAA8B5Q,QAAQ,CAAa;IACvDsL,MAAM,EAAE;GADkC,CAA5C;EAGA,MAAMhF,UAAU,GAAGnI,OAAO,CACxB,MAAOF,UAAS,GAAG4V,QAAb,GAAwB,GADN,EAExB,CAAC5V,UAAD,EAAY4V,QAAZ,CAFwB,CAA1B;EAKA,MAAM,CAACxR,YAAD,EAAeC,eAAf,IAAkCtC,QAAQ,EAAhD;EACA,MAAM,CAACwU,UAAD,EAAa3D,aAAb,IAA8B7Q,QAAQ,CAAiB,IAAjB,CAA5C;EAEA,MAAMgD,QAAQ,GAAG8B,SAAS,CAAC/J,KAAV,CAAgByB,MAAhB,GAAyByG,YAA1C;EACA,MAAMnB,eAAe,GAAGkG,QAAQ,CAACxL,MAAT,GAAkByB,UAA1C;EAEA,MAAM,CAACuB,OAAD,EAAUiV,UAAV,IAAwBzU,QAAQ,CAAC,CAAD,CAAtC;EACA,MAAM,CAACT,OAAD,EAAUmV,UAAV,IAAwB1U,QAAQ,CAAC,CAAC,CAAF,CAAtC;EACA,MAAM,CAAC2U,iBAAD,EAAoBC,oBAApB,IAA4C5U,QAAQ,CAAC,KAAD,CAA1D;EAGAG,SAAS,CAAC;IACR,IAAI0U,aAAJ;;IACA,IAAI3W,eAAJ,EAAqB;MACnB2W,aAAa,GAAG5I,iBAAiB,CAACvS,KAAD,CAAjC;KADF,MAEO;MACLmb,aAAa,GAAGnb,KAAhB;;;IAEFmb,aAAa,GAAGA,aAAa,CAACC,IAAd,CAAmBlI,SAAnB,CAAhB;IACA,MAAM,CAAChS,SAAD,EAAYC,OAAZ,IAAuBpB,cAAc,CACzCob,aADyC,EAEzClb,SAFyC,EAGzCC,cAHyC,CAA3C;IAKA,IAAImb,QAAQ,GAAGpa,SAAS,CAACC,SAAD,EAAYC,OAAZ,EAAqBlB,SAArB,CAAxB;;IACA,IAAIyF,IAAJ,EAAS;MACP2V,QAAQ,GAAGA,QAAQ,CAACC,OAAT,EAAX;;MACA,IAAIzV,OAAO,KAAK,CAAC,CAAjB,EAAoB;QAClBmV,UAAU,CAACK,QAAQ,CAACvY,MAAT,GAAkByG,YAAnB,CAAV;;;;IAGJgR,YAAY,CAAC;MAAElZ,KAAK,EAAEga,QAAT;MAAmBpb,QAAQ,EAARA;KAApB,CAAZ;IACA4a,WAAW,CACTpN,iBAAiB,CACf0N,aADe,EAEfE,QAFe,EAGf9R,YAHe,EAIfhF,UAJe,EAKfqI,UALe,EAMfc,gBANe,EAOfC,YAPe,EAQfjI,IARe,EASfkI,iBATe,EAUfC,yBAVe,EAWfC,mBAXe,EAYfC,2BAZe,EAafC,qBAbe,EAcfC,6BAde,EAefC,uBAfe,EAgBfC,+BAhBe,EAiBfC,yBAjBe,EAkBfC,iCAlBe,CADR,CAAX;GArBO,EA2CN,CACDrO,KADC,EAEDC,SAFC,EAGDC,cAHC,EAIDqE,UAJC,EAKDmJ,gBALC,EAMDnE,YANC,EAODqD,UAPC,EAQDe,YARC,EASDC,iBATC,EAUDC,yBAVC,EAWDC,mBAXC,EAYDC,2BAZC,EAaDC,qBAbC,EAcDC,6BAdC,EAeDC,uBAfC,EAgBDC,+BAhBC,EAiBDC,yBAjBC,EAkBDC,iCAlBC,EAmBD3I,IAnBC,EAoBDG,OApBC,EAqBDrB,eArBC,CA3CM,CAAT;EAmEAiC,SAAS,CAAC;IACR,IACExG,SAAQ,KAAKmL,SAAS,CAACnL,QAAvB,KACEma,QAAQ,IAAI,CAACI,eAAd,IACEJ,QAAQ,IAAI,CAAAI,eAAe,SAAf,IAAAA,eAAe,WAAf,YAAAA,eAAe,CAAElY,OAAjB,QAA+B8X,QAAQ,CAAC9X,OAAT,EAF9C,CADF,EAIE;MACA,MAAMjB,KAAK,GAAG+J,SAAS,CAAC/J,KAAxB;MACA,MAAM2F,KAAK,GAAG3F,KAAK,CAACsN,SAAN,CACZ,CAACzB,CAAD,EAAI7C,CAAJ,KACE+P,QAAQ,CAAC9X,OAAT,MAAsB4K,CAAC,CAAC5K,OAAF,EAAtB,IACA+H,CAAC,GAAG,CAAJ,KAAUhJ,KAAK,CAACyB,MADhB,IAEAsX,QAAQ,CAAC9X,OAAT,KAAqBjB,KAAK,CAACgJ,CAAC,GAAG,CAAL,CAAL,CAAa/H,OAAb,EAJX,CAAd;;MAMA,IAAI0E,KAAK,KAAK,CAAC,CAAf,EAAkB;QAChB;;;MAEFyT,kBAAkB,CAACL,QAAD,CAAlB;MACAY,UAAU,CAACzR,YAAW,GAAGvC,KAAf,CAAV;;GAjBK,EAmBN,CACDoT,QADC,EAED7Q,YAFC,EAGD6B,SAAS,CAAC/J,KAHT,EAID+J,SAAS,CAACnL,QAJT,EAKDA,SALC,EAMDua,eANC,EAODC,kBAPC,CAnBM,CAAT;EA6BAhU,SAAS,CAAC;IACR,MAAM;MAAEwL,WAAF;MAAeL;QAAWmF,UAAhC;;IACA,IAAI9E,WAAJ,EAAiB;MACf,IAAIL,MAAM,KAAK,QAAf,EAAyB;QACvBsF,aAAa,CAAC;UAAEtF,MAAM,EAAE;SAAX,CAAb;QACAiJ,WAAW,CAACvM,QAAQ,CAACmE,MAAT,CAAgB7N,CAAC,IAAIA,CAAC,CAACI,EAAF,KAASiN,WAAW,CAACjN,EAA1C,CAAD,CAAX;OAFF,MAGO,IACL4M,MAAM,KAAK,MAAX,IACAA,MAAM,KAAK,KADX,IAEAA,MAAM,KAAK,OAFX,IAGAA,MAAM,KAAK,UAJN,EAKL;QACA,MAAM2J,aAAa,GAAGjN,QAAQ,CAACkN,IAAT,CAAc5W,CAAC,IAAIA,CAAC,CAACI,EAAF,KAASiN,WAAW,CAACjN,EAAxC,CAAtB;;QACA,IACEuW,aAAa,KACZA,aAAa,CAACnb,KAAd,CAAoB0H,OAApB,OAAkCmK,WAAW,CAAC7R,KAAZ,CAAkB0H,OAAlB,EAAlC,IACCyT,aAAa,CAAChb,GAAd,CAAkBuH,OAAlB,OAAgCmK,WAAW,CAAC1R,GAAZ,CAAgBuH,OAAhB,EADjC,IAECyT,aAAa,CAACvT,QAAd,KAA2BiK,WAAW,CAACjK,QAH5B,CADf,EAKE;UAEA,MAAMyT,WAAW,GAAGnN,QAAQ,CAAC3J,GAAT,CAAaC,CAAC,IAChCA,CAAC,CAACI,EAAF,KAASiN,WAAW,CAACjN,EAArB,GAA0BiN,WAA1B,GAAwCrN,CADtB,CAApB;UAGAiW,WAAW,CAACY,WAAD,CAAX;;;;GAvBC,EA2BN,CAAC1E,UAAD,EAAazI,QAAb,CA3BM,CAAT;EA6BA7H,SAAS,CAAC;IACR,IAAIqU,UAAJ,EAAgB;MACdD,WAAW,CAACvM,QAAQ,CAAC3J,GAAT,CAAaC,CAAC,IAAKA,CAAC,CAACI,EAAF,KAAS8V,UAAU,CAAC9V,EAApB,GAAyBJ,CAAzB,GAA6BkW,UAAhD,CAAD,CAAX;MACA3D,aAAa,CAAC,IAAD,CAAb;;GAHK,EAKN,CAAC2D,UAAD,EAAaxM,QAAb,CALM,CAAT;EAOA7H,SAAS,CAAC;IACR,IAAI,CAACyT,cAAL,EAAoB;MAClBQ,gBAAgB,CAAC,CAAD,CAAhB;;;IAEF,IAAI7R,WAAW,CAACnC,OAAhB,EAAyB;MACvBgU,gBAAgB,CAAC7R,WAAW,CAACnC,OAAZ,CAAoBI,WAArB,CAAhB;;GALK,EAON,CAAC+B,WAAD,EAAcqR,cAAd,CAPM,CAAT;EASAzT,SAAS,CAAC;IACR,IAAI6T,UAAU,CAAC5T,OAAf,EAAwB;MACtBiU,oBAAoB,CAACL,UAAU,CAAC5T,OAAX,CAAmBI,WAAnB,GAAiCd,aAAlC,CAApB;;GAFK,EAIN,CAACsU,UAAD,EAAatU,aAAb,CAJM,CAAT;EAMAS,SAAS,CAAC;IACR,IAAI0B,YAAJ,EAAiB;MACfyS,qBAAqB,CAACzS,YAAW,GAAGjF,aAAf,CAArB;KADF,MAEO;MACL0X,qBAAqB,CAAC5a,KAAK,CAAC8C,MAAN,GAAeyB,UAAf,GAA2BrB,aAA5B,CAArB;;GAJK,EAMN,CAACiF,YAAD,EAAcnI,KAAd,EAAqBkD,aAArB,EAAmCqB,UAAnC,CANM,CAAT;EASAkC,SAAS,CAAC;;;IACR,MAAMiV,WAAW,GAAIpJ,KAAD;MAClB,IAAIA,KAAK,CAACqJ,QAAN,IAAkBrJ,KAAK,CAACsJ,MAA5B,EAAoC;QAClC,MAAMC,UAAU,GAAGvJ,KAAK,CAACsJ,MAAN,GAAetJ,KAAK,CAACsJ,MAArB,GAA8BtJ,KAAK,CAACwJ,MAAvD;QACA,IAAIC,UAAU,GAAGlW,OAAO,GAAGgW,UAA3B;;QACA,IAAIE,UAAU,GAAG,CAAjB,EAAoB;UAClBA,UAAU,GAAG,CAAb;SADF,MAEO,IAAIA,UAAU,GAAGzS,QAAjB,EAA2B;UAChCyS,UAAU,GAAGzS,QAAb;;;QAEF0R,UAAU,CAACe,UAAD,CAAV;QACAzJ,KAAK,CAACyF,cAAN;OATF,MAUO,IAAI5P,YAAJ,EAAiB;QACtB,IAAI6T,UAAU,GAAGlW,OAAO,GAAGwM,KAAK,CAACwJ,MAAjC;;QACA,IAAIE,UAAU,GAAG,CAAjB,EAAoB;UAClBA,UAAU,GAAG,CAAb;SADF,MAEO,IAAIA,UAAU,GAAG5T,eAAe,GAAGD,YAAnC,EAAgD;UACrD6T,UAAU,GAAG5T,eAAe,GAAGD,YAA/B;;;QAEF,IAAI6T,UAAU,KAAKlW,OAAnB,EAA4B;UAC1BiV,UAAU,CAACiB,UAAD,CAAV;UACA1J,KAAK,CAACyF,cAAN;;;;MAIJmD,oBAAoB,CAAC,IAAD,CAApB;KAxBF;;IA4BA,uBAAAZ,UAAU,CAAC5T,OAAX,4EAAoBkS,gBAApB,CAAqC,OAArC,EAA8C8C,WAA9C,EAA2D;MACzDO,OAAO,EAAE;KADX;IAGA,OAAO;;;MACL,wBAAA3B,UAAU,CAAC5T,OAAX,8EAAoB+R,mBAApB,CAAwC,OAAxC,EAAiDiD,WAAjD;KADF;GAhCO,EAmCN,CACDpB,UADC,EAEDxU,OAFC,EAGDD,OAHC,EAIDsC,YAJC,EAKDmB,QALC,EAMD5D,IANC,EAOD0C,eAPC,CAnCM,CAAT;;EA6CA,MAAM8T,aAAa,GAAI5J,KAAD;IACpB,IAAIxM,OAAO,KAAKwM,KAAK,CAAC6J,aAAN,CAAoB5T,SAAhC,IAA6C,CAAC0S,iBAAlD,EAAqE;MACnEF,UAAU,CAACzI,KAAK,CAAC6J,aAAN,CAAoB5T,SAArB,CAAV;MACA2S,oBAAoB,CAAC,IAAD,CAApB;KAFF,MAGO;MACLA,oBAAoB,CAAC,KAAD,CAApB;;GALJ;;EASA,MAAMkB,aAAa,GAAI9J,KAAD;IACpB,IAAIzM,OAAO,KAAKyM,KAAK,CAAC6J,aAAN,CAAoB1C,UAAhC,IAA8C,CAACwB,iBAAnD,EAAsE;MACpED,UAAU,CAAC1I,KAAK,CAAC6J,aAAN,CAAoB1C,UAArB,CAAV;MACAyB,oBAAoB,CAAC,IAAD,CAApB;KAFF,MAGO;MACLA,oBAAoB,CAAC,KAAD,CAApB;;GALJ;;EAYA,MAAMmB,aAAa,GAAI/J,KAAD;IACpBA,KAAK,CAACyF,cAAN;IACA,IAAIiE,UAAU,GAAGlW,OAAjB;IACA,IAAIiW,UAAU,GAAGlW,OAAjB;IACA,IAAIyW,GAAG,GAAG,IAAV;;IACA,QAAQhK,KAAK,CAAChU,GAAd;MACE,KAAK,MAAL;MACA,KAAK,WAAL;QACE0d,UAAU,IAAIzX,UAAd;QACA+X,GAAG,GAAG,KAAN;QACA;;MACF,KAAK,IAAL;MACA,KAAK,SAAL;QACEN,UAAU,IAAIzX,UAAd;QACA+X,GAAG,GAAG,KAAN;QACA;;MACF,KAAK,MAAL;MACA,KAAK,WAAL;QACEP,UAAU,IAAIxS,YAAd;QACA;;MACF,KAAK,OAAL;MACA,KAAK,YAAL;QACEwS,UAAU,IAAIxS,YAAd;QACA;;;IAEJ,IAAI+S,GAAJ,EAAS;MACP,IAAIP,UAAU,GAAG,CAAjB,EAAoB;QAClBA,UAAU,GAAG,CAAb;OADF,MAEO,IAAIA,UAAU,GAAGzS,QAAjB,EAA2B;QAChCyS,UAAU,GAAGzS,QAAb;;;MAEF0R,UAAU,CAACe,UAAD,CAAV;KANF,MAOO;MACL,IAAIC,UAAU,GAAG,CAAjB,EAAoB;QAClBA,UAAU,GAAG,CAAb;OADF,MAEO,IAAIA,UAAU,GAAG5T,eAAe,GAAGD,YAAnC,EAAgD;QACrD6T,UAAU,GAAG5T,eAAe,GAAGD,YAA/B;;;MAEF4S,UAAU,CAACiB,UAAD,CAAV;;;IAEFd,oBAAoB,CAAC,IAAD,CAApB;GAxCF;;EA8CA,MAAMqB,kBAAkB,GAAIC,MAAD;IACzB,MAAMC,eAAe,GAAGnO,QAAQ,CAACkN,IAAT,CAAc5W,CAAC,IAAIA,CAAC,CAACI,EAAF,KAASwX,MAA5B,CAAxB;IACA,MAAME,eAAe,GAAGpO,QAAQ,CAACkN,IAAT,CACtB5W,CAAC,IAAI,CAAC,CAAC+D,YAAF,IAAkB/D,CAAC,CAACI,EAAF,KAAS2D,YAAY,CAAC3D,EADvB,CAAxB;;IAGA,IAAIqV,QAAJ,EAAc;MACZ,IAAIqC,eAAJ,EAAqB;QACnBrC,QAAQ,CAACqC,eAAD,EAAkB,KAAlB,CAAR;;;MAEF,IAAID,eAAJ,EAAqB;QACnBpC,QAAQ,CAACoC,eAAD,EAAkB,IAAlB,CAAR;;;;IAGJ7T,eAAe,CAAC6T,eAAD,CAAf;GAbF;;EAeA,MAAME,mBAAmB,GAAIrc,IAAD;IAC1B,IAAIkE,eAAe,IAAIlE,IAAI,CAACwE,YAAL,KAAsB0K,SAA7C,EAAwD;MACtDhL,eAAe,CAAC,EAAE,GAAGlE,IAAL;QAAWwE,YAAY,EAAE,CAACxE,IAAI,CAACwE;OAAhC,CAAf;;GAFJ;;EAKA,MAAMqU,SAAS,GAAc;IAC3B5P,WAAW,EAAXA,YAD2B;IAE3BD,QAF2B;IAG3BtJ,KAAK,EAAEA,KAHoB;IAI3BuE,SAAS,EAATA,UAJ2B;IAK3BlD,KAAK,EAAE+J,SAAS,CAAC/J,KALU;IAM3BmI,UAAU,EAAVA,WAN2B;IAO3B9D,GAAG,EAAHA;GAPF;EASA,MAAM0T,aAAa,GAAkB;IACnChO,SADmC;IAEnC5J,MAAM,EAANA,OAFmC;IAGnCvB,QAAQ,EAARA,SAHmC;IAInCiD,YAAY,EAAZA,aAJmC;IAKnCqG,WAAW,EAAXA,YALmC;IAMnCpG,UAAU,EAAVA,WANmC;IAOnCC,QAAQ,EAARA,SAPmC;IAQnCsC,GAAG,EAAHA;GARF;EAUA,MAAM2T,QAAQ,GAA0B;IACtCrZ,KAAK,EAAEsO,QAD+B;IAEtCjN,KAAK,EAAE+J,SAAS,CAAC/J,KAFqB;IAGtC0V,UAHsC;IAItCpO,YAJsC;IAKtCpE,SAAS,EAATA,UALsC;IAMtCqI,UANsC;IAOtCrD,WAAW,EAAXA,YAPsC;IAQtC0N,UAAU,EAAVA,WARsC;IAStCzF,QAAQ,EAARA,SATsC;IAUtCrO,UAAU,EAAVA,WAVsC;IAWtCC,QAAQ,EAARA,SAXsC;IAYtC2C,WAAW,EAAXA,YAZsC;IAatCuD,QAbsC;IActC5D,GAAG,EAAHA,IAdsC;IAetCwR,aAfsC;IAgBtCC,aAhBsC;IAiBtCvO,eAAe,EAAE2T,kBAjBqB;IAkBtCnF,YAlBsC;IAmBtCC,gBAnBsC;IAoBtCX,aApBsC;IAqBtClR,OArBsC;IAsBtC8R;GAtBF;EAyBA,MAAMlO,UAAU,GAAkB;IAChC7E,SAAS,EAATA,UADgC;IAEhClB,QAAQ,EAAE6W,cAFsB;IAGhC/W,UAAU,EAAVA,WAHgC;IAIhCC,QAAQ,EAARA,SAJgC;IAKhCpD,KAAK,EAAEsO,QALyB;IAMhC9M,MAAM,EAANA,OANgC;IAOhC0B,YAAY,EAAZA,aAPgC;IAQhC4C,OARgC;IAShCqC,WAAW,EAAXA,YATgC;IAUhCW,wBAAwB,EAAEtF,QAAM,CAACqW,mBAVD;IAWhClR,YAXgC;IAYhCE,WAZgC;IAahCD,eAAe,EAAE2T,kBAbe;IAchC/X,eAAe,EAAEmY,mBAde;IAehC5T,cAAc,EAAdA,eAfgC;IAgBhCC,aAAa,EAAbA;GAhBF;EAkBA,OACE1F,mBAAA,MAAA,MAAA,EACEA,mBAAA,MAAA;IACEC,SAAS,EAAEC,QAAM,CAACoZ;IAClBtG,SAAS,EAAE+F;IACXzH,QAAQ,EAAE;IACVrN,GAAG,EAAE+S;GAJP,EAMGJ,cAAa,IAAI5W,mBAAA,CAACoF,QAAD,oBAAcU,WAAd,CANpB,EAOE9F,mBAAA,CAAC4V,SAAD;IACEC,SAAS,EAAEA;IACXC,aAAa,EAAEA;IACfC,QAAQ,EAAEA;IACVlR,WAAW,EAAEA;IACbrC,OAAO,EAAEA;IACTD,OAAO,EAAEA;GANX,CAPF,EAeGkR,UAAU,CAAC9E,WAAX,IACC3O,mBAAA,CAACmC,OAAD;IACEM,WAAW,EAAEA;IACbxB,SAAS,EAAEA;IACXoB,kBAAkB,EAAEA;IACpBC,iBAAiB,EAAEA;IACnBzC,UAAU,EAAEA;IACZC,QAAQ,EAAEA;IACVyC,OAAO,EAAEA;IACTC,OAAO,EAAEA;IACTxF,IAAI,EAAEyW,UAAU,CAAC9E;IACjB/O,YAAY,EAAEA;IACd8C,aAAa,EAAEA;IACfC,cAAc,EAAEA;IAChBP,GAAG,EAAEA;IACL4D,QAAQ,EAAEA;GAdZ,CAhBJ,EAiCEhG,mBAAA,CAAC2E,cAAD;IACEG,eAAe,EAAEA;IACjBD,WAAW,EAAEA;IACbjF,YAAY,EAAEA;IACdgF,MAAM,EAAEpC;IACRuC,QAAQ,EAAE6T;IACVxW,GAAG,EAAEA;GANP,CAjCF,CADF,EA2CEpC,mBAAA,CAACwW,gBAAD;IACExQ,QAAQ,EAAEA;IACVtD,aAAa,EAAEA;IACfkC,MAAM,EAAErC;IACRH,GAAG,EAAEA;IACL2C,QAAQ,EAAE+T;GALZ,CA3CF,CADF;AAqDD,CA9dM;;;;"}